(function(m){var l=window.AmazonUIPageJS||window.P,p=l._namespace||l.attributeErrors,g=p?p("DetailPageImageBlockAssets"):l;g.guardFatal?g.guardFatal(m)(g,window):g.execute(function(){m(g,window)})})(function(m,l,p){m.register("postMetric",function(){return{postCountMetric:function(b){if("undefined"!==typeof b){var a=l.ue;if(a){var c=a.count(b)||0;a.count(b,c+1)}}},postTimeMetric:function(b,a){if("undefined"!==typeof b&&"undefined"!==typeof a){var c=l.ue;c&&c.count(b,a)}}}});m.register("logFailedInteractionMetric",
function(){return{isEnabled:!1}});m.register("postEarlyMetric",function(){return null});m.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(b,a,c,d){b=b.extend(!0,{},c,d);var f=new a(b);m.register("ImageBlockAPI",function(){return f.api});return f});m.when("A","jQuery","ImageBlockBTF").register("ImageBlockAiryLoader",function(b,a,c){b=c.airyConfig;b.jsUrl&&m.load.js(b.jsUrl);b.cssUrl&&m.load.css(b.cssUrl)});
m.when("A","jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(b,a,c,d,f,h){var g={};return function(b){var m=this;m.dispatch=function(b,c){var d=g[b];f.isDefined(d)&&a.each(d,function(a,b){b.call(l,c)})};m.register=function(a,b){f.isDefined(g[a])||(g[a]=[]);"function"===typeof b&&g[a].push(b)};m.model=new c(b,m);m.view=new d(b,m,m.model);m.api=new h(b,m,m.model);m.init=function(){m.model.init();m.view.init()};m.init()}});
m.when("A","jQuery","imageBlockUtils").register("ImageBlockModel",function(b,a,c){function d(a,b,f,h,g){c.isDefined(a)&&(S.type=a);c.isDefined(b)&&(S.index=b);c.isDefined(f)&&(S.thumbnailIndex=f);c.isDefined(h)&&(S.variant=h);c.isDefined(g)&&(S.color=g)}function f(a){d("image",0,0,"MAIN",a||m.landingAsinColor||m.defaultColor)}function h(a){a=a.data;I=b.copy(S);d(a.type,a.index,a.thumbnailIndex,a.variant,a.color)}function g(a){h(a);a=b.copy(a);a.data=b.copy(S);p.dispatch("updateView",a)}function l(){I=
b.copy(S);f(S.color)}var m,p,S={},I={},M,C;return function(a,c){p=c;m=a;p.register("updateSelection",g);p.register("updateModel",h);p.register("resetModel",l);this.init=function(){f()};this.getCurrentItem=function(){return b.copy(S)};this.getPreviousItem=function(){return b.copy(I)};this.setCurrentEvent=function(a){M=a};this.getCurrentEvent=function(){return M};this.setImmersiveViewModalInstance=function(a){C=a};this.getImmersiveViewModalInstance=function(){return C}}});m.when("ImageBlockBTF",
"postMetric").execute(function(b,a){function c(a,b,d,e,h){function g(a){"click"===a.type&&e.postCountMetric("thumbClick");"click"===a.type&&E.overrideAltImageClickAction?P.dispatch("thumbActionClick",a):P.dispatch("updateSelection",a)}function k(a){E.useClickZoom||P.dispatch("imageClick",a)}function m(a){E.useClickZoom||P.dispatch("imageHover",a)}function p(a){P.dispatch("button360Click",a)}function C(b){!d.isDefined(b)||"swatchClick"!==b.type&&"updatedData"!==b.type?(G.update(b),"swatchHover"!==
b.type&&K.getPreviousItem().thumbnailIndex!==b.data.thumbnailIndex&&e.postCountMetric(b.data.type+"ThumbnailSelected"),a.trigger("image-block-thumbnail-selected",b.data)):G.render(b.data.color,!1,b.onload)}function w(a){P.dispatch("resize",a)}function z(a){d.selectThumbnail(a,D)}function u(a){var b=a.data,c;b&&"ingress"!==b.type&&"click"===a.type&&(c=a);return c}function A(a){var b=K.getCurrentItem(),c={type:"click"};c.$declarativeParent=a;c.data=b;return c}var G,E,P,K,D;return function(c,d,e){G=
this;E=c;P=d;K=e;D=b("#imageBlock #altImages ul");var q=b("#imageBlock .canvas"),r=b("#main-image-container"),J;G.subViews=[];for(d=0;d<h.length;d++)G.subViews.push(new h[d](c,e,G,P));G.render=function(a,c,d){var e=0;D.find(".item").remove();a=a||K.getCurrentItem().color;b.each(G.subViews,function(b,f){e=f.render(a,e,q,D,r,c,d)||e});var f=D.find(".a-button-selected").closest(".a-declarative");J=A(f)};G.init=function(){D=b("#imageBlock #altImages ul");var c=D.find(".a-button-selected").closest(".a-declarative"),
d=c.data("action"),c=c.data(d)||{};c.color=E.landingAsinColor||E.defaultColor;P.dispatch("updateModel",{data:c});G.render(c.color,!0);E.isDebug&&l.console&&console.log(E);P.register("updateView",C);P.register("selectThumbnail",z);E.disableHoverOnAltImages||a.declarative("thumb-action",["mouseenter","mouseleave"],g);a.declarative("thumb-action",["click"],g);a.declarative("main-image-click",["click"],k);a.declarative("main-image-click",["mouseenter","mouseleave"],m);a.declarative("button-360-click",
["click"],p);b(l).resize(w)};G.update=function(a){b.each(G.subViews,function(b,c){c.update(a)});E.usePeekHover&&("mouseleave"===a.type?P.dispatch("updateSelection",J):"click"===a.type&&(J=u(a)||J))}}}var d=["A","jQuery","imageBlockUtils","postMetric"].concat(b.views);m.when.apply(m,d).register("ImageBlockView",function(){for(var a=arguments[0],b=arguments[1],d=arguments[2],h=arguments[3],g=[],k=4,l=arguments.length;k<l;k++)g.push(arguments[k]);return c(a,b,d,h,g)})});m.when("A","jQuery",
"imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(b,a,c,d,f,h,g){function l(b,d,f,h){if(!c.isjQueryObjDefined(b.find(".a-button-selected"))){var g=x.getCurrentItem();if(!h||"chromeless-video"!==g.type||!D.autoplayVideo){h=0;"image"===g.type&&(h=Math.max(S(g.color,g.variant),0));var k=d+h;k>=f&&(h=0,k=d);d=c.getImageHash(g.color,h,D);-1!==d&&(N.dispatch("updateModel",{data:{index:h,thumbnailIndex:k,variant:d.variant,
type:"image"}}),d=b.find(".item").get(k),c.selectGivenThumbnail(a(d),b))}}}function p(b,d,f){d=D.colorImages&&D.colorImages[d];var k=b;c.isDefined(d)&&(a.each(d,function(a,d){b<D.maxAlts&&(c.createThumbnail({type:"image",index:a,thumbnailIndex:b,variant:d.variant},d.thumb,Q,"imageThumbnail"),b++)}),h.isEnabled&&g.logAltImgRequestPlacedOnThumbnails(a,h,x),l(Q,k,b,f));return b}function t(b,c){if("image"===b.type){var d=a("#image-canvas-caption #canvasCaption"),e,f=D.staticStrings,h=D.colorImages,g=
b.color,k=b.index;c&&D.useIV?e=f.clickToExpand:h[g]&&h[g][k].hiRes&&D.useHoverZoom?(e=D.useHoverZoomIpad?f.touchToZoom:D.useClickZoom?f.clickToZoom:f.rollOverToZoom,D.hoverZoomIndicator&&(e="<img src='"+D.staticImages.hoverZoomIcon+"'/>&nbsp;"+e)):D.useIV&&(e=f.clickToExpand);d.html(e)}}function S(a,b){return c.getIndexForVariant(a,b,D)}function I(b,d){var f;a.each(b.main,function(a,b){c.isDefined(f)||(f=parseFloat(b[1]/b[0])<=parseFloat(D.holderRatio)?"a-stretch-vertical":"a-stretch-horizontal")});
var h="a-dynamic-image "+f,g=c.getMaxDimensionsOfMainImage(b.main,B,D),k=g[0],n=g[1],g=a("<div></div>"),k={"max-height":k,"max-width":n};g.addClass(h).css(k).attr({"data-old-hires":b.hiRes,"data-a-manual-replacement":"true",onload:d}).data("a-dynamic-image",b.main);return g}function M(a){var c=O.find(".swatchHoverExp");a=I(a);c.find(".imgTagWrapper").html(a);b.loadImageManually(a);return c}function C(a){var b=B.css("height");null!==b&&a.find(".imgTagWrapper").css("height",b);a.addClass("selected");
D.imgTagWrapperClasses&&a.find(".imgTagWrapper").addClass(D.imgTagWrapperClasses)}function w(a,d){if("image"===a.type||"unavailable"===a.type||"lazy-loaded"===a.type){var k=c.getImageHash(a.color,a.index,D);if(-1===k)return k={data:{index:0,thumbnailIndex:0,variant:"",type:"unavailable"}},c.lazyLoadingRequired(a,x,D)?A(a,!1,d):(N.dispatch("updateModel",k),c.showUnavailable(a.color)),-1;var l=O.find(".item.itemNo"+a.thumbnailIndex);if(!c.isjQueryObjDefined(l)){var l=a.thumbnailIndex,l=O.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate").addClass("image item itemNo"+
l+" maintain-height"),m=I(k,d);l.find(".placeHolder").replaceWith(m);O.find(".list").append(l);b.loadImageManually(m)}C(l);N.dispatch("loadMagnifier");t(a);D.useIV&&c.isDefined(k.hiRes)&&l.css("cursor","pointer");a.isUserGenerated&&(l=x.getPreviousItem(),m=a.variant,c.isDefined(m)&&l.thumbnailIndex!==a.thumbnailIndex&&(h.isEnabled&&g.logAltImgRequestServed(h),f.postCountMetric("ImageThumbnailSelectedVariant:"+m),0===m.indexOf("IG")&&(f.postCountMetric("IGImageSelectedVariant:"+m),f.postCountMetric("IGImageSelectedEvent:"+
a.interaction))));b.trigger("dp:image-block:update",k)}}function z(a){var d=Math.max(S(a.color,x.getCurrentItem().variant),0),d=c.getImageHash(a.color,d,D);if(-1===d)return c.lazyLoadingRequired(a,x,D)?c.lazyLoadOnHoverEnabled(D)&&(u(".3",!0),c.spinner(O,!0),b.delay(function(){x.getCurrentEvent().data===a&&A(a,!0)},500)):c.showUnavailable(a.color),-1;var f=M(d);C(f);b.trigger("dp:image-block:update",d)}function u(b,c){c?O.css("opacity",b):a("#imageBlock").css("opacity",b)}function A(a,b,f){J=b;T=
f;var h=a.color,g=D.colorToAsin[h];if(g&&g.asin){var n={};n.params={asin:g.asin,productGroupID:D.productGroupID,color:h};n.success=function(d){d?(c.ajaxState(g.asin,"success"),D.colorImages[h]=d.colorImage,c.isDefined(D.spin360ColorEnabled)&&(D.spin360ColorEnabled[h]=d.enable360),h===a.color&&(b&&J?a===x.getCurrentEvent().data&&(G(a),z(a)):(d={type:"updatedData",data:x.getCurrentItem(),onload:f||T},N.dispatch("updateView",d))),m.register(c.rankedImagesReadyEvent(g.asin))):c.ajaxState(g.asin,"fail")};
n.error=function(){c.ajaxState(g.asin,"fail")};n.indicator=c.spinner(O);c.ajaxState(g.asin,void 0)&&"fail"!==c.ajaxState(g.asin,void 0)||(u(".3",b),d.load("/gp/product/features/apparel-main-image/ranked-images.html",n),c.ajaxState(g.asin,"sent"));return D.colorImages&&D.colorImages[h]}}function G(b,d){c.lazyLoadingRequired(b,x,D)||(a("#imageBlock").css("opacity","1"),O.css("opacity","1"),c.spinner(O,!1),O.find("li").removeClass("selected"),a("#image-canvas-caption #canvasCaption").empty(),c.hideUnavailable(),
d&&O.find(".list .item").remove())}function E(){var d=O.find(".item .imgTagWrapper"),f=c.getContainerHeight(B,D.holderRatio,D.holderMaxHeight);0<f&&(B.height(f),d.height(f));O.find("img.a-dynamic-image").each(function(){var d=a(this);d.data("a-manual-replacement")&&b.loadDynamicImage(this);var f=d.data("a-dynamic-image"),f=c.getMaxDimensionsOfMainImage(f,B,D);d.css({"max-height":f[0]+"px","max-width":f[1]+"px"})})}function P(a){t(x.getCurrentItem(),"mouseenter"===a.type)}var K,D,x,N,Q,O,B,J,T,y;return function(a,
b,d,h){K=this;D=a;x=b;N=h;D.colorImages[D.landingAsinColor]=D.colorImages[D.defaultColor];K.render=function(a,b,d,f,h,g,k){O=d;Q=f;B=h;y=p(b,a,g);g||(a=x.getCurrentItem(),c.lazyLoadingRequired(a,x,D)&&N.dispatch("updateModel",{data:{type:"lazy-loaded"}}));G(x.getCurrentItem(),!g);w(x.getCurrentItem(),k);return y};K.update=function(a){var b=a.data;x.setCurrentEvent(a);"ingress"!==b.type&&G(a.data,!1);"swatchHover"===a.type?b.color===x.getCurrentItem().color?w(x.getCurrentItem()):a.captured||-1===z(b)||
(a.captured=!0):"image"===b.type&&(b.interaction=a.type,b.isUserGenerated=!0,"mouseenter"===a.type&&f.postCountMetric("dpcc_imageThumbHovered_"+(b.thumbnailIndex+1)+"_"+y),w(b),D.usePeekHover&&"click"!==a.type||(c.selectGivenThumbnail(a.$declarativeParent,Q),"click"===a.type&&f.postCountMetric("dpcc_imageThumbClicked_"+(b.thumbnailIndex+1)+"_"+y)))};N.register("imageHover",P);N.register("resize",E)}});m.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockMagnifierView",
function(b,a,c,d,f,h){function g(a){u?a.css("cursor","url('"+I.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in"))}function m(a){var b=a.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);a={};if(c.isDefined(b))for(var b=b[1].split("_"),d=0;d<b.length;d++){var f=b[d].match(/^([A-Z]+)(\d+(\.\d+)?)$/);c.isDefined(f)&&(a[f[1]]=parseInt(f[2],10))}return a}function F(b,p){function t(){var a;p.useClickZoom?(a=p.offsetInClickZoom,a=[Math.min(1,
Math.max(0,T[0]-(S[0]+a))/(S[2]-2*a)),Math.min(1,Math.max(0,T[1]-(S[1]+a))/(S[3]-2*a))]):a=J&&J.updatePosition();if(a&&B&&B.detailSize){var b=[B.detailSize[0]-B.rect.width,B.detailSize[1]-B.rect.height];B.detailImage.get(0).style.left=-(a[0]*b[0])+"px";B.detailImage.get(0).style.top=-(a[1]*b[1])+"px"}}function F(a){var b=Z?a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]:"";T=Z?[b.pageX,b.pageY]:[a.pageX,a.pageY]}function w(a){Z&&a.preventDefault();F(a);p.useClickZoom?a=[S[0],S[1],S[0]+
S[2],S[1]+S[3]]:(a=J?J.offset:b.offsetParent().offset(),a=[y[0]+a.left,y[1]+a.top,y[0]+y[2]+a.left,y[1]+y[3]+a.top]);T[0]<a[0]||T[1]<a[1]||T[0]>=a[2]||T[1]>=a[3]?(p.fadeMagnifier?fa||(fa=!0,ra=setTimeout(function(){D(!0)},500)):p.useClickZoom||D(),ia&&(ia=!1,clearTimeout(oa))):(ia||(ia=!0,oa=setTimeout(function(){d.postCountMetric("dppc_hoverZoomOpened");f.isEnabled&&h.logHoverZoomRequestServed(f)},1E3)),p.fadeMagnifier&&fa&&(fa=!1,clearTimeout(ra)),t())}function D(c){c&&C.suppressMagnifier(!0);if(W&&
(B&&B.hide(),J&&(J.destroy(),J=null),W=!1,Z?(b.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),a(document).trigger("disengaged.magnifier")):a(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),z(),c))b.one("click.magnifier touchstart.magnifier",function(a){x(a,!0)})}function x(c,e){e&&C.suppressMagnifier(!1);if(!W&&!V&&(0===aa&&(d.postCountMetric("dppc_hoverTime",new Date-(l.ue&&l.ue.t0||0)),aa=1),ja[ea]||(d.postCountMetric("dppc_hoverMain"),ja[ea]=1),y=
[b.position().left,b.position().top,b.width(),b.height()],ea&&(F(c),B?B.refit().show():B=new sa,p.useClickZoom||(J=J||new na),S=B.getWindowSize(),t()),W=!0,Z?(b.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",w).bind("touchend.magnifier",D),a(document).trigger("engaged.magnifier")):(b.unbind("mousemove.magnifier"),a(document).trigger("engaged.magnifier").bind("mousemove.magnifier",w)),e)){var f=a("#zoomWindow");if(0<f.length)f.one("click.magnifier touchend.magnifier",
function(a){D(!0)})}}function z(){p.useHoverZoom&&(Z?b.bind("touchstart.magnifier touchmove.magnifier",x):b.bind("mousemove.magnifier",x))}var C=this,M={detailImageUrl:b.attr("data-old-hires"),location:"over",locationElement:b,prelaod:"ready",zIndex:50,offsetInClickZoom:50};p=a.extend(M,p);p.adjustment=[10,0,-10,0];var B=null,J=null,T=null,y=null,S=null,L={"null":1,"":1,undefined:1},W=!1,V=!1,ea=p.detailImageUrl,Z=p.useHoverZoomIpad||0,aa=0,ja={},na=function(){function c(a){var d=Math.round(Math.min(b.width(),
B.rect.width/a));a=Math.round(Math.min(b.height(),B.rect.height/a));k.css({width:d,height:a});e=[d,a]}var d=this,e=[0,0],f=(B.detailSize&&B.detailSize[0]||5E8)/y[2],h=(B.detailSize&&B.detailSize[1]||5E8)/y[3],f=h>f?h:f;a("#magnifierLens").remove();var k=a("<div id='magnifierLens' />").css({backgroundImage:"url("+p.generalImageUrls.zoomLensBackground+")",position:"absolute"});I.showMagnifierOnHover?g(k):k.css("cursor","pointer");d.updatePosition=function(){var a=[y[2]-e[0],y[3]-e[1]],b=0>=a[0]?.5:
Math.max(0,Math.min(1,(T[0]-e[0]/2-y[0]-d.offset.left)/a[0])),c=0>=a[1]?.5:Math.max(0,Math.min(1,(T[1]-e[1]/2-y[1]-d.offset.top)/a[1])),f=y[0]+Math.round(b*a[0]),a=y[1]+Math.round(c*a[1]);k.get(0).style.left=f+"px";k.get(0).style.top=a+"px";return[b,c]};d.destroy=function(){k.remove()};d.offset=b.offsetParent().offset();c(f);d.updatePosition();k.appendTo(b.parent());B.detailImage[0].complete||B.detailImage.load(function(){var a=B.detailImage.width()/y[2];c(a);d.updatePosition()})};na.preload=function(){C.preload(p.generalImageUrls.lensBackgroundUrl)};
var sa=function(){function d(){var f={};if("over"===p.location){var f=p.useClickZoom,k={},m=a("#leftCol"),q=a("#centerCol"),r=a("#rightCol"),t=a("#hover-zoom-end"),u=a("#actionPanelContainer"),v=c.isjQueryObjDefined(m)?m.outerHeight():q.outerHeight();k.top=c.isjQueryObjDefined(m)?m.offset().top:q.offset().top;k.bottom=v+k.top;k.right=c.isjQueryObjDefined(r)?r.offset().left:u.offset().left;k.left=f?0:m.offset().left+m.outerWidth();c.isjQueryObjDefined(t)&&t.offset().top>k.bottom&&(k.bottom=t.offset().top);
f=k}else"right"===p.location&&(f=b.offset(),f={left:f.left+b.outerWidth(),top:f.top,right:f.left+b.outerWidth()+400,bottom:f.top+400});p.minHeightElement&&(f.bottom=Math.max(f.bottom,f.top+a(p.minHeightElement).outerHeight()));f.bottom=Math.min(f.bottom,a(l).scrollTop()+a(l).height());f.left+=g[0];f.top+=g[1];f.right+=g[2];f.bottom+=g[3];f.width=f.right-f.left;f.height=f.bottom-f.top;p.enhancedHoverOverlay&&c.isDefined(l.pageXOffset)&&(k=a(l).width(),f.width=k-f.left+l.pageXOffset-18,f.height-=14);
n.css({left:f.left,top:f.top,width:f.width,height:f.height});h.rect=f;return h}function f(a){var b=new Image;h.detailSize=[0,0];b.onload=function(){h.detailSize=[b.width,b.height];t()};b.src=a.attr("src");if(0<b.width&&0<b.height)h.detailSize=[b.width,b.height];else if(p.detailImageSize)h.detailSize=p.detailImageSize;else{a=m(b.src);var c=y[2]/y[3];a.SS||a.AA?(a=a.SS||a.AA,h.detailSize=[a,a]):a.SX?h.detailSize=[a.SX,Math.round(a.SX/c)]:a.SY?h.detailSize=[Math.round(a.SY*c),a.SY]:a.SL&&(h.detailSize=
1<=c?[a.SL,Math.round(a.SL/c)]:[Math.round(a.SL*c),a.SL])}}var h=this,g=p.adjustment;a("#zoomWindow").remove();var k={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:p.zIndex};p.enhancedHoverOverlay&&(k.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",k.border="1px solid #949494",k.borderColor="rgb(148,148,148)");var n=a("<div id='zoomWindow' />").css(k);p.fadeMagnifier&&n.fadeIn(200);p.useClickZoom&&(u?n.css("cursor",'url("'+p.zoomOutIcon+'"), auto'):(n.css("cursor","-webkit-zoom-out"),
n.css("cursor","-moz-zoom-out"),n.css("cursor","zoom-out")));h.updateImage=function(b){b=a("<img id='detailImg' src='"+b+"'/>").css("position","absolute");h.detailImage&&h.detailImage.remove();n.append(b);a(document).trigger("updated.magnifier");h.detailImage=b;f(h.detailImage)};h.refit=function(){d();f(h.detailImage);return h};p.fadeMagnifier?(h.show=function(){n.fadeIn(200);return h},h.hide=function(){n.fadeOut(200);return h}):(h.show=function(){n.show();return h},h.hide=function(){n.hide();return h});
h.destroy=function(){n.remove();return h};h.getWindowSize=function(){return[h.rect.left,h.rect.top,h.rect.width,h.rect.height]};h.updateImage(ea);d();n.appendTo(document.body)},fa=!1,ra,ia=!1,oa;C.preload=function(b){b=a.makeArray(b);for(var c=b.length,d=0;d<c;d++)b[d]instanceof Array?C.preload(b[d]):"string"===typeof b[d]&&b[d]&&!L[b[d]]&&(L[b[d]]=new Image,L[b[d]].src=b[d])};C.changeImage=function(c,d){W&&D();ea=d;b.attr("src",c);C.preload(c);y=[b.position().left,b.position().top,b.width(),b.height()];
d&&("immediately"===p.preload?C.preload(d,!0):a(l).ready(function(){C.preload(d)}),B?B.updateImage(d):b.attr("data-old-hires",d))};C.destroy=function(){b.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");a(document).unbind("mousemove.magnifier");J&&J.destroy();J=null;B&&B.destroy();B=null};C.detailImage=function(){return B.detailImage};C.suppressMagnifier=function(a){V=a};C.isEngaged=function(){return W};C.engageMagnifier=x;C.disengageMagnifier=D;b[0].complete?z():
b.one("load",z);C.preload(b.attr("src"));if(p.preload){var va=p.detailImageUrl,M=function(){C.preload(va,!0);p.useClickZoom||na.preload()},Y=p.preload;Y.constructor!==Array&&(Y=[Y]);for(var ha=0;ha<Y.length;ha++)if("immediately"===Y[ha])M();else if(a(l)[Y[ha]])a(l)[Y[ha]](M);else a(l).bind(Y[ha],M)}return C}function t(){if(I.useHoverZoom){var b={adjustment:[0,0,1,1],generalImageUrls:I.staticImages,location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:190,useHoverZoomIpad:I.useHoverZoomIpad,
useHoverZoom:I.useHoverZoom,useClickZoom:I.useClickZoom,fadeMagnifier:I.fadeMagnifier,zoomOutIcon:I.staticImages.zoomOutCur,enhancedHoverOverlay:I.enhancedHoverOverlay||I.atfEnhancedHoverOverlay};w&&(w.destroy(),w=p);var d=z.find(".image.item.selected img[data-old-hires]").not("[data-old-hires='']");c.isjQueryObjDefined(d)?I.useClickZoom?(d.one("click.loadmagnifier touchstart.loadmagnifier",function(a){w=new F(d,b);w.engageMagnifier(a,!0)}),u?d.css("cursor",'url("'+I.staticImages.zoomInCur+'"), auto'):
(d.css("cursor","-webkit-zoom-in"),d.css("cursor","-moz-zoom-in"),d.css("cursor","zoom-in"))):w=new F(d,b):f.isEnabled&&h.logHoverZoomApplicability(a,f)}}var S,I,M,C,w,z,u=navigator.userAgent.match(/msie|trident/i);return function(a,b,c,d){S=this;I=a;M=b;f.refToModel=M;C=d;S.render=function(a,b,c,d,e,f){z=c;w&&(w.destroy(),w=p)};S.update=function(a){};C.register("loadMagnifier",t);C.register("resize",t)}});m.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",
function(b,a,c,d){function f(a,b,f){a=(a=f?f:c.getColorFromState(b.getState().hovered_variations,l))&&""!==a?a:l.defaultColor;p.dispatch("updateView",{type:"swatchHover",data:{color:a}});d.postCountMetric("swatchHover")}function h(a,b,f,g){a=(a=g?g:c.getColorFromState(b.getState().selected_variations,l))&&""!==a?a:l.defaultColor;a===m.getCurrentItem().color?"function"===typeof f&&f():(p.dispatch("updateSelection",{type:"swatchClick",data:{color:a},onload:f}),d.postCountMetric("swatchClick"))}var g,
l,m,p;return function(a,c,d,e){g=this;l=a;m=c;p=e;b.on("image-block-twister-swatch-hover",f);b.on("image-block-twister-swatch-click",h);g.render=function(a,b,c,d,e){};g.update=function(a){}}});m.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric").register("ImageBlockVideoView",function(b,a,c,d,f,h){function g(b,c,e,f){!u.autoplayVideo||T||u.useChromelessVideoPlayer?!d.isjQueryObjDefined(b.find(".a-button-selected"))&&!d.productReelExperimentEnabled(u)&&(e=A.getCurrentItem(),
!f||u.prioritizeVideos||"chromeless-video"===e.type&&u.autoplayVideo)&&(f=d.getVideoHash(e.color,0,u),-1!==f&&(c+=0,G.dispatch("updateModel",{data:{index:0,thumbnailIndex:c,variant:f.variant,type:u.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),c=b.find(".item").get(c),d.selectGivenThumbnail(a(c),b))):(d.selectGivenThumbnail(b.find("img:last"),b),d.fadeToThumbnail(b.find("img").length-1,D,b))}function l(a){var b=A.getCurrentItem().color;if(u.useChildVideos&&!u.colorToVideo[b]){var c=
function(){if(a){u.colorToVideo[b]=a;var c={type:"updatedData",data:A.getCurrentItem()};G.dispatch("updateView",c)}};u.lazyLoadExperienceDisabled?c():m.when(d.rankedImagesReadyEvent(u.colorToAsin[b].asin)).execute(function(){c()})}}function p(a){if(!u.useChildVideos)return d.lazyLoadingRequired(A.getCurrentItem(),A,u)?void 0:u.videos;if(u.colorToVideo[a])return u.colorToVideo[a];var b=u.colorToAsin[a];if(b&&b.asin){var c={};c.params={asin:b.asin,productGroupID:u.productGroupID,useAiryVideoPlayer:!0,
useChromelessVideoPlayer:u.useChromelessVideoPlayer,isUDP:u.isUDP};u.isDPXFeatureEnabled||(c.success=function(a){l(a)},f.load("/gp/product/features/apparel-main-image/videos.html",c));return u.colorToVideo&&u.colorToVideo[a]}}function t(){G.dispatch("selectThumbnail",d.productReelExperimentEnabled(u)?1:0)}function S(b,f,g,l){return c.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:b[0],streamingUrls:f.url,swfUrl:g.swfUrl,foresterMetadataParams:g.foresterMetadataParams,backgroundColor:"transparent",
flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var a=d.isjQueryObjDefined(b.find("video"))?"HTML5":"FLASH";h.postCountMetric("dppc_chromelessVideo:"+a)},playing:function(){b.parent().css("z-index",8)},videounsupported:function(){t();h.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){t();h.postCountMetric("dppc_chromelessVideo:ERROR")},ended:function(){N.seek(0)}},cuePoints:[{values:f.durationSeconds-1,type:"position",
callback:function(c,d,e){c=e.durationSeconds-e.playheadTimeSeconds;b.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*c,.1,function(){b.parent().css({"background-color":"transparent","z-index":-1});t();a(this).show().css("opacity",1)})}}]})}function I(c){if("chromeful-video"===c.type||"chromeless-video"===c.type){var e=d.getVideoHash(c.color,c.index,u);if(-1===e)return-1;if("chromeful-video"===c.type){c=D.width()/D.height();var f=parseInt(e.videoWidth,10),h=parseInt(e.videoHeight,
10);d.updateAspectRatio(c,f,h,P);N?(N.show(),d.loadMediaIntoAiry(N,e,Q)):N=d.createAiryInstanceForChromeful(P,e,Q,null,u.autoplayVideo,D,K,E);b:if(d.productReelExperimentEnabled(u)){if(1<d.getVideosCount(A.getCurrentItem().color,u)){if(d.isDefined(x)){K.show();break b}x=a('<a class="more-videos"></a>').attr("href","#").text(u.staticStrings.watchMoreVideos);K.find("#videoCaption").append(x);b.declarative.create(x,"videoIngressClick",O)}d.playVideoInImmersiveView(u,A.getCurrentItem().color)&&(b.declarative.create(P,
"videoIngressClick",O),P.children().css("z-index","-1"),P.css("display","inline-block"))}else K.find("#videoCaption").text(u.staticStrings.playVideo),K.show();e=N;u.autoplayVideo&&e&&!T&&(d.toggleVideoCaption(K),e.setVolume(0),e.show(),e.play(),T=!0)}else N?(N.show(),d.loadMediaIntoAiry(N,e,Q),N.play(),K.show()):(N=S(P,e,Q))&&N.play()}}function M(b,c,e){var f=p(c);c=b;d.isDefined(f)&&0<f.length&&u.alwaysIncludeVideo&&b===u.maxAlts&&(E.find(".item:last").remove(),b--);d.isDefined(f)&&(a.each(f,function(a,
c){if(b<u.maxAlts){var e=u.useChromelessVideoPlayer?"chromeless-video":"chromeful-video",g={type:e,index:a,thumbnailIndex:b,variant:c.variant};O={type:"video-ingress",index:a,thumbnailIndex:b,variant:c.variant};d.productReelExperimentEnabled(u)&&("chromeful-video"===e&&(y+=" videoBlockIngress",d.productReelDarkIngressEnabled(u)&&(y+=" videoBlockDarkIngress",c.thumb=c.thumb.replace("_PKmb-play-button-overlay-thumb",""))),u.altsOnLeft||(y+=" a-align-top"));d.createThumbnail(g,c.thumb,E,y);if(d.productReelExperimentEnabled(u)){C(E.find(".videoBlockIngress img"),
u.videoIngressATFSlateThumbURL);var g=1<f.length?"multiple-videos":"one-video",l=1<f.length?f.length+" "+u.staticStrings.multipleVideos:u.staticStrings.singleVideo;l&&E.find(".videoBlockIngress").append(E.find("#videoCount_template").clone().text(l).attr("id","videoCount")).addClass(g)}J||(J=!0,h.postCountMetric("chromeless-video"===e?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"));b++}if(d.productReelExperimentEnabled(u))return!1}),g(E,c,b,e));return b}function C(a,b){var c=a.attr("src");
if(c&&b){a.attr("src",b);var d=new Image;d.onload=function(b){a.attr("src",c)};d.src=c}}function w(a){N&&N.pause();a.data=O;a.clickTimeStamp=a.$event.timeStamp;var b="a"===a.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";G.dispatch("imageClick",a);h.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp);h.postCountMetric(b)}var z,u,A,G,E,P,K,D,x,N,Q,O,B,J=!1,T=!1,y="videoThumbnail";return function(c,e,f,g){z=this;u=c;A=e;G=g;Q=u.airyConfig;u.colorToVideo={};u.colorToVideo[u.landingAsinColor]=
u.colorToVideo[u.defaultColor]=u.videos;z.render=function(c,e,f,h,g,n){E=h;P=g.find("#main-video-container");K=P.parent().find("#video-canvas-caption");D=a("#main-image-container");u.useChromelessVideoPlayer||P.addClass("chromeful-container");B=M(e,c,n);I(A.getCurrentItem());d.productReelExperimentEnabled(u)&&b.declarative("videoIngressClick",["click"],w);return B};z.update=function(a){var b=a.data;"ingress"!==b.type&&N&&(N.hide(),P.parent().css("z-index",-1),K.hide());if("swatchHover"===a.type)b.color===
A.getCurrentItem().color?I(A.getCurrentItem()):a.captured||d.lazyLoadingRequired(b,A,u)&&!d.lazyLoadOnHoverEnabled(u)&&I(A.getCurrentItem());else if("chromeful-video"===b.type||"chromeless-video"===b.type)"mouseenter"===a.type&&h.postCountMetric("dpcc_videoThumbHovered_"+(b.thumbnailIndex+1)+"_"+B),I(b),u.usePeekHover&&"click"!==a.type||(d.selectGivenThumbnail(a.$declarativeParent,E),"click"===a.type&&d.productReelDarkIngressEnabled(u)&&(h.postCountMetric("dpcc_videoThumbClicked_"+(b.thumbnailIndex+
1)+"_"+B),O.action="videoIngressClick",O.clickTimeStamp=a.$event.timeStamp,G.dispatch("videoIngressClick",O),h.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp)))};if(u.isDPXFeatureEnabled)b.on("triggerVideoAjax",l)}});m.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",function(b,a,c,d,f,h,g,m,F,t){function S(a){return a.hiRes||
a.large||a.main[a.main.length-1]}function I(){v.find("#ivTitle").click(function(){ca.hide()})}function M(a){if(f.productReelExperimentEnabled(R)){var b=v.find("#ivMediaSelect");b.find("option[value='"+a+"']").attr("selected",!0);b.trigger("change")}}function C(){X=$a?{type:"360-spin"}:la.getCurrentItem()}function w(){var a=v.find("#ivStage"),b=ca.$container.find(".a-popover-wrapper"),c=b.find(".a-popover-inner"),b=b.height()-t.getDimension(c,"padding-top")-t.getDimension(c,"padding-bottom");v.css("height",
b);var c=v.find("#ivTitle").outerHeight(!0),d=v.find("#ivVariationSelection").outerHeight(!0),e=v.find("#ivMediaSelection").outerHeight(!0),f=v.find("#ivThumbs"),h=t.getDimension(f,"margin-top")+t.getDimension(f,"margin-bottom");f.css("height",b-c-d-e-h);v.find("#ivLargeImage").css("height",b);a.css("width",v.width()-t.getDimension(v,"padding-left")-t.getDimension(v,"padding-right")-v.find("#ivThumbColumn").width()-t.getDimension(a,"margin-left")-t.getDimension(a,"margin-right"))}function z(){v.find("#ivMediaSelect").change(function(){var a=
d(this).val();"all"===a?(v.find("#ivVideoList").hide(),v.find("#ivThumbs").show(),v.find(".ivThumbVideo").show(),"chromeful-video"===X.type&&v.find("#ivVideo_"+X.index).click()):"images"===a?(v.find("#ivVideoList").hide(),v.find("#ivThumbs").show(),v.find(".ivThumbVideo").hide(),"chromeful-video"===X.type&&(0===ma&&0===da?v.find("#iv360").click():0===ma?v.find("#ivHeroImage_0").click():v.find("#ivImage_0").click())):"videos"===a&&(v.find("#ivVideoList").show(),v.find("#ivThumbs").hide(),"chromeful-video"!==
X.type?v.find("#ivVideoList_0").click():v.find("#ivVideoList_"+X.index).click())})}function u(){var a=v.find("#ivStage").find("#ivLargeImage"),b=a.width(),c=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var e=d.width(),f=d.height();0<d.length&&(d[0].naturalWidth&&(e=d[0].naturalWidth),d[0].naturalHeight&&(f=d[0].naturalHeight));a.css("cursor","auto");var e=0===e?1:e,f=0===f?1:f,h=Math.min(b/e,c/f),g=f*h,k=e*h;1>h?(Ya?a.css("cursor","url('"+R.staticImages.zoomIn+"'), auto"):(a.css("cursor",
"-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),Wa=!0):Wa=!1;e=Math.min(k,e);f=Math.min(g-20,f);d.css({"margin-top":(c-f)/2,"margin-left":(b-e)/2,height:f,width:e});a.css("visibility","visible");Va=!1}function A(a){var b=v.find("#ivLargeImage");b.css("visibility","hidden");b.empty();t.animateStageIn(b);b.append(a);u()}function G(){ka&&ka.pause();v.find("#ivLarge360").css("display","none");v.find("#ivLargeVideo").css("display","none");v.find("#ivLargeImage").css("display",
"none");Q()}function E(a){G();v.find("#ivLargeImage").css("display","block");var b;"hero-image"===a?f.isDefined(ba)&&(b=S(ba[X.index])):f.isDefined(ta)&&(b=S(ta[X.index]));if(f.isDefined(b)){v.find(".fullscreen").remove();var c=d("<img>").attr("src",b).addClass("fullscreen"),e=v.find("#ivLargeImage");t.animateStageOut(e,function(){c.load(function(){A(c)});if(c[0].complete)A(c);else{e.empty();var a=(e.height()-104)/2,b=(e.width()-80)/2;d("<img>").attr("src",R.staticImages.spinner).css({position:"relative",
top:a+"px",left:b+"px"}).appendTo(e)}})}}function P(){var a=parseInt(X.index,10)+1;a>=H.length||v.find("#ivVideo_"+a).click()}function K(){var a;f.isDefined(H)&&(a=H[X.index]);if(f.isDefined(a)){G();var b=v.find("#ivLargeVideo").css("display","block");ka?(ka.isDetached()&&ka.attach(b[0]),f.loadMediaIntoAiry(ka,a,ua),ka.show()):(ka=f.createAiryInstanceForChromeful(b,a,ua,"ImmersiveView"),ua.enableContinuousPlay&&ka.bind("ended",P));ka.play({isAsync:!0})}}function D(){C();var a;"hero-image"===X.type?
a=v.find("#ivHeroImage_"+X.index):"image"===X.type?(a=v.find("#ivImage_"+X.index),M("all")):"chromeful-video"===X.type||"chromeless-video"===X.type?(a=v.find("#ivVideo_"+X.index),M("videos")):a="360-spin"===X.type?v.find("#iv360"):f.isDefined(ba)?v.find("#ivHeroImage_"+X.index):v.find("#ivImage_"+X.index);f.isjQueryObjDefined(a)||(a=v.find("#ivImage_0"));x(a)}function x(a){v.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")?(X.type="chromeful-video",X.index=
a.attr("id").split("_")[1],K()):a.hasClass("ivHeroImage")?(X.type="hero-image",X.index=a.attr("id").split("_")[1],E(X.type)):a.hasClass("iv360Image")?(X.type="360-spin",X.index=0,N()):(X.type="image",X.index=a.attr("id").split("_")[1],E(X.type))}function N(){G();v.find("#ivLarge360").css("display","block");y();var a=v.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});t.animateStageIn(a)},200);B();g.postCountMetric("dppc_click360");ya=Date.now()}function Q(){0<ya&&(O("dppc_duration360",
Date.now()-ya),ya=0)}function O(a,b){l.ue&&l.ue.count(a,b)}function B(){if(0<Aa){var a=v.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function J(a,b){if(Aa<a.length){var c=d("<img />").css({display:"block",width:6*Ea+"px",height:Da+"px"});c.hide();b.append(c);c.get(0).onload=function(){b.closest(document.documentElement).length&&(Aa++,1===Aa&&(B(),0<ya&&O("dppc_loadTime360",Date.now()-ya)),0<qa&&O("dppc_perSpriteloadTime360",Date.now()-qa),v.find("#iv360Spinner").hide(),
c.show(),Ia=5*ga.imageLocations[Math.floor(Ma/ga.imageLocations[0].length)][Ma%ga.imageLocations[0].length],J(a,b))};c.attr("src",a[Aa].replace(/(\._SP)\d+(,)\d+/,"$1"+xa+"$2"+Ja));qa=Date.now()}}function T(a){if(f.isDefined(ga.spriteWidthSizes)&&0<ga.spriteWidthSizes.length){var b=ga.spriteWidthSizes,c=b.length,d=b[0],e=b[c-1];if(a<=d)return d;if(a>e)return e;for(d=0;d<c;d++)if(a>b[d]&&a<=b[d+1])return b[d+1]}else return a}function y(){var a=v.find("#ivLarge360");a.children("#image-360-sprites").length||
(a.append("<div id='image-360-sprites'></div>"),a.css({"margin-left":0,"margin-top":0,width:a.parent().width(),height:a.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),d("<img>").attr("src",R.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),Fa=!0,U())}function U(){if(f.isDefined(ga.spriteURLs)&&
f.isDefined(v)&&Fa&&!Ga){var a=v.find("#ivLarge360"),b=d("<div>").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});f.isDefined(ga.staticImages.hint360)&&d("<img>").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",ga.staticImages.hint360).appendTo(b);d("<div>").css({"text-align":"center"}).text(R.staticStrings.dragToSpin).appendTo(b);b.appendTo(a);var b=ga.imageWidth,c=ga.imageHeight,e=a.parent().width(),h=a.parent().height(),
g=0,n=0;b/c>e/h?(xa=T(e),Ja=Math.round(c/b*xa),Ea=Math.ceil(e),Da=Math.ceil(Ja/xa*e),n=(h-Da)/2):(Ja=T(h),xa=Math.round(b/c*Ja),Da=Math.ceil(h),Ea=Math.ceil(xa/Ja*h),g=(e-Ea)/2);a.css({"margin-left":g,"margin-top":n,width:Ea+"px",height:Da+"px",overflow:"hidden",position:"relative"});a.children("#image-360-sprites").css("width",6*Ea+"px");J(ga.spriteURLs,v.find("#image-360-sprites"),0);b=v.find("#ivLarge360");b.bind("mousedown",ea);b.bind("touchstart",L);b.bind("touchmove",W);b.bind("touchend",V);
d(document).bind("mousemove",Z);d(document).bind("mouseup",aa);f.isDefined(R.staticImages.grab)&&a.css("cursor","url('"+R.staticImages.grab+"'), auto");Ga=!0}}function L(a){Qa=!0;Ca=a.originalEvent.targetTouches[0].clientX}function W(a){Qa&&(ja(a.originalEvent.targetTouches[0].clientX-Ca),Ca=a.originalEvent.targetTouches[0].clientX)}function V(a){Qa&&(Qa=!1)}function ea(a){Oa=!0;Ua=a.originalEvent.clientX;f.isDefined(R.staticImages.grabbing)&&(a=v.find("#ivLarge360"),a.css("cursor","url('"+R.staticImages.grabbing+
"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+R.staticImages.grabbing+"'), auto"));return!1}function Z(a){Oa&&(ja(a.originalEvent.clientX-Ua),Ua=a.originalEvent.clientX)}function aa(a){Oa&&(Oa=!1,f.isDefined(R.staticImages.grab)&&(a=v.find("#ivLarge360"),a.css("cursor","url('"+R.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function ja(a){for(a=Ia-=a/Ea*180;0>a;)a+=360;for(;360<a;)a-=360;Ia=a;var b;a=360;for(var c=0;c<Aa;c++)for(var d=
0;d<ga.imageLocations[c].length;d++){var e=Math.abs(Ia-5*ga.imageLocations[c][d]);e<a&&(a=e,b=c*ga.imageLocations[0].length+d)}b!==Ma&&(a=Math.floor(b/ga.imageLocations[0].length),a!==Math.floor(Ma/ga.imageLocations[0].length)&&(f.isDefined(Xa)||(Xa=document.createElement("canvas").getContext("2d")),c=v.find("#image-360-sprites").children(),Xa.drawImage(c[a],0,0)),a=v.find(".iv360Hint").not(".iv360HintFaded"),f.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));Ma=b;a=b%ga.imageLocations[0].length*
-1*Ea;b=-1*Math.floor(b/ga.imageLocations[0].length)*Da;c=v.find("#ivLarge360").children("#image-360-sprites");c.css("-webkit-transform","translate3d("+a+"px, "+b+"px, 0)");c.css("transform","translate3d("+a+"px, "+b+"px, 0)")}function na(){v.delegate(".ivThumb","click",function(){var a=d(this);x(a)});v.delegate(".ivThumbVideoListOuter","click",function(){v.find(".ivThumbVideoListOuter").removeClass("selected");var a=d(this);a.addClass("selected");X.type="chromeful-video";X.index=a.attr("id").split("_")[1];
K()})}function sa(){ka&&!ka.isDetached()&&(ua.volume=ka.getVolume(),ka.detach(),!document.all||l.atob||document.addEventListener||(ka=null));v.find("#ivLargeImage").empty();Q()}function fa(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function ra(a){var b=Ha.top-(a.pageY-Pa[1])*Ka;a=fa(Ha.left-(a.pageX-Pa[0])*Ka,La.left);b=fa(b,La.top);v.find(".fullscreen").css({left:a,top:b})}function ia(){v.delegate("#ivLargeImage","click",function(a){if(Va)u();else if(Wa){v.find(".fullscreen").removeAttr("style");
if(Wa){var b=v.find("#ivLargeImage"),c=b.find(".fullscreen");Ya?b.css("cursor","url('"+R.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));Va=!0;var d=v.find("#ivLargeImage");La.left=d.width()-c.width();La.top=d.height()-c.height();var d=b.height()/2,e=b.width()/2;Pa=[b.offset().left+e,b.offset().top+d];Ha.top=d-c.height()/2;Ha.left=e-c.width()/2;c.css({position:"relative",left:Ha.left,top:Ha.top});Ka=Math.max(c.height()/
b.height(),c.width()/b.width())}ra(a)}});v.delegate("#ivLargeImage","mousemove",function(a){Va&&ra(a)})}function oa(c){if(f.isImmersiveViewEnabled(R,la.getCurrentItem().color)){$a=f.isDefined(c)&&"button-360-click"===c.action;m.isEnabled&&F.logImmersiveViewRequestServed(m);g.postCountMetric("dppc_immersiveViewOpened");if(f.isDefined(ca))ca.show();else{c=d("#auiImmersiveViewDiv");var e=d(l).height()-150,h=d(l).width()-75;ca=a.create(c,{name:"immersiveView",activate:"onclick",width:h,height:e,popoverLabel:"ImmersiveView",
hideHeader:!0});c.click()}if(Za){v=d("#ivMain");c=la.getCurrentItem().color;ta=R.colorImages[c];ba=R.heroImage[c];H=R.useChildVideos?R.colorToVideo[c]:R.videos;Ta=Y()&&R.spin360ColorEnabled[c];ga=Y()?R.spin360ColorData[c]:p;C();wa=da=Ba=ma=0;f.isDefined(ba)&&(da=ba.length);f.isDefined(ta)&&(ma=ta.length);f.isDefined(H)&&(Ba=H.length);Ta&&(wa=1);t.populateTitle(v.find("#ivTitle"),45,R);t.populateVariationSelection(v.find("#ivVariationSelection"));c=v.find("#ivMediaSelect");0===ma+wa||0===Ba?(c.parent().hide(),
v.find("#ivThumbs").addClass("noMediaSelection")):(c.empty(),d("<option/>").attr("value","all").prop("selected",!0).text(R.staticStrings.allMedia+" ("+(da+ma+wa+Ba)+")").appendTo(c),d("<option/>").attr("value","images").text(R.staticStrings.images+" ("+(da+ma+wa)+")").appendTo(c),d("<option/>").attr("value","videos").text(R.staticStrings.videos+" ("+Ba+")").appendTo(c),c.parent().show(),c.val("all"));c=v.find("#ivThumbs");c.find(".ivRow").not(".placeholder").remove();for(var e=da+ma+Ba+wa,n=h=0;h<
e;)for(var u=c.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(c),w=0;3>w&&h<e;w++,h++,n++)if(n<da){var x=ba[h].thumb,B=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+h).appendTo(u);B.find(".ivThumbImage").css("background",'url("'+t.getResizedThumbnailURL(x)+'") center no-repeat')}else if(n>=da&&n<ma+da)x=ta[h-da].thumb,B=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+
(h-da)).appendTo(u),B.find(".ivThumbImage").css("background",'url("'+t.getResizedThumbnailURL(x)+'") center no-repeat');else if(n>=da+ma&&n<ma+da+wa)B=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(u),B.find(".ivThumbImage").css("background",'url("'+(f.isDefined(R.staticImages.icon360)?t.getResizedThumbnailURL(R.staticImages.icon360,!0):"")+'") center no-repeat');else if(x=H[h-ma-da-wa],B=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id",
"ivVideo_"+(h-ma-da-wa)).appendTo(u),B.find(".ivThumbImage").css("background",'url("'+x.thumbUrl+'") center no-repeat'),f.isDefined(x)){var A={position:"triggerTop"},y=v.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");y.find(".ivVideoPopoverTitle").text(x.title);y.find(".ivVideoPopoverDuration").text(x.durationTimestamp);A.inlineContent=y[0];b.declarative.create(B,"a-tooltip",A)}c=v.find("#ivVideoList");c.find(".ivThumbVideoListOuter").not(".placeholder").remove();
e=c.find(".placeholder");for(h=0;h<Ba;h++)n=H[h],u=e.clone().removeClass("placeholder").appendTo(c),u.attr("id","ivVideoList_"+h),u.find(".ivThumbImage").css("background",'url("'+n.thumbUrl+'") center no-repeat'),u.find(".ivThumbTitle").text(n.title),u.find(".ivThumbDuration").text(n.durationTimestamp);v.find("#ivLarge360").empty();Aa=0;Ga=Fa=!1;ua=R.airyConfig;Za=!1;Sa()}}}function va(a){var b=R.colorToAsin[a],c={},d=500;if(b&&b.asin){c.params={asin:b.asin};var e="360"+b.asin,k=Date.now();c.success=
function(b){O("dppc_asyncRequestTime360",Date.now()-k);b&&f.isDefined(b.spin360.spin360Model)?(f.ajaxState(e,"success"),R.spin360ColorData[a]=b.spin360.spin360Model,a===la.getCurrentItem().color&&(ga=R.spin360ColorData[a],U())):c.error()};c.error=function(){g.postCountMetric("dppc_asyncFailed360");O("dppc_asyncRequestTime360",Date.now()-k);d*=2;16E3>=d?setTimeout(function(){k=Date.now();h.load("/gp/product/features/apparel-main-image/360.html",c)},d):f.ajaxState(e,"fail")};f.ajaxState(e)&&"fail"!==
f.ajaxState(e)||(h.load("/gp/product/features/apparel-main-image/360.html",c),f.ajaxState(e,"sent"))}}function Y(){return f.isDefined(R.spin360ConfigEnabled)&&R.spin360ConfigEnabled}var ha,R,la,pa,ca,v,ba,ta,H,da,ma,Ba,wa,X,ka,ua,ga,Ta,Ea,Da,Ja,xa,Ua,Ca,$a=!1,Fa=!1,Ga=!1,Ia=0,Ma=0,ya=0,qa=0,Oa=!1,Qa=!1,Aa=0,Xa,Ya=navigator.userAgent.match(/msie|trident/i),Za=!0,Va=!1,Wa=!1,La={},Ha={},Ka,Pa,Sa=b.once(function(){z();na();ia();b.on("a:popover:afterUpdatePosition:immersiveView",w);b.on("a:popover:afterShow:immersiveView",
D);b.on("a:popover:afterHide:immersiveView",sa);I()});return function(a,c,e,h){ha=this;R=a;la=c;m.refToModel=la;pa=h;Y()&&(R.spin360ColorData[R.landingAsinColor]=R.spin360ColorData[R.defaultColor],R.spin360ColorEnabled[R.landingAsinColor]=R.spin360ColorEnabled[R.defaultColor]);f.isDefined(R.staticImages.icon360)&&d("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",t.addStyleCodeToURL(R.staticImages.icon360,"_FMpng_RI_"));ha.render=function(a,c,d,e,h,k){Za=!0;Y()&&R.spin360ColorEnabled[a]&&
!f.isDefined(R.spin360ColorData[a])&&(R.spin360ColorData[a]={},va(a));f.isImmersiveViewEnabled(R,la.getCurrentItem().color)&&Y()&&R.spin360ColorEnabled[a]&&(c===R.maxAlts&&(a=e.find(".item.imageThumbnail"),d=e.find(".item.videoThumbnail"),f.isDefined(d)&&1<d.length?d.last().remove():a.last().remove(),c--),a=e.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),b.declarative.create(a,"button-360-click"),e.append(a),c++,g.postCountMetric("dppc_display360"));
return c};ha.update=function(a){};pa.register("imageClick",oa);pa.register("button360Click",oa)}});m.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",function(b,a,c,d,f,h,g,m,p,t){function S(){var a=z.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),c=a.find(".a-popover-inner"),a=a.height()-t.getDimension(c,
"padding-top")-t.getDimension(c,"padding-bottom");d("#iv-tab-view-container").css("height",a);G=d("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==d(this).css("display")}).length;1<G?(d("#iv-tab-view-container ul.iv-tab-views li").parent().show(),c=d("#iv-tab-view-container ul.iv-tab-views li").parent().height(),a-=c):d("#iv-tab-view-container ul.iv-tab-views li").parent().hide();d("#iv-tab-view-container .iv-tab-content").css("height",a);b.trigger("dp:image-block:immersive-view:resize")}
function I(){b.trigger("dp:image-block:immersive-view:reset")}function M(c){if(f.isImmersiveViewEnabled(w,z.getCurrentItem().color)){m.isEnabled&&p.logImmersiveViewRequestServed(m);g.postCountMetric("dppc_immersiveViewOpened");f.isDefined(c)&&("button-360-click"===c.action?d("#iv360TabHeading").click():"videoIngressClick"===c.action?(E=c.clickTimeStamp,d("#ivVideosTabHeading").click()):d("#ivImagesTabHeading").click());var e=z.getImmersiveViewModalInstance();if(f.isDefined(e))e.show();else{c=d("#auiImmersiveViewDiv");
var e=Math.min(Math.max(d(l).height()-150,540),1080),h=Math.min(Math.max(d(l).width()-75,990),1980),e=a.create(c,{name:"immersiveView",activate:"onclick",width:h,height:e,popoverLabel:"ImmersiveView",hideHeader:!0});z.setImmersiveViewModalInstance(e);c.click()}A&&(A=!1,P(),b.trigger("dp:image-block:immersive-view:init"))}}var C,w,z,u,A=!0,G=0,E,P=b.once(function(){b.on("a:popover:afterUpdatePosition:immersiveView",S);b.on("a:popover:afterShow:immersiveView",S);b.on("a:popover:afterHide:immersiveView",
I)}),K=b.once(function(){var a=d("#iv-tab-view-container ul.iv-tab-views li");a.bind("click",function(c){var e=a.filter(".iv-active");e.attr("id")!==d(this).attr("id")&&b.trigger("dp:ivTabs:"+e.find("a").attr("data-iv-tab-view")+":deselect",c);a.removeClass("iv-active");d(this).addClass("iv-active");d("#iv-tab-view-container .iv-tab-content").hide();e=d(this).find("a").attr("data-iv-tab-view");d("#"+e).show();"ivVideosTab"===e&&(c.clickTimeStamp=E||c.timeStamp);b.trigger("dp:ivTabs:"+e+":select",
c);g.postCountMetric("dppc_"+e);return!1})});return function(a,b,c,d){C=this;w=a;z=b;m.refToModel=z;u=d;C.render=function(a,b,c,d,e,f){g.postCountMetric("dpcc_altThumbs_"+b);A=!0};C.update=function(a){};C.getTitle=function(){};C.getVariationSelectionInfo=function(){};K();u.register("imageClick",M);u.register("button360Click",M);f.productReelDarkIngressEnabled(w)&&u.register("videoIngressClick",M)}});m.when("A","jQuery","imageBlockUtils").register("ImageBlockLoader",function(b,a,c){return{load:function(a,
c){c=c||{};c.timeout=c.timeout||4E3;b.ajax(a,c)}}});m.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric","postEarlyMetric").register("imageBlockUtils",function(b,a,c,d,f,h,g,m){function p(a){return null!==a&&"undefined"!==typeof a}function t(b){var c=0;a.each(b,function(a,b){var d=parseInt(b[1],10);d>c&&(c=d)});return c}function S(b){var c=0;a.each(b,function(a,b){var d=parseInt(b[0],10);d>c&&(c=d)});return c}function I(a,b,c){b=b.width();
if(c.naturalMainImageSize)return b;a=t(a);0<a&&(b=Math.min(b,a));return b}function M(a,b,c){b=b.height();if(c.naturalMainImageSize)return b;a=S(a);0<a&&(b=Math.min(b,a));return b}function C(b){var c;a.each(b,function(a,b){p(c)||(c=b[1]/b[0])});return c||1}function w(a,b,c){b.fadeTo(500,0,function(){u(a,c);b.fadeTo(500,1)})}function z(a){a&&a.toggle()}function u(b,c){var d=c.find("img");p(d[b])&&a(d[b]).click()}function A(a,b){O[a]=b?b:O[a];return O[a]}function G(b,c,d){d=d||Q;d=d.colorImages;if(1>
d.length||!p(d[b])||!p(c))return-1;var e=-1;a.each(d[b],function(a,b){b.variant===c&&(e=a)});return e}function E(b,c,d){d=d||Q;d=d.colorImages;return!(p(d)&&p(d[b])&&p(d[b][c])&&p(d[b][c].main))||1>a.map(d[b][c].main,function(a,b){return b}).length?-1:d[b][c]}function P(a,b,c,d){d.parent().css("z-index",2);0!==c&&0!==b&&(b/=c,a>b?d.css("width",b/a*100+"%"):d.css("height",a/b*100+"%"))}function K(a){return a.tabbedImmersiveViewTreatment&&"C"!==a.tabbedImmersiveViewTreatment}function D(b,c){var d;if(d=
b.useIV)d=b.colorImages&&b.colorImages[c]&&0<b.colorImages[c].length?!0:!1;g.isEnabled&&(g.IVApplicaple=d,m.logImmersiveViewApplicability(a,g));return d}var x,N,Q=a.extend(!0,{},f,h),O={};return{isDefined:p,isUndefinedOrEmpty:function(a){return p(a)?"object"===typeof a&&0===Object.keys(a).length:!0},isDefinedAndNotEmpty:function(a){return p(a)?"object"===typeof a&&0<Object.keys(a).length:!1},isjQueryObjDefined:function(a){return 0!==a.length},getAspectRatio:C,getMaxHeightOfMainImage:M,getMaxWidthOfMainImage:I,
getMaxDimensionsOfMainImage:function(a,b,c){var d=M(a,b,c);b=I(a,b,c);a=C(a);c=b/a;b=Math.min(b,d*a);d=Math.min(d,c);return[d,b]},getContainerHeight:function(a,b,c){var d=a.get(0);a=0;if(p(d)){a=d.offsetWidth/b;a=Math.min(a,c);var e;b=Q.mainImageHeightPartitions;c=Q.mainImageMaxSizes;if(p(c)&&p(b)){for(var f=0,h=l.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,d=0;d<b.length;d++)h>b[d]&&(f=d+1);c.length>=f&&(e=c[f])}p(e)&&(a=Math.min(e[1],a))}return a},getColorFromState:function(b,
c){if(b){c=c||Q;var d="";a.each(c.visualDimensions,function(a,c){b[c]&&(d+=" "+b[c])});return d&&d.substring(1)}},createThumbnail:function(a,c,d,e){var f=d.find(".template").clone().removeClass("template").addClass("item"),h=document.createElement("img");h.src=c;f.find(".placeHolder").replaceWith(h);(c=a.heroVideoVariant)&&"hero-image"===a.type&&a.variant===c&&f.addClass("heroImageThumbnail");p(e)&&f.addClass(e);b.declarative.create(f,"thumb-action",a);d.append(f)},selectGivenThumbnail:function(a,
b){var c=a.find(".a-button");b.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");c.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(b,f,h,g,n,l,m,q){var r=a.extend({},h.foresterMetadataParams);null!==g&&(r.method+="."+g);var p=[];f.disabledViewIds&&(p=f.disabledViewIds);return c.embed({parentElement:b[0],streamingUrls:f.url,contentId:f.mediaObjectId,contentMinAge:Number(f.minimumAge||"")||0,contentTitle:f.title,swfUrl:h.swfUrl,
foresterMetadataParams:r,backgroundColor:"black",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:f.slateUrl,postMediaSlate:f.slateUrl},videoAds:h.videoAds,bindings:{play:function(){"ImmersiveView"===g?x||(x=!0,d.postCountMetric("dppc_chromefulVideoPlayedIV")):N||(N=!0,d.postCountMetric("dppc_chromefulVideoPlayedPV"))}},cuePoints:[{values:f.durationSeconds-1,type:"position",callback:function(a,b,c){n&&(w(0,l,q),z(m))}}],disabledViewIds:p})},loadMediaIntoAiry:function(a,b,c){a&&a.getMediaSourceInfo()!==
b.url&&a.loadMedia({mediaSourceInfo:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl}})},showUnavailable:function(b){b&&(a("#imageBlock .unvailableVariation").html(b),a("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){a("#imageBlock .variationUnavailable").hide()},fadeToThumbnail:w,toggleVideoCaption:z,selectThumbnail:u,spinner:function(b,c){var d=a("#imageBlock .a-spinner").parent();
0===d.length&&(d=a("<div></div>").append(a("<span></span>").addClass("a-spinner").addClass("a-spinner-medium")),b.append(d),d.css({position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)","-webkit-transform":"translate3d(-50%, -50%, 0)","z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px","border-radius":"100%"}));c?d.show():d.hide();return d},rankedImagesReadyEvent:function(a){return"ranked-images-ready-for-"+
a},ajaxState:A,getIndexForVariant:G,getImageHash:E,lazyLoadingRequired:function(a,b,c){b=Math.max(G(a.color,b.getCurrentItem().variant,c),0);b=-1!==E(a.color,b,c);a=c.colorToAsin[a.color]&&c.colorToAsin[a.color].asin;a=!a||"success"!==A(a);return!c.lazyLoadExperienceDisabled&&!b&&a},lazyLoadOnHoverEnabled:function(a){return!a.lazyLoadExperienceOnHoverDisabled},updateAspectRatio:P,repositionVideoBanner:function(a,b,c,d){setTimeout(function(){var c=a.width()/a.height();P(c,16,9,b)},d||0)},productReelExperimentEnabled:K,
productReelDarkIngressEnabled:function(a){return K(a)&&"T2"===a.tabbedImmersiveViewTreatment},getVideosCount:function(a,b){return b.useChildVideos&&b.colorToVideo[a]?b.colorToVideo[a].length:b.videos?b.videos.length:0},getVideoHash:function(a,b,c){if(c.useChildVideos){if(!p(c.colorToVideo))return-1;a=c.colorToVideo[a]}else a=c.videos;return p(a)&&p(a[b])&&p(a[b].url)?a[b]:-1},isImmersiveViewEnabled:D,playVideoInImmersiveView:function(a,b){return D(a,b)&&K(a)}}});m.when("A","jQuery","imageBlockUtils",
"ImageBlockHeroUtils","postMetric").register("ImageBlockHeroImageView",function(b,a,c,d,f){function h(b,f,g,n){if(!c.isjQueryObjDefined(b.find(".a-button-selected"))){var m=z.getCurrentItem();if(!n||"chromeless-video"!==m.type||!w.autoplayVideo){n=0;if("hero-image"===m.type){n=l(m.color,m.variant);if(-1===n)return;n=-1!==n?n:0}var r=f+n;r>=g&&(n=0,r=f);f=d.getHeroImageHash(w,m.color,n);-1!==f&&(u.dispatch("updateModel",{data:{index:n,thumbnailIndex:r,variant:f.variant,type:"hero-image"}}),f=b.find(".item").get(r),
c.selectGivenThumbnail(a(f),b))}}}function g(b,d,f){if("hero-video"===z.getCurrentItem().type)return b;d=w.heroImage&&w.heroImage[d];var k=b;c.isDefined(d)&&(a.each(d,function(a,d){b<w.maxAlts&&(c.createThumbnail({type:"hero-image",index:a,thumbnailIndex:b,variant:d.variant},d.thumb,A,"imageThumbnail"),b++)}),h(A,k,b,f));return b}function l(b,d){var f=w.heroImage;if(1>f.length||!c.isDefined(f[b])||!c.isDefined(d))return-1;var h=-1;a.each(f[b],function(a,b){b.variant===d&&(h=a)});return h}function m(){if(G.length&&
w.repositionHeroImage){var a=d.getHeroDimParams(w,z.getCurrentItem()),b;c.isDefined(a)&&(b=c.isDefined(a.xPos)?a.xPos+"px "+a.yPos+"px ":"center "+a.yPos+"px ",G.css({"background-position":b,"background-size":a.width+"px "+a.height+"px ","max-width":a.width+"px ","min-height":a.height+"px ",filter:"","-ms-filter":""}))}}function p(a,b,f,h){if(G.length&&a&&b){if("function"===typeof f||h){var g=new Image;g.onload=h?function(){G.css("background-image",'url("'+a+'")')}:f;g.src=a}f=b[1];var g=b[0],n;h||
G.css({"background-image":'url("'+a+'")'});w.repositionHeroImage&&(b=d.getHeroDimParams(w,z.getCurrentItem(),b),c.isDefined(b)&&(f=b.width,g=b.height,n=c.isDefined(b.xPos)?b.xPos+"px "+b.yPos+"px ":"center "+b.yPos+"px "));G.css({"background-position":n,"background-size":f+"px "+g+"px ","max-width":f+"px ","min-height":g+"px ",filter:"","-ms-filter":""})}}function S(b,c,e,f){b=d.getHeroImageHash(w,b,c);if(-1===b)return-1;c=a.map(b.main,function(a,b){return b})[0];p(c,b.main[c],e,f)}function I(a,b,
c){if("hero-image"!==a.type)return-1;var e=l(a.color,z.getCurrentItem().variant),e=-1!==e?e:0;if(-1===d.getHeroImageHash(w,a.color,e))return-1;var f=z.getCurrentItem();a.thumbnailIndex=f.thumbnailIndex;a.type=f.type;a.variant=f.variant;a.index=e;M(a,b,c)}function M(a,c,e){var f=d.getHeroImageHash(w,a.color,a.index),h;h=a&&E&&b.equals(a,E)?!0:!1;E||(E=a);if(!h&&a||c)S(a.color,a.index,c,e),E=a;G.removeClass("hide-background");b.trigger("dp:image-block:update",f)}var C,w,z,u,A,G,E={};return function(b,
d,f,h){C=this;w=b;z=d;u=h;w.heroImage[w.landingAsinColor]=w.heroImage[w.defaultColor];C.render=function(b,c,d,e,f,h,k){A=e;G=a("#heroImage");b=g(c,b,h);I(z.getCurrentItem(),k,h);return b};C.update=function(a){var b=a.data;"ingress"!==b.type&&G.addClass("hide-background");"swatchHover"===a.type?a.captured||(b.type=z.getCurrentItem().type,-1!==I(b)&&(a.captured=!0)):"hero-image"===b.type&&(M(b),"click"!==a.type&&w.usePeekHover||c.selectGivenThumbnail(a.$declarativeParent,A))};u.register("resize",m)}});
m.when("A","jQuery","imageBlockUtils","postMetric","ImageBlockAltImageView").register("ImageBlockAltImageIngressView",function(b,a,c,d,f){var h,g,l,m;return function(a,d,f,k){h=this;g=a;l=k;h.render=function(a,d,f,k,l,q,p){m=k;h=this;f=g.maxAlts;k=d;l=g.colorImages[a]?g.colorImages[a].length:0;l+=c.getVideosCount(a,g);a=g.heroImage[a];q=0;a&&(q=a.length);a=l+q;a>f&&(f=a-f,a=m.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),
f+="+",k={type:"ingress",index:0,thumbnailIndex:d,variant:""},a.find("#altIngressText").append(f),b.declarative.create(a,"thumb-action",k),m.append(a),k=d++);return k};h.update=function(a){"ingress"===a.data.type&&"click"===a.type&&l.dispatch("imageClick",a)}}});m.when("A","jQuery","imageBlockUtils").register("ImageBlockState",function(b,a,c){return function(a,b,d){this.getImageHash=function(b){var f=d.getCurrentItem();b=c.getIndexForVariant(f.color,b||"MAIN",a);return c.getImageHash(f.color,
b,a)};this.onImageUpdateForTwister=function(a){b.register("updateSelection",function(b){"swatchClick"===b.type&&"function"===typeof a&&a()})}}});m.when("A","jQuery","imageBlockUtils").register("ImageBlockHeroUtils",function(b,a,c){function d(a,b){var c;if(b.repositionHeroImage){c=a[1];var e=a[0];if(768>=(l.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))c*=.7,e*=.7;else{var f=((l.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-
1024)/256,f=Math.max(Math.min(f,1),0);c*=.7+.3*f;e*=.7+.3*f}c=[c,e]}return c}function f(a,b,d){var f;if(d.repositionHeroImage){var h=l.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;d=d.heroFocalPoint;if(c.isDefined(d)){f=Math.max((h-Math.min(1500,a))/2,0);var g=Math.max((h-a)/2,0);f-=g;h=Math.max(Math.min(h,1500),1024);f=f+(h-420-23)/2-a/b[1]*d}}return f}function h(b,d,f){b=b.heroImage;return!(c.isDefined(b)&&c.isDefined(b[d])&&c.isDefined(b[d][f])&&c.isDefined(b[d][f].main))||
1>a.map(b[d][f].main,function(a,b){return b}).length?-1:b[d][f]}return{getHeroImageHash:h,getHeroDimParams:function(b,g,l){if(b.repositionHeroImage){if(!c.isDefined(l)){l=h(b,g.color,g.index);if(-1===l)return;g=a.map(l.main,function(a,b){return b})[0];l=l.main[g]}g=d(l,b);b=f(g[0],l,b);return{height:g[1],width:g[0],xPos:b,yPos:75}}}}});m.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","imageBlockUtils").register("imageBlockImmersiveViewUtils",function(b,a,c,d,f,
h,g){function m(a,c){var d=b.copy(a);if(g.isDefined(a)&&a.length>c){try{for(var e=-1,f=0;f<a.length;f++){var h=a.charAt(f);if(" "===h||"."===h||"?"===h||";"===h||","===h||":"===h)e=f;if(f===c-4){d=a.substring(0,-1===e?f:e);break}}}catch(k){d=a.substring(0,c-3)}d+="..."}return d}function p(a,b){var c=a.lastIndexOf(".");return a="_"===a.charAt(c-1)?a.substring(0,c-1)+b+a.substring(c):a.substring(0,c)+"."+b+a.substring(c)}return{getDimension:function(a,b){var c=parseInt(a.css(b),10);return isNaN(c)?
0:c},attachTabSelectHandler:function(a,c){b.on("dp:ivTabs:"+a+":select",c)},attachTabDeselectHandler:function(a,c){b.on("dp:ivTabs:"+a+":deselect",c)},attachImmersiveViewResizeHandler:function(a){b.on("dp:image-block:immersive-view:resize",a)},detachImmersiveViewResizeHandler:function(a){b.off("dp:image-block:immersive-view:resize",a)},attachImmersiveViewResetHandler:function(a){b.on("a:popover:afterHide:immersiveView",a)},hideTabHeading:function(b){a("#"+b).hide()},unhideTabHeading:function(b){a("#"+
b).show()},addStyleCodeToURL:p,getResizedThumbnailURL:function(a,b){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");a=a.replace(/\._CB\d+_SS\d+_/,"");var c="_AA50_";b&&(c+="FMpng_RI_");return p(a,c)},populateVariationSelection:function(b){if(g.isDefined(l.DetailPage)&&g.isDefined(l.DetailPage.StateController)){b.empty();var c=l.DetailPage.StateController.getState(),d=c.variation_label_order,
e;for(e in d)if(d.hasOwnProperty(e)){var f=d[e],h=c.selected_variations[f],f=c.variation_display_labels[f];h&&a("<div/>").addClass("ivVariations").text(f+":"+h).appendTo(b)}}},populateTitle:function(a,b,c){a.attr("title",c.title);a.text(m(c.title,b))},animateStageIn:function(a){a.animate({opacity:1},200)},animateStageOut:function(a,b){a.animate({opacity:.4},100,b)}}});m.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",
function(b,a,c,d,f,h,g,l){function m(){var a=D.getCurrentItem().color;Q=K.colorImages[a];N=K.heroImage[a];O=B=0;f.isDefined(N)&&(O=N.length);f.isDefined(Q)&&(B=Q.length)}function p(a){return a.hiRes||a.large||a.main[a.main.length-1]}function S(){var a=x.find("#ivStage").find("#ivLargeImage"),b=a.width(),c=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var e=d.width(),f=d.height();0<d.length&&(d[0].naturalWidth&&(e=d[0].naturalWidth),d[0].naturalHeight&&(f=d[0].naturalHeight));a.css("cursor",
"auto");var e=0===e?1:e,f=0===f?1:f,h=Math.min(b/e,c/f),g=f*h,k=e*h;1>h?(T?a.css("cursor","url('"+K.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),L=!0):L=!1;e=Math.min(k,e);f=Math.min(g-20,f);d.css({"margin-top":(c-f)/2,"margin-left":(b-e)/2,height:f,width:e});a.css("visibility","visible");U=!1}function I(a){var b=x.find("#ivLargeImage");b.css("visibility","hidden");b.empty();l.animateStageIn(b);b.append(a);S()}function M(a){x.find("#ivLargeImage").css("display",
"none");x.find("#ivLargeImage").css("display","block");var b;"hero-image"===a?f.isDefined(N)&&(b=p(N[J.index])):f.isDefined(Q)&&(b=p(Q[J.index]));if(f.isDefined(b)){x.find(".fullscreen").remove();var c=d("<img>").attr("src",b).addClass("fullscreen"),e=x.find("#ivLargeImage");l.animateStageOut(e,function(){c.load(function(){I(c)});if(c[0].complete)I(c);else{e.empty();var a=(e.height()-104)/2,b=(e.width()-80)/2;d("<img>").attr("src",K.staticImages.spinner).css({position:"relative",top:a+"px",left:b+
"px"}).appendTo(e)}})}}function C(a){x.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivHeroImage")?J.type="hero-image":J.type="image";J.index=a.attr("id").split("_")[1];M(J.type);g.postCountMetric("dpcc_iv_thumbCLick_"+(parseInt(J.index,10)+1)+"_"+(O+B))}function w(){x.delegate(".ivThumb","click",function(){var a=d(this);C(a)})}function z(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function u(a){var b=V.top-(a.pageY-Z[1])*ea;a=z(V.left-(a.pageX-Z[0])*ea,W.left);b=z(b,
W.top);x.find(".fullscreen").css({left:a,top:b})}function A(){x.delegate("#ivLargeImage","click",function(a){if(U)S();else if(L){x.find(".fullscreen").removeAttr("style");if(L){var b=x.find("#ivLargeImage"),c=b.find(".fullscreen");T?b.css("cursor","url('"+K.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));U=!0;var d=x.find("#ivLargeImage");W.left=d.width()-c.width();W.top=d.height()-c.height();var d=b.height()/2,e=b.width()/
2;Z=[b.offset().left+e,b.offset().top+d];V.top=d-c.height()/2;V.left=e-c.width()/2;c.css({position:"relative",left:V.left,top:V.top});ea=Math.max(c.height()/b.height(),c.width()/b.width())}u(a);g.postCountMetric("dpcc_iv_largeImageCLick")}});x.delegate("#ivLargeImage","mousemove",function(a){U&&u(a)})}function G(){x.find("#ivLargeImage").empty()}function E(a){if(y){x=d("#ivMain");m();J=D.getCurrentItem();l.populateTitle(x.find("#ivTitle"),160,K);l.populateVariationSelection(x.find("#ivVariationSelection"));
a=x.find("#ivThumbs");a.find(".ivRow").not(".placeholder").remove();for(var b=O+B,c=0,e=0;c<b;)for(var h=a.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(a),g=0;4>g&&c<b;g++,c++,e++)if(e<O){var n=N[c].thumb,r=a.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+c).appendTo(h);r.find(".ivThumbImage").css("background",'url("'+l.getResizedThumbnailURL(n)+'") center no-repeat')}else e>=O&&e<B+O&&(n=Q[c-O].thumb,r=a.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id",
"ivImage_"+(c-O)).appendTo(h),r.find(".ivThumbImage").css("background",'url("'+l.getResizedThumbnailURL(n)+'") center no-repeat'));aa();y=!1}a=d("#ivImagesTab").height();x.css("height",a);b=x.find("#ivTitle").outerHeight(!0);c=x.find("#ivVariationSelection").outerHeight(!0);e=x.find("#ivThumbs");h=l.getDimension(e,"margin-top")+l.getDimension(e,"margin-bottom");e.css("height",a-b-c-h);x.find("#ivLargeImage").css("height",a);a=x.find("#ivStage");b=x[0]&&x[0].getBoundingClientRect&&Math.floor(x[0].getBoundingClientRect().width)||
x.width();a.css("width",b-l.getDimension(x,"padding-left")-l.getDimension(x,"padding-right")-x.find("#ivThumbColumn").width()-l.getDimension(a,"margin-left")-l.getDimension(a,"margin-right"));J=D.getCurrentItem();a="hero-image"===J.type?x.find("#ivHeroImage_"+J.index):"image"===J.type?x.find("#ivImage_"+J.index):f.isDefined(N)?x.find("#ivHeroImage_"+J.index):x.find("#ivImage_"+J.index);f.isjQueryObjDefined(a)||(a=x.find("#ivImage_0"));C(a)}var P,K,D,x,N,Q,O,B,J,T=navigator.userAgent.match(/msie|trident/i),
y=!0,U=!1,L=!1,W={},V={},ea,Z,y=!0,aa=b.once(function(){w();A();l.attachImmersiveViewResizeHandler(E);l.attachTabDeselectHandler("ivImagesTab",G)});return function(a,b,c,e){P=this;K=a;D=b;P.render=function(a,b,c,e,f,h){y=!0;m();0===O+B?l.hideTabHeading("ivImagesTabHeading"):l.unhideTabHeading("ivImagesTabHeading");1===O+B?d("#ivThumbs").hide():d("#ivThumbs").show()};P.update=function(a){};l.attachTabSelectHandler("ivImagesTab",E)}});m.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils",
"ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils","preLoaderHook","lazyLoaderHook").register("ImageBlockImmersiveViewVideos",function(b,a,c,d,f,h,g,m,p,t){function S(){D.delegate(".ivThumb","click",function(){var a=d(this);D.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")&&(x.type="chromeful-video",x.index=a.attr("id").split("_")[1])})}function I(){var a=d("#ivVideosTab").height();D.css("height",a);var b=D.find(".vse-video-block");Q=a-m.getDimension(D,
"padding-top")-m.getDimension(D,"padding-bottom");b.css({"max-height":a,overflow:"hidden"});if(U)D.css({"max-width":Math.floor(1.77*Q)});else{var a=D.find(".vse-airy-container"),b=D.find(".vse-ib-metadata"),c=Math.floor(Q-m.getDimension(b,"height")),e=Math.floor(1.77*c);a.css({"max-height":c,"max-width":e});b.css("max-width",e);L&&(a=D.find(".vse-vertical-scroll"),b=m.getDimension(a,"margin-top")+m.getDimension(a,"margin-bottom"),a.css("max-height",Q-b))}}function M(){N&&N.pause();N&&N.pause();W=
!1;T=!0;J=null}function C(){N&&N.pause()}function w(a){J=a.clickTimeStamp;y&&(t.get(b,"#ivVideoBlock",K,aa,ja),D=d("#ivVideoBlock"),P.getCurrentItem(),x=P.getCurrentItem(),V());I();W=!0;y=!1;A()}function z(a){y&&(D=d("#ivVideoBlock"),P.getCurrentItem(),x=P.getCurrentItem(),V());W&&A();I()}function u(a){N=a.airy;W&&N.play({isAsync:!0})}function A(){if(N&&(N.play({isAsync:!0,eventTimestamp:J||(new Date).getTime()}),g.postCountMetric("dpcc_vse_videoBlock_video_played"),T)){var a=l.ue;a&&(a=a.count("dpcc_vse_videoingressclick"),
a=(new Date).getTime()-a,g.postTimeMetric("dpcc_vse_vitff",a),T=!1)}}var G,E,P,K,D,x,N,Q,O,B,J,T=!0,y=!0,U=!1,L=!1,W=!1,V=b.once(function(){S();m.attachImmersiveViewResizeHandler(z);m.attachTabDeselectHandler("ivVideosTab",C);m.attachImmersiveViewResetHandler(M)}),ea=function(a,b,c){d("#ivVideoBlockSpinner").addClass("aok-hidden");g.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+b.placement);a=P.getCurrentItem().color;a=f.getVideoHash(a,0,E);N||(N=f.createAiryInstanceForChromeful(d("#ivVideoBlock"),
a,E.airyConfig,"ImmersiveView"));U=!0;d("#ivVideoBlock").css({"max-width":1.77*Q,margin:"0 auto"});W&&U&&N.play({isAsync:!0})},Z=function(a,b,c){y||t.get(a,"#ivVideoBlock",K,aa,ja);d("#ivVideoBlockSpinner").addClass("aok-hidden")},aa=function(a,b,c){L=!0;I();W&&A()},ja=function(a,b,c){g.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+b.pageContext.placement+"_"+b.configuration.type)};return function(a,c,d,e){G=this;E=a;P=c;G.render=function(a,c,d,e,h,g){a=P.getCurrentItem().color;c=f.getVideoHash(a,
0,E);O=E.colorToAsin[a]&&E.colorToAsin[a].asin;O=f.isDefined(O)?O:E.mediaAsin;B=null!==E.vseVideoDataSourceTreatment&&"T1"===E.vseVideoDataSourceTreatment?"ASIN":"physicalID";y=!0;-1===c?m.hideTabHeading("ivVideosTabHeading"):(m.unhideTabHeading("ivVideosTabHeading"),K={page:"DetailPage",placement:"ImageBlock",device:"Desktop",marketplaceID:c.marketPlaceID,locale:c.languageCode,product:{contentID:O,contentIDType:"ASIN"},video:{contentID:c.mediaObjectId,contentIDType:B,videoURL:c.url,imageURL:c.slateUrl},
metadata:{ProductTitle:E.title}},p.get(b,"#ivVideoBlock",K,Z,ea))};G.update=function(a){};m.attachTabSelectHandler("ivVideosTab",w);b.on("vseAiry",u)}});m.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView360",function(b,a,c,d,f,h,g,m){function F(a){L.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("iv360Image")&&t()}function t(){L.find("#ivLarge360").css("display",
"none");S();L.find("#ivLarge360").css("display","block");z();var a=L.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});m.animateStageIn(a)},200);M();g.postCountMetric("dppc_click360");Y=Date.now()}function S(){0<Y&&(I("dppc_duration360",Date.now()-Y),Y=0)}function I(a,b){l.ue&&l.ue.count(a,b)}function M(){if(0<pa){var a=L.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function C(a,b){if(pa<a.length){var c=d("<img />").css({display:"block",
width:6*Z+"px",height:aa+"px"});c.hide();b.append(c);c.get(0).onload=function(){b.closest(document.documentElement).length&&(pa++,1===pa&&(M(),0<Y&&I("dppc_loadTime360",Date.now()-Y)),0<ha&&I("dppc_perSpriteloadTime360",Date.now()-ha),L.find("#iv360Spinner").hide(),c.show(),oa=5*V.imageLocations[Math.floor(va/V.imageLocations[0].length)][va%V.imageLocations[0].length],C(a,b))};c.attr("src",a[pa].replace(/(\._SP)\d+(,)\d+/,"$1"+na+"$2"+ja));ha=Date.now()}}function w(a){if(f.isDefined(V.spriteWidthSizes)&&
0<V.spriteWidthSizes.length){var b=V.spriteWidthSizes,c=b.length,d=b[0],e=b[c-1];if(a<=d)return d;if(a>e)return e;for(d=0;d<c;d++)if(a>b[d]&&a<=b[d+1])return b[d+1]}else return a}function z(){var a=L.find("#ivLarge360");a.children("#image-360-sprites").length||(a.append("<div id='image-360-sprites'></div>"),a.css({"margin-left":0,"margin-top":0,width:a.parent().width(),height:a.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),
d("<img>").attr("src",y.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),ra=!0,u())}function u(){if(f.isDefined(V.spriteURLs)&&f.isDefined(L)&&ra&&!ia){var a=L.find("#ivLarge360"),b=d("<div>").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});f.isDefined(V.staticImages.hint360)&&d("<img>").css({"margin-left":"auto","margin-right":"auto",
display:"block"}).attr("src",V.staticImages.hint360).appendTo(b);d("<div>").css({"text-align":"center"}).text(y.staticStrings.dragToSpin).appendTo(b);b.appendTo(a);var b=V.imageWidth,c=V.imageHeight,e=a.parent().width(),h=a.parent().height(),g=0,n=0;b/c>e/h?(na=w(e),ja=Math.round(c/b*na),Z=Math.ceil(e),aa=Math.ceil(ja/na*e),n=(h-aa)/2):(ja=w(h),na=Math.round(b/c*ja),aa=Math.ceil(h),Z=Math.ceil(na/ja*h),g=(e-Z)/2);a.css({"margin-left":g,"margin-top":n,width:Z+"px",height:aa+"px",overflow:"hidden",
position:"relative"});a.children("#image-360-sprites").css("width",6*Z+"px");C(V.spriteURLs,L.find("#image-360-sprites"),0);b=L.find("#ivLarge360");b.bind("mousedown",P);b.bind("touchstart",A);b.bind("touchmove",G);b.bind("touchend",E);d(document).bind("mousemove",K);d(document).bind("mouseup",D);f.isDefined(y.staticImages.grab)&&a.css("cursor","url('"+y.staticImages.grab+"'), auto");ia=!0}}function A(a){la=!0;fa=a.originalEvent.targetTouches[0].clientX}function G(a){la&&(x(a.originalEvent.targetTouches[0].clientX-
fa),fa=a.originalEvent.targetTouches[0].clientX)}function E(a){la&&(la=!1)}function P(a){R=!0;sa=a.originalEvent.clientX;f.isDefined(y.staticImages.grabbing)&&(a=L.find("#ivLarge360"),a.css("cursor","url('"+y.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+y.staticImages.grabbing+"'), auto"));return!1}function K(a){R&&(x(a.originalEvent.clientX-sa),sa=a.originalEvent.clientX)}function D(a){R&&(R=!1,f.isDefined(y.staticImages.grab)&&(a=L.find("#ivLarge360"),
a.css("cursor","url('"+y.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function x(a){for(a=oa-=a/Z*180;0>a;)a+=360;for(;360<a;)a-=360;oa=a;var b;a=360;for(var c=0;c<pa;c++)for(var d=0;d<V.imageLocations[c].length;d++){var e=Math.abs(oa-5*V.imageLocations[c][d]);e<a&&(a=e,b=c*V.imageLocations[0].length+d)}b!==va&&(a=Math.floor(b/V.imageLocations[0].length),a!==Math.floor(va/V.imageLocations[0].length)&&(f.isDefined(ca)||(ca=document.createElement("canvas").getContext("2d")),
c=L.find("#image-360-sprites").children(),ca.drawImage(c[a],0,0)),a=L.find(".iv360Hint").not(".iv360HintFaded"),f.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));va=b;a=b%V.imageLocations[0].length*-1*Z;b=-1*Math.floor(b/V.imageLocations[0].length)*aa;c=L.find("#ivLarge360").children("#image-360-sprites");c.css("-webkit-transform","translate3d("+a+"px, "+b+"px, 0)");c.css("transform","translate3d("+a+"px, "+b+"px, 0)")}function N(){L.delegate(".ivThumb","click",function(){var a=
d(this);F(a)})}function Q(){S()}function O(a){if(v){L=d("#ivMain360");a=U.getCurrentItem().color;ea=J()&&y.spin360ColorEnabled[a];V=J()?y.spin360ColorData[a]:p;U.getCurrentItem();ea&&(W=1);m.populateTitle(L.find("#ivTitle360"),160,y);m.populateVariationSelection(L.find("#ivVariationSelection360"));a=L.find("#ivThumbs360");a.find(".ivRow").not(".placeholder").remove();for(var b=W,c=0,e=0;c<b;)for(var h=a.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(a),g=0;3>g&&c<b;g++,c++,
e++)e<W&&a.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(h).find(".ivThumbImage").css("background",'url("'+(f.isDefined(y.staticImages.icon360)?m.getResizedThumbnailURL(y.staticImages.icon360,!0):"")+'") center no-repeat');L.find("#ivLarge360").empty();pa=0;v=ia=ra=!1;ba();v=!1}a=d("#iv360Tab").height();L.css("height",a);b=L.find("#ivTitle360").outerHeight(!0);c=L.find("#ivVariationSelection360").outerHeight(!0);e=L.find("#ivThumbs360");
h=m.getDimension(e,"margin-top")+m.getDimension(e,"margin-bottom");e.css("height",a-b-c-h);a=L.find("#ivStage360");b=L[0]&&L[0].getBoundingClientRect&&Math.floor(L[0].getBoundingClientRect().width)||L.width();a.css("width",b-m.getDimension(L,"padding-left")-m.getDimension(L,"padding-right")-L.find("#ivThumbColumn360").width()-m.getDimension(a,"margin-left")-m.getDimension(a,"margin-right"));U.getCurrentItem();a=L.find("#iv360");f.isDefined(a)&&0!==L.height()&&(f.isjQueryObjDefined(a)||(a=L.find("#ivImage_0")),
F(a))}function B(a){var b=y.colorToAsin[a],c={},d=500;if(b&&b.asin){c.params={asin:b.asin};var e="360"+b.asin,k=Date.now();c.success=function(b){I("dppc_asyncRequestTime360",Date.now()-k);b&&f.isDefined(b.spin360.spin360Model)?(f.ajaxState(e,"success"),y.spin360ColorData[a]=b.spin360.spin360Model,a===U.getCurrentItem().color&&(V=y.spin360ColorData[a],u())):c.error()};c.error=function(){g.postCountMetric("dppc_asyncFailed360");I("dppc_asyncRequestTime360",Date.now()-k);d*=2;16E3>=d?setTimeout(function(){k=
Date.now();h.load("/gp/product/features/apparel-main-image/360.html",c)},d):f.ajaxState(e,"fail")};f.ajaxState(e)&&"fail"!==f.ajaxState(e)||(h.load("/gp/product/features/apparel-main-image/360.html",c),f.ajaxState(e,"sent"))}}function J(){return f.isDefined(y.spin360ConfigEnabled)&&y.spin360ConfigEnabled}var T,y,U,L,W,V,ea,Z,aa,ja,na,sa,fa,ra=!1,ia=!1,oa=0,va=0,Y=0,ha=0,R=!1,la=!1,pa=0,ca,v=!0,ba=b.once(function(){N();m.attachImmersiveViewResizeHandler(O);m.attachTabDeselectHandler("iv360Tab",Q)});
return function(a,c,e,h){T=this;y=a;U=c;J()&&(y.spin360ColorData[y.landingAsinColor]=y.spin360ColorData[y.defaultColor],y.spin360ColorEnabled[y.landingAsinColor]=y.spin360ColorEnabled[y.defaultColor]);f.isDefined(y.staticImages.icon360)&&d("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",m.addStyleCodeToURL(y.staticImages.icon360,"_FMpng_RI_"));T.render=function(a,c,e,h,n,l){v=!0;J()&&y.spin360ColorEnabled[a]?(f.isDefined(y.spin360ColorData[a])||(y.spin360ColorData[a]=
{},B(a)),d("#ivThumbs360").hide(),m.unhideTabHeading("iv360TabHeading")):m.hideTabHeading("iv360TabHeading");f.isImmersiveViewEnabled(y,U.getCurrentItem().color)&&J()&&y.spin360ColorEnabled[a]&&(c===y.maxAlts&&(a=h.find(".item.imageThumbnail"),e=h.find(".item.videoThumbnail"),f.isDefined(e)&&1<e.length?e.last().remove():a.last().remove(),c--),a=h.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),b.declarative.create(a,"button-360-click"),
h.append(a),c++,g.postCountMetric("dppc_display360"));return c};T.update=function(a){};m.attachTabSelectHandler("iv360Tab",O)}});var g=l.location.host,c={dub:"https://www.amazon.co.uk/vap/ew/",pdx:"https://www.amazon.co.jp/vap/ew/"},d=g.split(".")[1],h=-1===g.indexOf(".proxy.amazon.com")?"/vap/ew/":c[d]!==p?c[d]:"https://www.amazon.com/vap/ew/";m.when("postMetric").register("preLoaderHook",function(b){function a(c,d){var f=c.A,g=c.block,l=c.request,m=c.handleFailure,p=c.handleSuccess,
t=d,S=f.$;d--;var I=t-d-1,M=(new Date).getTime();f.ajax(h+"componentbuilder",{params:l,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:l.timeout||4E3,withCredentials:!0,success:function(a){var c=(new Date).getTime()-M;b.postTimeMetric("vse_preLoaderHook:success:",c);b.postCountMetric("vse_preLoaderHook:success:"+l.page+":"+l.placement+":"+I);S(g).html(a);p(f,l,a)},error:function(h){(0===h.http.status||500<=h.http.status&&599>=h.http.status)&&0<d?(b.postCountMetric("vse_preLoaderHook:error:"+
l.page+":"+l.placement+":"+I),a(c,d)):m(f,l,h)}})}return{get:function(b,c,d,h,g){a({A:b,block:c,request:d,handleFailure:g,handleSuccess:h},3)}}});m.when("postMetric").register("lazyLoaderHook",function(b){function a(c,d,f){var g=c.A,l=c.context,m=c.handleFailure,p=c.handleSuccess;d.attr("data-configuration");var t=atob(d.attr("data-configuration")),S=JSON.parse(t),t=f,I={pageContext:l,configuration:S},M=(new Date).getTime();f--;var C=t-f-1;g.ajax(h+"subcomponent/"+S.type,{params:I,paramsFormat:"json",
method:"post",contentType:"application/json",timeout:l.timeout||4E3,withCredentials:!0,success:function(a){var c=(new Date).getTime()-M;b.postTimeMetric("vse_lazyLoaderHook:success:",c);b.postCountMetric("vse_lazyLoaderHook:success:"+l.page+":"+l.placement+":"+S.type+":"+C);d.html(a);p(g,I,a)},error:function(h){(0===h.http.status||500<=h.http.status&&599>=h.http.status)&&0<f?(b.postCountMetric("vse_lazyLoaderHook:error:"+l.page+":"+l.placement+":"+S.type+":"+C),a(c,d,f)):m(g,I,h)}})}return{get:function(b,
c,d,h,g){var l=b.$;l(c+" div[data-configuration]").each(function(){a({A:b,context:d,handleFailure:g,handleSuccess:h},l(this),3)})}}})});