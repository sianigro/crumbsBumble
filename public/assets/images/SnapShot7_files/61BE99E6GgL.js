(function(w){var n=window.AmazonUIPageJS||window.P,W=n._namespace||n.attributeErrors,G=W?W("VSERelatedVideosClientAssets",""):n;G.guardFatal?G.guardFatal(w)(G,window):G.execute(function(){w(G,window)})})(function(w,n,W){(function(){function G(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})}function W(a,b,c){void 0===c&&(c="airyContainer");return'\x3cbody style\x3d"width:100%; height:100%; margin:0px;"\x3e\n    \x3cdiv id\x3d"'+
c+'" style\x3d"width:100%; height:100%"\x3e\x3c/div\x3e\n    \x3cscript crossorigin\x3d"anonymous"  src\x3d"'+a+'" onload\x3d"parent[\''+b+"'].resolve(Airy)\" onerror\x3d\"parent['"+b+"'].reject(event)\"\x3e\x3c/script\x3e\n    \x3c/body\x3e"}function Kb(a,b,c,d){void 0===d&&(d="airyContainer");return'\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+b+'" /\x3e\n    \x3cbody style\x3d"width:100%; height:100%; margin:0px;"\x3e\n    \x3cdiv id\x3d"'+d+'" style\x3d"width:100%; height:100%"\x3e\x3c/div\x3e\n    \x3cscript crossorigin\x3d"anonymous"  src\x3d"'+
a+'" onload\x3d"parent[\''+c+"'].resolve(Airy);\" onerror\x3d\"parent['"+c+"'].reject(event)\"\x3e\x3c/script\x3e\n    \x3c/body\x3e"}function Ha(){var a=document.createElement("iframe");a.className="vse-airy-container-frame";a.setAttribute("frameborder","0");a.setAttribute("scrolling","0");a.setAttribute("allowfullscreen","true");a.setAttribute("mozallowfullscreen","true");a.setAttribute("webkitallowfullscreen","true");return a}function Lb(a,b){b={contentId:""+a.initialVideo.contentId,customerId:a.customerId,
foresterMetadataParams:{client:a.requestMetadata.clientId,marketplaceId:a.requestMetadata.marketplaceId,method:a.requestMetadata.method,requestId:a.requestMetadata.requestId,session:a.requestMetadata.sessionId},mediaSourceInfo:[""+a.initialVideo.videoUrl],posterSource:a.initialVideo.imageUrl,pageAsin:a.requestMetadata.pageAsin,parentId:b,vendorCode:a.initialVideo.vendorCode,videoAds:a.videoAds,shouldStartMuted:a.shouldStartMuted,shouldAutoplay:a.shouldAutoplay,shouldDisableControls:a.shouldDisableControls,
twitchCore:a.twitchCore,useCarousel:a.useCarousel,useBuyBox:a.useBuyBox,languagePreference:a.languagePreference};a.eventTimestamp&&(b.eventTimestamp=a.eventTimestamp);return b}function Ia(a,b){for(var c=-1,d=null==a?0:a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function Ja(a,b){return a===b||a!==a&&b!==b}function da(a,b){for(var c=a.length;c--;)if(Ja(a[c][0],b))return c;return-1}function A(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function H(a){if(null==
a)return void 0===a?"[object Undefined]":"[object Null]";if(Ka&&Ka in Object(a)){var b=Mb.call(a,X),c=a[X];try{a[X]=void 0;var d=!0}catch(f){}var e=Nb.call(a);d&&(b?a[X]=c:delete a[X]);a=e}else a=Ob.call(a);return a}function I(a){var b=typeof a;return null!=a&&("object"==b||"function"==b)}function La(a){if(!I(a))return!1;a=H(a);return"[object Function]"==a||"[object GeneratorFunction]"==a||"[object AsyncFunction]"==a||"[object Proxy]"==a}function J(a){if(null!=a){try{return Pb.call(a)}catch(b){}return a+
""}return""}function S(a,b){a=null==a?void 0:a[b];b=!I(a)||Ma&&Ma in a?!1:(La(a)?Qb:Rb).test(J(a));return b?a:void 0}function K(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function ea(a,b){a=a.__data__;var c=typeof b;return("string"==c||"number"==c||"symbol"==c||"boolean"==c?"__proto__"!==b:null===b)?a["string"==typeof b?"string":"hash"]:a.map}function D(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function E(a){this.size=
(this.__data__=new A(a)).size}function fa(a){var b=-1,c=null==a?0:a.length;for(this.__data__=new D;++b<c;)this.add(a[b])}function Sb(a,b){for(var c=-1,d=null==a?0:a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function Na(a,b,c,d,e,f){var g=c&1,k=a.length,h=b.length;if(k!=h&&!(g&&h>k))return!1;if((h=f.get(a))&&f.get(b))return h==b;var h=-1,r=!0,l=c&2?new fa:void 0;f.set(a,b);for(f.set(b,a);++h<k;){var m=a[h],q=b[h];if(d)var n=g?d(q,m,h,b,a,f):d(m,q,h,a,b,f);if(void 0!==n){if(n)continue;r=!1;break}if(l){if(!Sb(b,
function(b,a){if(!l.has(a)&&(m===b||e(m,b,c,d,f)))return l.push(a)})){r=!1;break}}else if(m!==q&&!e(m,q,c,d,f)){r=!1;break}}f["delete"](a);f["delete"](b);return r}function Tb(a){var b=-1,c=Array(a.size);a.forEach(function(a,e){c[++b]=[e,a]});return c}function Ub(a){var b=-1,c=Array(a.size);a.forEach(function(a){c[++b]=a});return c}function Vb(a,b,c,d,e,f,g){switch(c){case "[object DataView]":if(a.byteLength!=b.byteLength||a.byteOffset!=b.byteOffset)break;a=a.buffer;b=b.buffer;case "[object ArrayBuffer]":if(a.byteLength!=
b.byteLength||!f(new Oa(a),new Oa(b)))break;return!0;case "[object Boolean]":case "[object Date]":case "[object Number]":return Ja(+a,+b);case "[object Error]":return a.name==b.name&&a.message==b.message;case "[object RegExp]":case "[object String]":return a==b+"";case "[object Map]":var k=Tb;case "[object Set]":k||(k=Ub);if(a.size!=b.size&&!(d&1))break;if(c=g.get(a))return c==b;d|=2;g.set(a,b);b=Na(k(a),k(b),d,e,f,g);g["delete"](a);return b;case "[object Symbol]":if(oa)return oa.call(a)==oa.call(b)}return!1}
function Pa(a,b,c){b=b(a);if(!B(a)){a=c(a);c=-1;for(var d=a.length,e=b.length;++c<d;)b[e+c]=a[c]}return b}function Wb(a,b){for(var c=-1,d=null==a?0:a.length,e=0,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[e++]=g)}return f}function Xb(){return[]}function C(a){return null!=a&&"object"==typeof a}function Qa(a){return C(a)&&"[object Arguments]"==H(a)}function Yb(){return!1}function pa(a,b){b=null==b?9007199254740991:b;return!!b&&("number"==typeof a||Zb.test(a))&&-1<a&&0==a%1&&a<b}function qa(a){return"number"==
typeof a&&-1<a&&0==a%1&&9007199254740991>=a}function $b(a){return C(a)&&qa(a.length)&&!!p[H(a)]}function ac(a){return function(b){return a(b)}}function ra(a){return null!=a&&qa(a.length)&&!La(a)}function ga(a){if(ra(a)){var b=B(a),c=!b&&Ra(a),d=!b&&!c&&sa(a),e=!b&&!c&&!d&&Sa(a);if(b=b||c||d||e){for(var c=a.length,f=String,g=-1,k=Array(c);++g<c;)k[g]=f(g);c=k}else c=[];var f=c.length,h;for(h in a)!bc.call(a,h)||b&&("length"==h||d&&("offset"==h||"parent"==h)||e&&("buffer"==h||"byteLength"==h||"byteOffset"==
h)||pa(h,f))||c.push(h);a=c}else if(h=a&&a.constructor,a===("function"==typeof h&&h.prototype||cc)){h=[];for(d in Object(a))dc.call(a,d)&&"constructor"!=d&&h.push(d);a=h}else a=ec(a);return a}function Q(a,b,c,d,e){if(a===b)return!0;if(null==a||null==b||!C(a)&&!C(b))return a!==a&&b!==b;a:{var f=B(a),g=B(b),k=f?"[object Array]":Ta(a),h=g?"[object Array]":Ta(b),k="[object Arguments]"==k?"[object Object]":k,h="[object Arguments]"==h?"[object Object]":h,r="[object Object]"==k,g="[object Object]"==h;if((h=
k==h)&&sa(a)){if(!sa(b)){b=!1;break a}f=!0;r=!1}if(h&&!r)e||(e=new E),b=f||Sa(a)?Na(a,b,c,d,Q,e):Vb(a,b,k,c,d,Q,e);else{if(!(c&1)&&(f=r&&Ua.call(a,"__wrapped__"),k=g&&Ua.call(b,"__wrapped__"),f||k)){a=f?a.value():a;b=k?b.value():b;e||(e=new E);b=Q(a,b,c,d,e);break a}if(h)b:if(e||(e=new E),f=c&1,k=Pa(a,ga,Va),g=k.length,h=Pa(b,ga,Va).length,g==h||f){for(r=g;r--;){var l=k[r];if(!(f?l in b:fc.call(b,l))){b=!1;break b}}if((h=e.get(a))&&e.get(b))b=h==b;else{h=!0;e.set(a,b);e.set(b,a);for(var m=f;++r<g;){var l=
k[r],q=a[l],n=b[l];if(d)var P=f?d(n,q,l,b,a,e):d(q,n,l,a,b,e);if(void 0===P?q!==n&&!Q(q,n,c,d,e):!P){h=!1;break}m||(m="constructor"==l)}h&&!m&&(c=a.constructor,d=b.constructor,c!=d&&"constructor"in a&&"constructor"in b&&!("function"==typeof c&&c instanceof c&&"function"==typeof d&&d instanceof d)&&(h=!1));e["delete"](a);e["delete"](b);b=h}}else b=!1;else b=!1}}return b}function gc(a,b,c,d){var e=c.length,f=e,g=!d;if(null==a)return!f;for(a=Object(a);e--;){var k=c[e];if(g&&k[2]?k[1]!==a[k[0]]:!(k[0]in
a))return!1}for(;++e<f;){var k=c[e],h=k[0],r=a[h],l=k[1];if(g&&k[2]){if(void 0===r&&!(h in a))return!1}else{k=new E;if(d)var m=d(r,l,h,a,b,k);if(void 0===m?!Q(l,r,3,d,k):!m)return!1}}return!0}function hc(a){for(var b=ga(a),c=b.length;c--;){var d=b[c],e=a[d];b[c]=[d,e,e===e&&!I(e)]}return b}function Wa(a,b){return function(c){return null==c?!1:c[a]===b&&(void 0!==b||a in Object(c))}}function ic(a){var b=hc(a);return 1==b.length&&b[0][2]?Wa(b[0][0],b[0][1]):function(c){return c===a||gc(c,a,b)}}function ha(a){return"symbol"==
typeof a||C(a)&&"[object Symbol]"==H(a)}function ta(a,b){if(B(a))return!1;var c=typeof a;return"number"==c||"symbol"==c||"boolean"==c||null==a||ha(a)?!0:jc.test(a)||!kc.test(a)||null!=b&&a in Object(b)}function ua(a,b){if("function"!=typeof a||null!=b&&"function"!=typeof b)throw new TypeError("Expected a function");var c=function(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;if(f.has(e))return f.get(e);d=a.apply(this,d);c.cache=f.set(e,d)||f;return d};c.cache=new (ua.Cache||D);return c}function Xa(a){if("string"==
typeof a)return a;if(B(a))return Ia(a,Xa)+"";if(ha(a))return Ya?Ya.call(a):"";var b=a+"";return"0"==b&&1/a==-lc?"-0":b}function Za(a,b){return B(a)?a:ta(a,b)?[a]:mc(null==a?"":Xa(a))}function ia(a){if("string"==typeof a||ha(a))return a;var b=a+"";return"0"==b&&1/a==-nc?"-0":b}function $a(a,b){b=Za(b,a);for(var c=0,d=b.length;null!=a&&c<d;)a=a[ia(b[c++])];return c&&c==d?a:void 0}function oc(a,b){return ta(a)&&b===b&&!I(b)?Wa(ia(a),b):function(c){var d;d=null==c?void 0:$a(c,a);d=void 0===d?void 0:d;
var e;if(void 0===d&&d===b){if(d=null!=c){d=a;d=Za(d,c);for(var f=-1,g=d.length,k=!1;++f<g;){e=ia(d[f]);if(!(k=null!=c&&null!=c&&e in Object(c)))break;c=c[e]}k||++f!=g?d=k:(g=null==c?0:c.length,d=!!g&&qa(g)&&pa(e,g)&&(B(c)||Ra(c)))}e=d}else e=Q(b,d,3);return e}}function ja(a){return a}function pc(a){return function(b){return null==b?void 0:b[a]}}function qc(a){return function(b){return $a(b,a)}}function ab(a){return"function"==typeof a?a:null==a?ja:"object"==typeof a?B(a)?oc(a[0],a[1]):ic(a):ta(a)?
pc(ia(a)):qc(a)}function rc(a,b){var c=-1,d=ra(a)?Array(a.length):[];bb(a,function(a,f,g){d[++c]=b(a,f,g)});return d}function sc(a,b){return(B(a)?Ia:rc)(a,ab(b,3))}function va(a,b,c){switch(c.length){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}function tc(a,b,c){b=cb(void 0===b?a.length-1:b,0);return function(){for(var d=arguments,e=-1,f=cb(d.length-b,0),g=Array(f);++e<f;)g[e]=d[b+e];e=-1;for(f=Array(b+
1);++e<b;)f[e]=d[e];f[b]=c(g);return va(a,this,f)}}function uc(a){return function(){return a}}function db(a){var b=0,c=0;return function(){var d=vc(),e=16-(d-c);c=d;if(0<e){if(800<=++b)return arguments[0]}else b=0;return a.apply(void 0,arguments)}}function Y(a){return function(){var b=arguments;switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],
b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var c=wa(a.prototype),b=a.apply(c,b);return I(b)?b:c}}function wc(a,b,c){function d(){return(this&&this!==z&&this instanceof d?f:a).apply(e?c:this,arguments)}var e=b&1,f=Y(a);return d}function eb(a,b,c,d){var e=-1,f=a.length,g=c.length,k=-1,h=b.length,r=xc(f-g,0),l=Array(h+r);for(d=!d;++k<h;)l[k]=b[k];for(;++e<g;)if(d||e<f)l[c[e]]=a[e];for(;r--;)l[k++]=a[e++];return l}function fb(a,
b,c,d){var e=-1,f=a.length,g=-1,k=c.length,h=-1,r=b.length,l=yc(f-k,0),m=Array(l+r);for(d=!d;++e<l;)m[e]=a[e];for(l=e;++h<r;)m[l+h]=b[h];for(;++g<k;)if(d||e<f)m[l+c[g]]=a[e++];return m}function xa(){}function R(a){this.__wrapped__=a;this.__actions__=[];this.__dir__=1;this.__filtered__=!1;this.__iteratees__=[];this.__takeCount__=4294967295;this.__views__=[]}function zc(){}function V(a,b){this.__wrapped__=a;this.__actions__=[];this.__chain__=!!b;this.__index__=0;this.__values__=void 0}function gb(a,
b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}function ka(a){if(C(a)&&!B(a)&&!(a instanceof R)){if(a instanceof V)return a;if(Ac.call(a,"__wrapped__")){if(a instanceof R)a=a.clone();else{var b=new V(a.__wrapped__,a.__chain__);b.__actions__=gb(a.__actions__);b.__index__=a.__index__;b.__values__=a.__values__;a=b}return a}}return new V(a)}function Bc(a,b){for(var c=-1,d=null==a?0:a.length;++c<d&&!1!==b(a[c],c,a););return a}function Cc(a,b){Bc(Dc,function(c){var d="_."+c[0];if(c=
b&c[1]){if(c=null==a?0:a.length){if(d===d)a:{c=-1;for(var e=a.length;++c<e;)if(a[c]===d)break a;c=-1}else a:{c=a.length;for(e=-1;++e<c;){var f=a[e];if(f!==f){c=e;break a}}c=-1}c=-1<c}c=!c}c&&a.push(d)});return a.sort()}function hb(a,b,c){b+="";var d;d=(d=b.match(Ec))?d[1].split(Fc):[];c=Cc(d,c);if(d=c.length){var e=d-1;c[e]=(1<d?"\x26 ":"")+c[e];c=c.join(2<d?", ":" ");b=b.replace(Gc,"{\n/* [wrapped with "+c+"] */\n")}return ib(a,b)}function jb(a,b,c,d,e,f,g,k,h,r){var l=b&8;b=(b|(l?32:64))&~(l?64:
32);b&4||(b&=-4);e=[a,b,e,l?f:void 0,l?g:void 0,l?void 0:f,l?void 0:g,k,h,r];c=c.apply(void 0,e);b:for(f=a.name+"",g=kb[f],k=Hc.call(kb,f)?g.length:0;k--;)if(h=g[k],r=h.func,null==r||r==a){f=h.name;break b}g=ka[f];"function"==typeof g&&f in R.prototype?a===g?f=!0:(f=lb(g),f=!!f&&a===f[0]):f=!1;f&&mb(c,e);c.placeholder=d;return hb(c,a,b)}function Z(a,b){for(var c=-1,d=a.length,e=0,f=[];++c<d;){var g=a[c];if(g===b||"__lodash_placeholder__"===g)a[c]="__lodash_placeholder__",f[e++]=c}return f}function ya(a,
b,c,d,e,f,g,k,h,r){function l(){for(var x=arguments.length,y=Array(x),F=x;F--;)y[F]=arguments[F];if(P){var L=l.placeholder,T,F=y.length;for(T=0;F--;)y[F]===L&&++T}d&&(y=eb(y,d,e,P));f&&(y=fb(y,f,g,P));x-=T;if(P&&x<r)return L=Z(y,L),jb(a,b,ya,l.placeholder,c,y,L,k,h,r-x);L=q?c:this;F=n?L[a]:a;x=y.length;if(k){T=y.length;for(var v=Ic(k.length,T),t=gb(y);v--;){var w=k[v];y[v]=pa(w,T)?t[w]:void 0}}else u&&1<x&&y.reverse();m&&h<x&&(y.length=h);this&&this!==z&&this instanceof l&&(F=p||Y(F));return F.apply(L,
y)}var m=b&128,q=b&1,n=b&2,P=b&24,u=b&512,p=n?void 0:Y(a);return l}function Jc(a,b,c){function d(){for(var f=arguments.length,g=Array(f),k=f,h=d.placeholder;k--;)g[k]=arguments[k];k=3>f&&g[0]!==h&&g[f-1]!==h?[]:Z(g,h);f-=k.length;return f<c?jb(a,b,ya,d.placeholder,void 0,g,k,void 0,void 0,c-f):va(this&&this!==z&&this instanceof d?e:a,this,g)}var e=Y(a);return d}function Kc(a,b,c,d){function e(){for(var b=-1,h=arguments.length,r=-1,l=d.length,m=Array(l+h),q=this&&this!==z&&this instanceof e?g:a;++r<
l;)m[r]=d[r];for(;h--;)m[r++]=arguments[++b];return va(q,f?c:this,m)}var f=b&1,g=Y(a);return e}function Lc(a){if("number"==typeof a)return a;if(ha(a))return nb;I(a)&&(a="function"==typeof a.valueOf?a.valueOf():a,a=I(a)?a+"":a);if("string"!=typeof a)return 0===a?a:+a;a=a.replace(Mc,"");var b=Nc.test(a);return b||Oc.test(a)?Pc(a.slice(2),b?2:8):Qc.test(a)?nb:+a}function ob(a){a?(a=Lc(a),a=a===pb||a===-pb?1.7976931348623157E308*(0>a?-1:1):a===a?a:0):a=0===a?a:0;var b=a%1;return a===a?b?a-b:a:0}function Rc(a,
b,c,d){for(var e=-1,f=null==a?0:a.length;++e<f;){var g=a[e];b(d,g,c(g),a)}return d}function Sc(a,b,c,d){bb(a,function(a,f,g){b(d,a,c(a),g)});return d}var qb={queueComplete:!0},za=function(){function a(b,a,d){var e=this;this.player=b;this.frame=a;this.assets=[];this.currentIndex=0;this.eventEmitter=new d.EventEmitter;this.player.on("playbackComplete",function(){e.currentIndex++;e.doPlay()})}a.prototype.play=function(b){b?this.player.play(b):this.player.play();return this};a.prototype.getCurrentTime=
function(){return this.player.getCurrentTime()};a.prototype.setCurrentTime=function(b){this.player.setCurrentTime(b)};a.prototype.mute=function(){this.player.mute()};a.prototype.unmute=function(){this.player.unmute()};a.prototype.isMuted=function(){return this.player.isMuted()};a.prototype.resume=function(b){this.player.resume(b);return this};a.prototype.pause=function(){this.player.pause();return this};a.prototype.next=function(){this.player.stop();this.doPlay();return this};a.prototype.previous=
function(){this.player.stop();this.currentIndex--;this.doPlay();return this};a.prototype.seek=function(b){this.player.seek(b);return this};a.prototype.enqueue=function(b,a){void 0===a&&(a=this.assets.length);b instanceof Array?(b=b.slice(),b.splice(0,0,this.assets),Array.prototype.splice.apply(this.assets,b)):this.assets.splice(a,0,b);return this};a.prototype.dequeue=function(b){var a=this,d;if("number"===typeof b)d=[b];else if(b instanceof Array){var e=b.map(function(b){return b.contentId});d=this.assets.map(function(b){return e.indexOf(b.contentId)}).filter(function(b){-1!=
b})}else d=[this.assets.map(function(b,a){return a}).filter(function(d){a.assets[d].contentId==b.contentId})[0]];for(var f=0,g=d.length;f<g;f++)this.assets.splice(d[f],1);return this};a.prototype.on=function(b,a){if(qb.hasOwnProperty(b))this.eventEmitter.on(b,a);else this.player.on(b,a);return this};a.prototype.off=function(b,a){qb.hasOwnProperty(b)?this.eventEmitter.off(b,a):this.player.off(b,a);return this};a.prototype.onTime=function(b,a,d){this.player.onTime(b,a,d);return this};a.prototype.offTime=
function(b,a,d){this.player.offTime(b,a,d);return this};a.prototype.onAd=function(b,a){this.player.onAd(b,a);return this};a.prototype.offAd=function(b,a){this.player.offAd(b,a);return this};a.prototype.show=function(){return this};a.prototype.hide=function(){return this};a.prototype.getAssets=function(){return this.assets};a.prototype.getCurrentAssetIndex=function(){return this.currentIndex-1};a.prototype.getPosition=function(){return this.player.getPosition()};a.prototype.isPlaying=function(){return this.player.isPlaying()};
a.prototype.isPaused=function(){return this.player.isPaused()};a.prototype.getVersion=function(){return this.player.getVersion()};a.prototype.getFlashVersion=function(){return this.player.getFlashVersion()};a.prototype.getRendererType=function(){return this.player.getRendererType()};a.prototype.destroy=function(){var b=this;this.player.destroy();this.frame.style.display="none";setTimeout(function(){b.frame.parentNode.removeChild(b.frame)},500)};a.prototype.doPlay=function(){var b=this.player.getCurrent();
b?this.assets[this.currentIndex].contentId==b.contentId?this.player.play():this.player.play(this.assets[this.currentIndex]):this.assets[this.currentIndex]&&this.player.play(this.assets[this.currentIndex])};return a}(),Aa=function(){function a(b,a){var d=this;this.libs=a;this.commands=[];b.then(function(b){d.playerInstance=b;d.executeCommands()})}a.prototype.executeCommands=function(){for(var b=0;b<this.commands.length;b++)this.commands[b](this.playerInstance)};a.prototype.play=function(b){this.playerInstance?
this._play(b,this.playerInstance):this.commands.push(this.libs._partial(this._play,b));return this};a.prototype.mute=function(){this.playerInstance?this._mute(this.playerInstance):this.commands.push(this.libs._partial(this._mute))};a.prototype.unmute=function(){this.playerInstance?this._unmute(this.playerInstance):this.commands.push(this.libs._partial(this._unmute))};a.prototype.isMuted=function(){if(this.playerInstance)return this._isMuted(this.playerInstance);this.commands.push(this.libs._partial(this._isMuted));
return!0};a.prototype.getCurrentTime=function(){if(this.playerInstance)return this._getCurrentTime(this.playerInstance);this.commands.push(this.libs._partial(this._getCurrentTime));return 0};a.prototype.setCurrentTime=function(b){this.playerInstance?this._setCurrentTime(b,this.playerInstance):this.commands.push(this.libs._partial(this._setCurrentTime,b))};a.prototype.pause=function(){this.playerInstance?this._pause(this.playerInstance):this.commands.push(this._pause);return this};a.prototype.resume=
function(b){this.playerInstance?this._resume(this.playerInstance,b):this.commands.push(this.libs._partial(this.pause,b));return this};a.prototype.stop=function(){this.playerInstance?this._stop(this.playerInstance):this.commands.push(this._stop);return this};a.prototype.seek=function(b){this.playerInstance?this._seek(b,this.playerInstance):this.commands.push(this.libs._partial(this._seek,b));return this};a.prototype.on=function(b,a){this.playerInstance?this._on(b,a,this.playerInstance):this.commands.push(this.libs._partial(this._on,
b,a));return this};a.prototype.off=function(b,a){this.playerInstance?this._off(b,a,this.playerInstance):this.commands.push(this.libs._partial(this._off,b,a));return this};a.prototype.onTime=function(b,a,d){this.playerInstance?this._onTime(b,a,d,this.playerInstance):this.commands.push(this.libs._partial(this._onTime,b,a,d));return this};a.prototype.offTime=function(b,a,d){this.playerInstance?this._offTime(b,a,d,this.playerInstance):this.commands.push(this.libs._partial(this._offTime,b,a,d));return this};
a.prototype.onAd=function(b,a){this.playerInstance?this._onAd(b,a,this.playerInstance):this.commands.push(this.libs._partial(this._onAd,b,a));return this};a.prototype.offAd=function(b,a){this.playerInstance?this._offAd(b,a,this.playerInstance):this.commands.push(this.libs._partial(this._offAd,b,a));return this};a.prototype.getCurrent=function(){if(this.playerInstance)return this.playerInstance.getCurrent()};a.prototype.getPosition=function(){return this.playerInstance?this.playerInstance.getPosition():
0};a.prototype.isPlaying=function(){return this.playerInstance?this.playerInstance.isPlaying():!1};a.prototype.isPaused=function(){return this.playerInstance?this.playerInstance.isPaused():!1};a.prototype.getVersion=function(){return this.playerInstance?this.playerInstance.getVersion():""};a.prototype.getFlashVersion=function(){return this.playerInstance?this.playerInstance.getFlashVersion():""};a.prototype.getRendererType=function(){return this.playerInstance?this.playerInstance.getRendererType():
""};a.prototype.destroy=function(){this.playerInstance&&this.playerInstance.destroy();this.playerInstance=null};a.prototype._play=function(b,a){b?a.play(b):a.play()};a.prototype._mute=function(b){b.mute()};a.prototype._unmute=function(b){b.unmute()};a.prototype._isMuted=function(b){return b.isMuted()};a.prototype._getCurrentTime=function(b){return b.getCurrentTime()};a.prototype._setCurrentTime=function(b,a){a.setCurrentTime(b)};a.prototype._pause=function(b){b.pause()};a.prototype._stop=function(b){b.stop()};
a.prototype._resume=function(b,a){b.resume(a)};a.prototype._seek=function(b,a){a.seek(b)};a.prototype._on=function(b,a,d){d.on(b,a)};a.prototype._off=function(b,a,d){d.off(b,a)};a.prototype._onTime=function(b,a,d,e){e.onTime(b,a,d)};a.prototype._offTime=function(b,a,d,e){e.offTime(b,a,d)};a.prototype._onAd=function(b,a,d){d.onAd(b,a)};a.prototype._offAd=function(b,a,d){d.offAd(b,a)};a.prototype._destroy=function(b){b.destroy()};return a}(),Tc=function(){function a(b,a,d,e){var f=this;this.libs=e;
this.isFullScreen=!1;this.eventEmitter=new e.EventEmitter;this.currentAsset=d;this.initHandlers();a.bindings={ended:function(){return f.eventHandlers.onPlaybackComplete()},playing:function(){return f.eventHandlers.onPlaybackStart()},screenchange:function(){return f.eventHandlers.onScreenChange()},fullscreen:function(){return f.eventHandlers.onFullScreen()}};this.airy=b.embed(a);this.eventEmitter.emit("playerLoaded")}a.prototype.play=function(b){!b||this.currentAsset&&b.contentId==this.currentAsset.contentId||
(b.eventTimestamp||(b.eventTimestamp=Date.now()),this.airy.loadMedia({mediaSourceInfo:[b.videoUrl],contentId:b.contentId,vendorCode:b.vendorCode,eventTimestamp:b.eventTimestamp,slateImages:{preloadSlate:b.imageUrl?b.imageUrl:""}}),this.currentAsset=b);b?this.airy.play({eventTimestamp:b.eventTimestamp,isAsync:!0,contentId:b.contentId}):this.airy.play({isAsync:!0,contentId:this.currentAsset.contentId});return this};a.prototype.pause=function(){this.airy.pause();return this};a.prototype.resume=function(b){b?
this.airy.play({eventTimestamp:b,isAsync:!0}):this.airy.play({isAsync:!0});return this};a.prototype.stop=function(){this.airy.pause();this.currentAsset=void 0;return this};a.prototype.seek=function(b){this.airy.seek(b);return this};a.prototype.on=function(b,a){this.eventEmitter.on(b,a);return this};a.prototype.off=function(b,a){return this};a.prototype.onTime=function(b,a,d){return this};a.prototype.offTime=function(b,a,d){return this};a.prototype.onAd=function(b,a){return this};a.prototype.offAd=
function(b,a){return this};a.prototype.getCurrent=function(){return this.currentAsset};a.prototype.getPosition=function(){return 0};a.prototype.isPlaying=function(){return this.airy.isPlaying()};a.prototype.isPaused=function(){return!this.airy.isPlaying()};a.prototype.getVersion=function(){return"2"};a.prototype.getFlashVersion=function(){return""};a.prototype.getRendererType=function(){return this.airy.getRendererType()};a.prototype.mute=function(){};a.prototype.unmute=function(){};a.prototype.isMuted=
function(){return!1};a.prototype.getCurrentTime=function(){return 0};a.prototype.setCurrentTime=function(b){};a.prototype.destroy=function(){this.airy.detach();this.airy.unbind("ended",this.eventHandlers.onPlaybackComplete);this.airy.unbind("playing",this.eventHandlers.onPlaybackStart);this.airy.unbind("screenchange",this.eventHandlers.onScreenChange);this.airy.unbind("fullscreen",this.eventHandlers.onFullScreen);this.airy=null};a.prototype.initHandlers=function(){var b=this;this.eventHandlers={onPlaybackComplete:function(){return b.player_onPlaybackComplete()},
onPlaybackStart:function(){return b.player_onPlaybackStart()},onScreenChange:function(){return b.player_onScreenChange()},onFullScreen:function(){return b.player_onFullScreen()}}};a.prototype.player_onPlaybackComplete=function(){var b=this.currentAsset;this.currentAsset=void 0;b&&(b.eventTimestamp=Date.now());this.eventEmitter.emit("playbackComplete",b)};a.prototype.player_onPlaybackStart=function(){this.currentAsset&&(this.currentAsset.eventTimestamp=Date.now());this.eventEmitter.emit("playbackStart",
this.currentAsset)};a.prototype.player_onScreenChange=function(){this.eventEmitter.emit("playerFullScreen",this.isFullScreen);this.isFullScreen=!1};a.prototype.player_onFullScreen=function(){this.isFullScreen=!0};a.prototype.player_onPlaybackPause=function(){this.currentAsset&&(this.currentAsset.eventTimestamp=Date.now());this.eventEmitter.emit("playbackPause",this.currentAsset)};return a}(),rb=function(){function a(){}a.prototype.createAiry2Frame=function(b){var a=Ha();b.container.appendChild(a);
a.onload=function(){a.onload=null;a.contentWindow.document.open();a.contentWindow.document.write(Kb(b.airyScriptUrl,b.airyStyleUrl,b.promiseName,"airyContainer"));a.contentWindow.document.close()};setTimeout(function(){if(a.onload)a.onload()});return a};a.prototype.createAiry3Frame=function(b){var a=Ha();b.container.appendChild(a);a.onload=function(){a.onload=null;a.contentWindow.document.open();a.contentWindow.document.write(W(b.airyScriptUrl,b.promiseName,"airyContainer"));a.contentWindow.document.close()};
setTimeout(function(){if(a.onload)a.onload()});return a};return a}(),Uc=function(){function a(b){this.deps=b;this.loader=new rb}a.prototype.create=function(b){var a=this,d="https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2/prod/"+b.airy2Version+"/js/airy.ads."+(b.airyDebug?"debug.":"")+"js",e="https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2/prod/"+b.airy2Version+"/css/beacon.css",f="https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2/prod/"+b.airy2Version+
"/css/aries._TTW_.css",g=G(),k=new this.deps.Promise(function(b,a){n[g]={resolve:b,reject:a}}),d=this.loader.createAiry2Frame({airyScriptUrl:d,airyStyleUrl:b.usePseudoFullscreen?f:e,container:b.container||document.getElementById(b.containerId),promiseName:g}),k=k.then(function(d){var e="https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2/prod/"+b.airy2Version+"/skins/aries._TTW_.js",f=b.videoAds;f.isEngineEnabled=b.videoAds.isEngineEnabled;e={contentId:""+b.initialVideo.contentId,
customerId:b.customerId,desiredMode:b.desiredMode||"hybrid",disabledViewIds:b.disabledViewIds,foresterMetadataParams:{client:b.requestMetadata.clientId,marketplaceId:b.requestMetadata.marketplaceId,method:b.requestMetadata.method,requestId:b.requestMetadata.requestId,session:b.requestMetadata.sessionId},mediaRequiresUserAction:b.mediaRequiresUserAction,mediaSourceInfo:[""+b.initialVideo.videoUrl],pageAsin:b.requestMetadata.pageAsin,parentId:"airyContainer",persistControlsDuringAdUX:b.persistControlsDuringAdUX,
skinUrl:b.usePseudoFullscreen?e:"",usePseudoFullscreen:b.usePseudoFullscreen,vendorCode:b.initialVideo.vendorCode,videoAds:f};b.initialVideo.imageUrl&&(e.slateImages={preloadSlate:b.initialVideo.imageUrl});b.supportsInlinePlayback&&(e.supportsInlinePlayback=b.supportsInlinePlayback);b.eventTimestamp&&(e.eventTimestamp=b.eventTimestamp);b.requestMetadata.instance&&(e.foresterMetadataParams.instance=b.requestMetadata.instance);return new Tc(d,e,b.initialVideo,a.deps)});return new za(new Aa(k,this.deps),
d,this.deps)};return a}(),Vc=function(){function a(b,a,d,e){var f=this;this.libs=e;this.eventEmitter=new e.EventEmitter;this.currentAsset=d;this.initHandlers();a.bindings={ended:function(){return f.eventHandlers.onPlaybackComplete()},playing:function(){return f.eventHandlers.onPlaybackStart()}};this.airy=b.embed(a);this.eventEmitter.emit("playerLoaded")}a.prototype.play=function(b){!b||this.currentAsset&&b.contentId==this.currentAsset.contentId||(this.airy.loadMedia({contentId:b.contentId,vendorCode:b.vendorCode}),
this.currentAsset=b);b&&b.eventTimestamp?this.airy.play({contentId:b.contentId,eventTimestamp:b.eventTimestamp}):this.airy.play();return this};a.prototype.pause=function(){return this};a.prototype.resume=function(b){return this};a.prototype.stop=function(){this.pause();this.currentAsset=void 0;return this};a.prototype.seek=function(b){return this};a.prototype.on=function(b,a){this.eventEmitter.on(b,a);return this};a.prototype.off=function(b,a){this.eventEmitter.off(b,a);return this};a.prototype.onTime=
function(b,a,d){return this};a.prototype.offTime=function(b,a,d){return this};a.prototype.onAd=function(b,a){return this};a.prototype.offAd=function(b,a){return this};a.prototype.mute=function(){};a.prototype.unmute=function(){};a.prototype.isMuted=function(){return!1};a.prototype.getCurrentTime=function(){return 0};a.prototype.setCurrentTime=function(b){};a.prototype.getCurrent=function(){return this.currentAsset};a.prototype.getPosition=function(){return 0};a.prototype.isPlaying=function(){return!0};
a.prototype.isPaused=function(){return!1};a.prototype.getVersion=function(){return"3"};a.prototype.getFlashVersion=function(){return""};a.prototype.getRendererType=function(){return""};a.prototype.destroy=function(){this.airy.unbind("ended",this.eventHandlers.onPlaybackComplete);this.airy.unbind("playing",this.eventHandlers.onPlaybackStart);this.airy.detach()};a.prototype.initHandlers=function(){var b=this;this.eventHandlers={onPlaybackComplete:function(){return b.player_onPlaybackComplete()},onPlaybackStart:function(){return b.player_onPlaybackStart()}}};
a.prototype.player_onPlaybackComplete=function(){var b=this.currentAsset;this.currentAsset=void 0;b&&(b.eventTimestamp=Date.now());this.eventEmitter.emit("playbackComplete",b)};a.prototype.player_onPlaybackStart=function(){this.currentAsset&&(this.currentAsset.eventTimestamp=Date.now());this.eventEmitter.emit("playbackStart",this.currentAsset)};a.prototype.player_onPlaybackPause=function(){this.currentAsset&&(this.currentAsset.eventTimestamp=Date.now());this.eventEmitter.emit("playbackPause",this.currentAsset)};
return a}(),Wc=function(){function a(b){this.deps=b;this.loader=new rb}a.prototype.create=function(b){var a=this,d=G(),e=new this.deps.Promise(function(b,a){n[d]={resolve:b,reject:a}}),f=this.loader.createAiry3Frame({airyScriptUrl:b.airy3ScriptUrl||"https://d2tz3plrpnfrv0.cloudfront.net/airy/prod/latest/airy.min.js",container:b.container||document.getElementById(b.containerId),promiseName:d}),e=e.then(function(d){var e=b.videoAds;e.isEngineEnabled=b.videoAds.isEngineEnabled;e={disabledViewIds:b.disabledViewIds,
parentId:"airyContainer",foresterMetadataParams:{client:b.requestMetadata.clientId,marketplaceId:b.requestMetadata.marketplaceId,method:b.requestMetadata.method,requestId:b.requestMetadata.requestId,session:b.requestMetadata.sessionId},videoAds:e,bindings:{},contentId:""+b.initialVideo.contentId,pageAsin:b.requestMetadata.pageAsin,avPlayerAssetUrl:"https://avodassets-a.akamaihd.net/playback/web_player/webplayer.js"};b.customerId&&"0"!=b.customerId&&(e.customerId=b.customerId);return new Vc(d,e,b.initialVideo,
a.deps)});return new za(new Aa(e,this.deps),f,this.deps)};return a}(),Xc=function(){function a(b,a,d,e){this.libs=e;this.eventEmitter=new e.EventEmitter;this.currentAsset=d;this.initHandlers();d=document.getElementById(a.parentId);e=document.createElement("video");var f=a.parentId+"-element";e.id=f;e.className="video-js";e.setAttribute("playsinline","true");a.shouldDisableControls||e.setAttribute("controls","true");a.shouldAutoplay&&e.setAttribute("autoplay","true");a.shouldStartMuted&&e.setAttribute("muted",
"true");d.appendChild(e);var g=this;b.embedPromise(f,a,{player:{techOrder:a.twitchCore?["TwitchWhiteLabel","html5"]:["html5"]}}).then(function(d){g.videoJS=d;document.getElementById(f).setAttribute("style","width:100%; height:100%;");g.videoJS.poster(a.posterSource);g.videoJS.src(a.mediaSourceInfo[0]);g.vseMetrics=b.metrics(g.videoJS);a.videoAds&&a.videoAds.isEngineEnabled&&(g.vseAds=b.ads(g.videoJS));g.videoJS.on("ended",function(){g.eventHandlers.onPlaybackComplete()});g.videoJS.on("playing",function(){g.eventHandlers.onPlaybackStart()});
g.eventEmitter.emit("playerLoaded")})}a.prototype.play=function(b){!b||this.currentAsset&&b.contentId==this.currentAsset.contentId||(this.videoJS.poster(b.imageUrl),this.videoJS.posterImage.show(),this.vseMetrics.setContentId(b.contentId),this.vseAds&&(this.vseAds.setContentId(b.contentId),this.vseAds.setVendorCode(b.vendorCode)),this.videoJS.src(b.videoUrl),this.currentAsset=b);b=b&&b.eventTimestamp?b.eventTimestamp:Date.now();this.vseMetrics.setPageLoadStartTimestamp(b);return this.videoJS.play()};
a.prototype.muted=function(b){return this.videoJS.muted(b)};a.prototype.mute=function(){this.videoJS.muted(!0)};a.prototype.unmute=function(){this.videoJS.muted(!1)};a.prototype.isMuted=function(){return this.videoJS.muted()};a.prototype.getCurrentTime=function(){return this.videoJS.currentTime()};a.prototype.setCurrentTime=function(b){this.videoJS.currentTime(b)};a.prototype.pause=function(){this.videoJS.pause();return this};a.prototype.resume=function(b){this.videoJS.play();return this};a.prototype.seek=
function(b){this.videoJS.currentTime(b);return this};a.prototype.stop=function(){this.videoJS.pause();this.currentAsset=void 0;return this};a.prototype.on=function(b,a){this.eventEmitter.on(b,a);return this};a.prototype.off=function(b,a){return this};a.prototype.onTime=function(b,a,d){return this};a.prototype.offTime=function(b,a,d){return this};a.prototype.onAd=function(b,a){return this};a.prototype.offAd=function(b,a){return this};a.prototype.getCurrent=function(){return this.currentAsset};a.prototype.getPosition=
function(){return this.videoJS.currentTime()};a.prototype.isPlaying=function(){return!this.videoJS.paused()};a.prototype.isPaused=function(){return this.videoJS.paused()};a.prototype.getVersion=function(){return"VJS"};a.prototype.getFlashVersion=function(){return""};a.prototype.getRendererType=function(){return""};a.prototype.destroy=function(){this.vseMetrics.publishBeforeDispose();this.videoJS.off("ended",this.eventHandlers.onPlaybackComplete);this.videoJS.dispose();this.videoJS=null};a.prototype.initHandlers=
function(){var b=this;this.eventHandlers={onPlaybackComplete:function(){return b.player_onPlaybackComplete()},onPlaybackStart:function(){return b.player_onPlaybackStart()}}};a.prototype.player_onPlaybackComplete=function(){if(!this.vseAds||!this.vseAds.isAdPlaying()){var b=this.currentAsset;this.currentAsset=void 0;b&&(b.eventTimestamp=Date.now());this.eventEmitter.emit("playbackComplete",b)}};a.prototype.player_onPlaybackStart=function(){this.currentAsset&&(this.currentAsset.eventTimestamp=Date.now());
this.eventEmitter.emit("playbackStart",this.currentAsset)};return a}(),Yc=function(){function a(b){this.deps=b}a.prototype.create=function(b){var a=this,d=G(),e=new this.deps.Promise(function(b,a){n[d]={resolve:b,reject:a}});w.when("brila").execute("construct-player",function(b){n[d].resolve(b)});var f=document.getElementById(b.containerId),g=b.containerId+"-container";f.innerHTML='\x3cdiv id\x3d"'+g+'" style\x3d"width:100%; height:100%"\x3e\x3c/div\x3e';f=(new this.deps.Promise(function(d,f){e.then(function(e){var f=
new Xc(e,Lb(b,g),b.initialVideo,a.deps);f.on("playerLoaded",function(){d(f)})})})).then(function(b){return b});return new za(new Aa(f,this.deps),document.getElementById(g),this.deps)};return a}(),Zc=function(){function a(b){this.deps=b;this.a2factory=new Uc(b);this.a3factory=new Wc(b);this.brilafactory=new Yc(b)}a.prototype.create=function(b){switch(b.airyVersion){default:b=this.a2factory.create(b);break;case "3":b=this.a3factory.create(b);break;case "VideoJS":b=this.brilafactory.create(b)}return b};
return a}();n.vseFeatures=n.vseFeatures||{};var sb=n.gatedP||{register:function(a,b,c,d,e){void 0===e&&(e=n.vseFeatures);w.now(a).execute(a+"-prereg",function(f){f||e[b]||(e[b]=!0,d.resolve(c(d)).then(function(){w.now(a).execute(a+"-reg",function(c){c||(w.log("Gated registration failed to register module!","ERROR",a),e[b]=!1)})}))})},declare:function(a,b,c,d){void 0===d&&(d=n.vseFeatures);w.now(a).execute(a+"-prereg",function(e){e||d[b]||(d[b]=!0,w.declare(a,c))})}},v={count:function(a,b){var c=n.ue;
c&&c.count("vse:csm:"+a,b)},emitSushiMetric:function(a,b,c){var d=this;b=b||"https://unagi-na.amazon.com/1/events/com.amazon.eel.vse.metricstest.nexus";c=c||0;if(!(3<=c)){var e=JSON.stringify(a).replace(/\\\\/g,""),f={params:e,paramsFormat:"json",contentType:"application/json; charset\x3dutf-8",error:function(){d.emitSushiMetric(a,b,++c)}};w.when("A").execute("Emit-VSE-Metrics",function(a){navigator&&navigator.sendBeacon?navigator.sendBeacon(b,e):a.post(b,f)})}}},t=function(){function a(){}a.INSTANCE=
"vse-featured-products";a.PLACEMENT="rvp:videolightbox";a.PREFIX=a.INSTANCE+":"+a.PLACEMENT;a.TIME=a.PREFIX+":totalTime";a.SUCCESS_TIME=a.PREFIX+":success:totalTime";a.ERROR_TIME=a.PREFIX+":error:totalTime";a.REQUEST=a.PREFIX+":request";a.SUCCESS=a.PREFIX+":success";a.ERROR=a.PREFIX+":error";a.TIMEOUT=a.PREFIX+":timeout";a.IMPRESSION=a.PREFIX+":impression";a.CLICK=a.PREFIX+":click";a.SIZE=a.PREFIX+":size";a.TOGGLE_UP=a.PREFIX+":toggleUp";a.TOGGLE_DOWN=a.PREFIX+":toggleDown";a.TIMEOUT_STATUS="timeout";
return a}(),$c=function(a,b){return b={exports:{}},a(b,b.exports),b.exports}(function(a){function b(){}function c(b,a,c){this.fn=b;this.context=a;this.once=c||!1}function d(){this._events=new b;this._eventsCount=0}var e=Object.prototype.hasOwnProperty,f="~";Object.create&&(b.prototype=Object.create(null),(new b).__proto__||(f=!1));d.prototype.eventNames=function(){var b=[],a,c;if(0===this._eventsCount)return b;for(c in a=this._events)e.call(a,c)&&b.push(f?c.slice(1):c);return Object.getOwnPropertySymbols?
b.concat(Object.getOwnPropertySymbols(a)):b};d.prototype.listeners=function(b,a){b=this._events[f?f+b:b];if(a)return!!b;if(!b)return[];if(b.fn)return[b.fn];a=0;for(var c=b.length,d=Array(c);a<c;a++)d[a]=b[a].fn;return d};d.prototype.emit=function(b,a,c,d,e,m){var q=f?f+b:b;if(!this._events[q])return!1;var q=this._events[q],n=arguments.length,p,u;if(q.fn){q.once&&this.removeListener(b,q.fn,void 0,!0);switch(n){case 1:return q.fn.call(q.context),!0;case 2:return q.fn.call(q.context,a),!0;case 3:return q.fn.call(q.context,
a,c),!0;case 4:return q.fn.call(q.context,a,c,d),!0;case 5:return q.fn.call(q.context,a,c,d,e),!0;case 6:return q.fn.call(q.context,a,c,d,e,m),!0}u=1;for(p=Array(n-1);u<n;u++)p[u-1]=arguments[u];q.fn.apply(q.context,p)}else{var v=q.length,x;for(u=0;u<v;u++)switch(q[u].once&&this.removeListener(b,q[u].fn,void 0,!0),n){case 1:q[u].fn.call(q[u].context);break;case 2:q[u].fn.call(q[u].context,a);break;case 3:q[u].fn.call(q[u].context,a,c);break;case 4:q[u].fn.call(q[u].context,a,c,d);break;default:if(!p)for(x=
1,p=Array(n-1);x<n;x++)p[x-1]=arguments[x];q[u].fn.apply(q[u].context,p)}}return!0};d.prototype.on=function(b,a,d){a=new c(a,d||this);b=f?f+b:b;this._events[b]?this._events[b].fn?this._events[b]=[this._events[b],a]:this._events[b].push(a):(this._events[b]=a,this._eventsCount++);return this};d.prototype.once=function(b,a,d){a=new c(a,d||this,!0);b=f?f+b:b;this._events[b]?this._events[b].fn?this._events[b]=[this._events[b],a]:this._events[b].push(a):(this._events[b]=a,this._eventsCount++);return this};
d.prototype.removeListener=function(a,c,d,e){a=f?f+a:a;if(!this._events[a])return this;if(!c)return 0===--this._eventsCount?this._events=new b:delete this._events[a],this;var l=this._events[a];if(l.fn)l.fn!==c||e&&!l.once||d&&l.context!==d||(0===--this._eventsCount?this._events=new b:delete this._events[a]);else{for(var m=0,q=[],n=l.length;m<n;m++)(l[m].fn!==c||e&&!l[m].once||d&&l[m].context!==d)&&q.push(l[m]);q.length?this._events[a]=1===q.length?q[0]:q:0===--this._eventsCount?this._events=new b:
delete this._events[a]}return this};d.prototype.removeAllListeners=function(a){a?(a=f?f+a:a,this._events[a]&&(0===--this._eventsCount?this._events=new b:delete this._events[a])):(this._events=new b,this._eventsCount=0);return this};d.prototype.off=d.prototype.removeListener;d.prototype.addListener=d.prototype.on;d.prototype.setMaxListeners=function(){return this};d.prefixed=f;d.EventEmitter=d;"undefined"!==typeof a&&(a.exports=d)}).EventEmitter,ad=function(){function a(a,c){void 0===c&&(c={refTagRecorderEndPoint:"/gp/mobile/tag/",
retryLimit:3});this.A=a;this.config=c}a.prototype.emitRefTag=function(a,c){void 0===c&&(c=0);if(!(c>=this.config.retryLimit)){var d=this;this.A.post(this.config.refTagRecorderEndPoint+"ref\x3d"+a,{error:function(){d.emitRefTag(a,c++)}})}};return a}(),bd=function(){function a(a,c,d,e,f){var g=this;this.carouselFramework=c;this.A=d;this.contentCarouselConfig=e;this.deps=f;this.vseAssets=[];this.carouselPageSize=0;this.carouselPageNumber=1;var k=d.$;this.activeCard=k([]);var h=this;this.auiCarousel=
a;this.refTagRecorder=new ad(d);k("#"+e.carouselName).find(".a-carousel-heading").after(k("#"+e.carouselName).find(".vse-upload-link").removeClass("aok-hidden"));k("#"+e.carouselName+" .vse-video-item").each(function(){h.vseAssets.push(h.getAssetSpec(k(this)))});this.vseAssetIndex=this.deps._keyBy(this.vseAssets,"contentId");e.showAdPlacement||k("#"+e.carouselName).delegate(".a-carousel-card a","click",function(a){if(!k(this).closest("li").hasClass("active")){var b=h.vseAssetIndex[k(this).closest("li").find(".vse-video-item").data("asin")];
h.markPlaying(b);b.eventTimestamp=Date.now();d.trigger("vse:contentCarousel:"+e.carouselName+":click",b);b=h.findIndex(b);h._emitRefTag(b,h.contentCarouselConfig.refTagPrefix)}a.preventDefault()});k("#"+e.carouselName+" .vse-carousel-item").each(function(a){var b=k(this);if(e.showAdPlacement){b.attr("href",b.data("redirect-url")+"?ref\x3ddp_vse_rva1_pc");var c=b.parent().data("asin");b.parent().delegate(".vse-carousel-item","click",function(a){d.trigger("vse:rva:carousel:"+e.carouselName+":productClick",
{relatedProductAsin:c,name:"vse.related_video_advertising.productClick"})})}else b.attr("href",b.data("redirect-url")+"?ref\x3d"+h.contentCarouselConfig.refTagPrefix+a)});d.off("a:carousel:"+e.carouselName+":change:pageSize");d.off("a:carousel:"+e.carouselName+":change:pageNumber");d.on("a:carousel:"+e.carouselName+":change:pageSize",function(){g.carouselPageSize=g.auiCarousel.getAttr("pageSize");g.activeAsset&&g.rotateTo(g.activeAsset)});d.trigger("a:carousel:"+e.carouselName+":change:pageSize");
d.on("a:carousel:"+e.carouselName+":change:pageNumber",function(){g.carouselPageNumber=g.auiCarousel.getAttr("pageNumber");d.trigger("a:carousel:"+e.carouselName+":scrollCarousel",g.carouselPageNumber,g.carouselPageSize)});d.trigger("a:carousel:"+e.carouselName+":updatePageIndex",this.carouselPageNumber,this.carouselPageSize)}a.prototype.getplaylist=function(){return this.vseAssets.slice()};a.prototype.getActiveAsset=function(){return this.activeAsset};a.prototype.scrollTo=function(){this.A.$("#"+
this.contentCarouselConfig.carouselName).animate({scrollTop:this.activeCard.offset().top-this.A.$("#"+this.contentCarouselConfig.carouselName).offset().top+this.A.$("#"+this.contentCarouselConfig.carouselName).scrollTop()})};a.prototype.rotateTo=function(a){this.markPlaying(a);this.contentCarouselConfig.isVerticalScroll&&this.scrollTo();0!==this.carouselPageSize&&(a=this.findIndex(a),-1!==a&&(a=Math.floor(a/this.carouselPageSize)+1,this.carouselPageNumber!=a&&this.auiCarousel.gotoPage(a)))};a.prototype.changeStartingCardTo=
function(a){var c=this;this.listOffset=this.findIndex(a);if(!this.contentCarouselConfig.isVerticalScroll){this.carouselFramework.initializeAll();this.carouselFramework.onInit(""+this.contentCarouselConfig.carouselName,function(){c.rotateTo(a)});var d=this;this.A.$("#"+this.contentCarouselConfig.carouselName+" .vse-carousel-item").each(function(a){var b=d.A.$(this);a=(a-d.listOffset+d.vseAssets.length)%d.vseAssets.length;b.attr("href",b.data("redirect-url")+"?ref\x3d"+d.contentCarouselConfig.refTagPrefix+
a)})}};a.prototype.markPlaying=function(a){this.activeAsset=a;this.activeCard.removeClass("active");this.activeCard=this.vseAssetIndex[a.contentId].$el.closest("li").addClass("active")};a.prototype.findIndex=function(a){return this.vseAssets.indexOf(this.vseAssetIndex[a.contentId])};a.prototype._emitRefTag=function(a,c){0<this.listOffset&&(a=(a-this.listOffset+this.vseAssets.length)%this.vseAssets.length);this.refTagRecorder.emitRefTag(c+a)};a.prototype.destroy=function(){this.A.$("#"+this.contentCarouselConfig.carouselName+
" .a-carousel-card.active").removeClass("active")};a.prototype.getAssetSpec=function(a){var c=a.data(),d=a.find(".vse-video-image").data("img"),d=d.replace("SR160,90_BG0,0,0_PKvse-overlay-play2","").replace("SR320,180_BG0,0,0_PKvse-overlay-play2","");return{contentId:c.asin,title:c.title,vendorName:c.vendorName,vendorCode:c.vendorCode,referenceUrl:c.referenceUrl,referenceLinkTitle:c.referenceTitle,videoUrl:c.videoUrl,$el:a,duration:c.duration,imageUrl:d,sponsored:c.sponsored}};return a}(),cd=function(){return function(a){this.name=
"InvalidArugmentsException";this.message=a}}(),dd=function(){function a(a,c,d){this.carouselFramework=a;this.A=c;this.deps=d}a.prototype.create=function(a){var c=this.carouselFramework.getCarousel(this.A.$("#"+a.carouselName));if(!c)throw new cd("Carousel framework can not find carousel by the name of "+a.carouselName+".");return new bd(c,this.carouselFramework,this.A,a,this.deps)};return a}(),ed=function(){function a(a,c,d,e,f,g){var k=this;this.wrapper=a;this.useSecondaryView=c;this.$=d;this.A=
e;this.productCarouselId=f;this.showProductCarousel=g;this.title=this.wrapper.find(".vse-content-title");this.titlePrefix=this.wrapper.find(".vse-content-title-prefix");this.referenceLink=this.wrapper.find("#vse-customer-review-link");this.activeVideoTitle=this.wrapper.find(".vse-active-video-heading");this.activeVideoTitlePrefix=this.wrapper.find("#vse-activevideo-crv-prefix");this.activeVideoReferenceLink=this.wrapper.find("#vse-activevideo-crv-link");this.activeVideoVendorName=this.wrapper.find(".vse-active-video-vendorName");
this.activeVideoSponsored=this.wrapper.find(".vse-active-video-sponsored");this.lbVideoCarousel=this.wrapper.find(".vse-related-videos-container");this.playerAndActiveVideoContainer=this.wrapper.find(".vse-fixedLayout");g&&void 0!==f&&(this.productFeaturedCarousel=this.wrapper.find("#"+f));this.activeVideoCustomerProfile=this.wrapper.find("#vse-active-video-customer-profile");this.feedbackTrigger=this.wrapper.find(".vse-feedback-trigger");e.on("resize",function(){c&&k.updateVerticalScrollHeight()})}
a.prototype.updateProductCarouselDOM=function(a){return"undefined"!=typeof this.showProductCarousel&&this.showProductCarousel&&"undefined"!=typeof a&&""!==a?this.productFeaturedCarousel?(this.productFeaturedCarousel.css({opacity:"0"}).html(a).animate({opacity:"1"},650),0<this.productFeaturedCarousel.has("ol").has("li").length):!1:!1};a.prototype.getProductCarouselSize=function(){return"undefined"!=typeof this.showProductCarousel&&this.showProductCarousel?this.productFeaturedCarousel.find("ol").children().length:
0};a.prototype.update=function(a,c){this.updateActiveVideo(a);this.updateTitle(a,c)};a.prototype.updateActiveVideo=function(b){var c=this._isCustomerReviewVideo(b);this.activeVideoTitle.text(b.title);this.activeVideoVendorName.text(b.vendorName);b.sponsored?this.activeVideoSponsored.removeClass("vse-invisible"):this.activeVideoSponsored.addClass("vse-invisible");var d=this.lbVideoCarousel.find("[data-asin\x3d"+b.contentId+"]").find(".vse-video-customer-profile");0<d.length?(this.activeVideoCustomerProfile.html(d.clone().removeClass("vse-hidden").html()),
this.activeVideoVendorName.addClass("vse-hidden"),this.productFeaturedCarousel||this.feedbackTrigger.addClass("vse-profile-height")):(this.activeVideoCustomerProfile.html(""),this.activeVideoVendorName.removeClass("vse-hidden"),this.feedbackTrigger.removeClass("vse-profile-height"));this.useSecondaryView&&(this.adjustLBPosition(),this.updateVerticalScrollHeight());this.activeVideoTitlePrefix.text(a.prefixes[+c]);this.activeVideoReferenceLink.attr("href",b.referenceUrl||"");this.activeVideoReferenceLink.text(b.title);
c?(this.activeVideoReferenceLink.text("Customer Review: "+b.title),this.activeVideoTitle.addClass("vse-invisible"),this.activeVideoReferenceLink.removeClass("vse-invisible")):(this.activeVideoTitle.removeClass("vse-invisible"),this.activeVideoReferenceLink.addClass("vse-invisible"))};a.prototype.updateTitle=function(b,c){this.title=this.$(".vse-content-title");this.useSecondaryView?this.title.text(c):(this.title.text(b.title),this.title.attr("title",b.title));this.useSecondaryView||(this.titlePrefix=
this.$(".vse-content-title-prefix"),this.titlePrefix.text(a.prefixes[+this._isCustomerReviewVideo(b)]));c=this._isCustomerReviewVideo(b);this.referenceLink.attr("href",b.referenceUrl||"");this.referenceLink.text(b.referenceLinkTitle||"");c?this.referenceLink.removeClass("vse-invisible"):this.referenceLink.addClass("vse-invisible")};a.prototype.adjustLBPosition=function(){this.lbHeaderElement=this.$(".vse-lightbox-header").closest(".a-popover-header-secondary");var a=this.lbHeaderElement.height(),
c=this.playerAndActiveVideoContainer.height();this.playerAndActiveVideoContainer.css("top",a);this.lbVideoCarousel.css("top",a+c)};a.prototype._isCustomerReviewVideo=function(a){return"AOD60"==a.vendorCode};a.prototype.updateVerticalScrollHeight=function(){this.lbVideoCarousel.css({"max-height":this.$(n).height()-(this.playerAndActiveVideoContainer.height()+this.$(".vse-lightbox-wrapper .a-popover-header-secondary").height())})};a.prototype.hideShareIcons=function(a){this.$("#"+a+"-popover").slideUp(200)};
a.prototype.showShareIcons=function(a){this.$("#"+a+"-popover").slideDown(200)};a.prefixes=["","Customer Review: "];return a}(),fd=function(){function a(a){var c=this;this.config=a;this._errorCallback=function(a){c.config.A.trigger("vse:feedback:"+c.config.feedbackId+"-submit:failed",a)};this._successCallback=function(a){c.config.A.trigger("vse:feedback:"+c.config.feedbackId+"-submit:succeeded",a)};this.config.bottomSheetFactory&&this._getAndSetBottomSheetInstance();this.feedbackInstance=a.feedback;
a.feedbackId&&(a.A.on("vse:feedback:"+a.feedbackId+":showSection",function(){c._changeHeight(525)}),a.A.on("vse:feedback:"+a.feedbackId+":reset",function(){c._changeHeight(300)}),a.A.declarative(a.feedbackId+"-show-options","click",function(c){c.$target.hasClass("active")?a.A.trigger("vse:feedback:"+a.feedbackId+"-show-options:close"):a.A.trigger("vse:feedback:"+a.feedbackId+"-show-options:show");c.$target.toggleClass("active")}))}a.prototype.show=function(){this._getAndSetBottomSheetInstance()?this.bottomSheetInstance.show():
this._slide("DOWN");return this};a.prototype.hide=function(){var a=this;this._getAndSetBottomSheetInstance()?setTimeout(function(){a.bottomSheetInstance.hide()},350):this._slide("UP");return this};a.prototype.reset=function(){this.feedbackInstance&&this.feedbackInstance.reset();return this};a.prototype.submit=function(a){this.config.feedbackEndpoint?this.config.A.$.ajax({url:this.config.feedbackEndpoint,data:JSON.stringify({events:[{data:{feedback:a}}]}),type:"POST",contentType:"application/json; charset\x3dutf-8",
error:this._errorCallback,success:this._successCallback}):this.config.A.post("/vap/videoFeedback",{params:a,error:this._errorCallback,success:this._successCallback});this.hide();return this};a.prototype._slide=function(a){"UP"===a?this.config.A.$("#"+this.config.feedbackId+"-popover").toggleClass("show-form").slideUp(200):this.config.A.$("#"+this.config.feedbackId+"-popover").toggleClass("show-form").slideDown(200)};a.prototype._changeHeight=function(a){this._getAndSetBottomSheetInstance()&&this.bottomSheetInstance.changeHeight({duration:.2,
height:a})};a.prototype._getAndSetBottomSheetInstance=function(){if(this.config.bottomSheetFactory)return this.bottomSheetInstance?this.bottomSheetInstance:this.bottomSheetInstance=this.config.bottomSheetFactory.get(this.config.feedbackId+"-sheet")};return a}(),gd=function(){function a(a){var c=this;this.config=a;this.playbackCompleteHandler=function(a){return c.onPlaybackComplete(a)};this.playerFullScreenHandler=function(a){return c.onPlayerFullScreen(a)};this.firstFrameHandler=function(a){return c.onFirstFrame(a)};
this.playerLoadedHandler=function(){return c.config.popover.updatePosition()};this.isContinousPlayFinished=this.socialShareIsOpen=this.feedbackIsOpen=this.lightboxPausedVideo=!1;this.lightBoxPopoverClass="vse-lightbox-wrapper";this.productCarouselHtmlList=[];this.productCarouselInitList=[];this.productCarouselShown=[];this.isToggledToCollapse=this.doRecordProductMetrics=this.isSingleVideoCarousel=!1;this.shouldSeekVideo=!0;this.seekTime=0;this.dom=new ed(a.$("#"+a.popoverName+"-wrapper"),!!a.useSecondaryView,
a.$,a.A,a.productCarouselId,a.showProductCarousel);this.feedback=new fd(a);a.mShop&&a.mShopFactory&&(a.mShopFactory.addEventListener("appPause",function(){c.pauseVideoIfNeeded()}),a.mShopFactory.addEventListener("appResume",function(){c.resumeVideoIfNeeded()}));a.$(".vse-scrolltotop ").click(function(){a.$(".vse-vertical-scroll").animate({scrollTop:0},300)});a.$(".vse-vertical-scroll").scroll(function(){var d=a.$(".vse-vertical-scroll").scrollTop(),f=a.A.now();if(.25<=(d-c.lastScrollTop)/(f-c.lastTimeScroll))c._collapseProductCarouselSection();
else if(0==d){var g=c.activeVideoAsset?a.contentCarousel.findIndex(c.activeVideoAsset):-1;c.isToggledToCollapse&&-1<g&&c.productCarouselInitList[g]&&c.productCarouselShown[g]&&c._expandProductCarouselSection()}c.lastScrollTop=d;c.lastTimeScroll=f});a.$(document).delegate("#"+a.popoverTriggerId,"click",function(a){return a.preventDefault()});a.A.on("a:popover:beforeHide:"+a.popoverName,function(d){c.config.mShop&&c.config.mShopFactory&&!c.config.showHeaderBar&&(c.config.mShopFactory.cancelFullscreen(),
c.config.mShopFactory.dispatchEvent({type:"appOverlays.Show"}));c.feedbackIsOpen&&c.config.A.$("#"+c.config.feedbackId+"-trigger").removeClass("active");c.feedback.hide();a.A.trigger("vse:feedback:"+a.feedbackId+"-show-options:close");c.config.showShareWidget&&(c.socialShareIsOpen&&c.config.A.$("#"+c.config.socialShareId+"-trigger").removeClass("active"),c.dom.hideShareIcons(a.socialShareId),a.A.trigger("vse:socialShare:"+a.socialShareId+"-show-icons:close"));c.hide()});a.A.on("a:popover:afterShow:"+
a.popoverName,function(d){c.config.A.$(d.popover.$popover).addClass("vse-lightbox-wrapper "+a.A.$("#"+a.popoverName+"-wrapper").data("cssClass"));c.config.A.$(d.popover.$popover).find(".a-popover-header h4.a-popover-header-content").append(c.config.A.$(d.popover.$popover).find(".a-popover-inner .vse-lightbox-header-row-marker").addClass("vse-lightbox-header").removeClass("aok-hidden"));c.config.A.$(d.popover.$popover).find(".a-popover-header-secondary h4").text("").append(c.config.A.$(d.popover.$popover).find(".a-popover-inner .vse-lightbox-header-row-marker").clone().addClass("vse-lightbox-header").removeClass("aok-hidden"));
c.config.mShop&&c.config.$(d.popover.$popover).addClass("vse-lb-mshop");c.config.useSecondaryView&&c.dom.adjustLBPosition();c.config.mShop&&c.config.mShopFactory&&!c.config.showHeaderBar?(d={successCallback:function(){c.config.A.trigger("resize",{},{width:n.innerWidth,height:n.innerHeight});c.config.mShopFactory.dispatchEvent({type:"appOverlays.Hide"})}},d.failCallback=c.handleFailFullScreen,c.config.mShopFactory.requestFullscreen(d)):c.config.A.trigger("resize",{},{width:n.innerWidth,height:n.innerHeight});
c.lastScrollTop=a.$(".vse-vertical-scroll").scrollTop();c.lastTimeScroll=a.A.now()});this.config.mShop&&!this.config.showHeaderBar&&this.config.A.$(".vse-video-metadata").delegate("#vse-activevideo-crv-link","click",function(a){a.preventDefault();var b="";a.srcElement&&(b=a.srcElement.getAttribute("href"));a={successCallback:function(){c.config.A.trigger("resize",{},{width:n.innerWidth,height:n.innerHeight});n.location.href=b}};a.failCallback=c.handleFailFullScreen;c.config.mShopFactory.cancelFullscreen(a);
c.config.mShopFactory.dispatchEvent({type:"appOverlays.Show"})});if(a.showProductCarousel){var d=n.location.hostname;this.doRecordProductMetrics=a.recordProductMetrics||!1;-1!==d.indexOf("corp.amazon.com")?this.productCarouselAJAXEndpoint="https://development.amazon.com/vap/ew/":this.productCarouselAJAXEndpoint="/vap/ew/";this.productCarouselHtmlList=Array(this.config.contentCarousel.getplaylist().length);this.productCarouselInitList=Array(this.config.contentCarousel.getplaylist().length);this.productCarouselShown=
Array(this.config.contentCarousel.getplaylist().length);a.$(".vse-toggle-product-section").click(function(){return c._toggleProductCarouselSection()});a.A.on("vse:productCarousel:"+a.productCarouselId+":click",function(d){c.pauseVideoIfNeeded();c.doRecordProductMetrics&&(v.count(t.CLICK,1),d=c._buildProductClickMetrics(d,c.activeASIN||"",c.config.playerConfig),a.A.trigger("vse:productCarousel:"+a.productCarouselId+":productClickMetrics",d))})}this.config.showShareWidget&&(a.A.declarative(""+a.socialShareActionName,
"click",function(c){c.$target.hasClass("active")?a.A.trigger("vse:socialShare:"+a.socialShareId+"-show-icons:close"):a.A.trigger("vse:socialShare:"+a.socialShareId+"-show-icons:show");c.$target.toggleClass("active")}),this.registerSocialShare(a));this.registerFeedback(a);if(a.displayCarousel)a.A.on("vse:contentCarousel:"+a.carouselConfig.carouselName+":click",function(d){a.showShareWidget&&c.config.A.state.replace("vse-social-share",{pageLevelData:{clientRef:"lb",deviceTypeRef:c.config.isMobile?"mb":
"dt"},url:"https://www.amazon.com/gp/product/"+d.contentId,image:d.imageUrl,title:d.title,description:d.title});c.getPlayer(d).play(d);c.show(d);a.showProductCarousel&&(c._updateProductCarousel(d),c._adjustLightbox())})}a.prototype.onFirstFrame=function(a){this.shouldSeekVideo&&(this.getPlayer(a).setCurrentTime(this.seekTime),this.shouldSeekVideo=!1)};a.prototype.startPlaying=function(a,c){this.isContinousPlayFinished=!1;this.getPlayer(a);this.config.popover.show();this.show(a);if(this.config.autoplay||
this.config.mShop||!this.config.useSecondaryView)this.seekTime=c,this.getPlayer(a).unmute(),this.getPlayer(a).play(a);this.config.contentCarousel.changeStartingCardTo(a);this.config.showProductCarousel&&(this.config.carouselConfig||0!=this.productCarouselHtmlList.length||0!=this.productCarouselInitList.length||(this.isSingleVideoCarousel=!0),this._updateProductCarousel(a),this._adjustLightbox());return this};a.prototype.show=function(a){this.activeASIN=a.contentId;this.activeVideoAsset=a;this.config.contentCarousel.rotateTo(a);
this.dom.update(a,this.config.contentTitle);return this};a.prototype.createPlaylist=function(a){this.playlist=a;return this};a.prototype.getCarousel=function(){return this.config.contentCarousel};a.prototype.hide=function(){this.destroyPlayer();this.config.popover.hide();return this};a.prototype.handleFailFullScreen=function(){};a.prototype.hideIfPossible=function(){0==this.feedbackIsOpen&&1==this.isContinousPlayFinished&&this.hide()};a.prototype.getNextAsset=function(a){for(var c=0;c<this.playlist.length&&
this.playlist[c].contentId!=a.contentId;c++);if(c!=this.playlist.length)return this.playlist[c+1]};a.prototype.pauseVideoIfNeeded=function(){this.player&&this.player.isPlaying()&&(this.player.pause(),this.lightboxPausedVideo=!0)};a.prototype.resumeVideoIfNeeded=function(){this.player&&!this.player.isPlaying()&&!this.isContinousPlayFinished&&this.lightboxPausedVideo&&this.player.resume(Date.now());this.lightboxPausedVideo=!1};a.prototype.getPlayer=function(a){this.player||(this.config.autoplay&&(this.config.playerConfig.shouldStartMuted=
!0),a.eventTimestamp&&(this.config.playerConfig.eventTimestamp=a.eventTimestamp),this.config.playerConfig.initialVideo=a,this.player=this.config.awaFactory.create(this.config.playerConfig),this.player.on("playbackComplete",this.playbackCompleteHandler),this.player.on("playerLoaded",this.playerLoadedHandler),this.player.on("playerFullScreen",this.playerFullScreenHandler),this.player.on("playbackStart",this.firstFrameHandler));return this.player};a.prototype.destroyPlayer=function(){if(this.player){var a=
this.player;this.player=null;a.off("playbackComplete",this.playbackCompleteHandler);a.off("playerLoaded",this.playerLoadedHandler);a.off("playerFullScreen",this.playerFullScreenHandler);a.off("playbackStart",this.firstFrameHandler);this.shouldSeekVideo=!0;a.destroy();null==this.player}};a.prototype.onPlaybackComplete=function(a){var c=this.getNextAsset(a);c?(this.config.showShareWidget&&this.config.A.state.replace("vse-social-share",{pageLevelData:{clientRef:"lb",deviceTypeRef:this.config.isMobile?
"mb":"dt"},url:"https://www.amazon.com/gp/product/"+c.contentId,image:c.imageUrl,title:c.title,description:c.title}),a.eventTimestamp&&(c.eventTimestamp=a.eventTimestamp),this.player.play(c),this.show(c),this.config.showProductCarousel&&(this._updateProductCarousel(c),this._adjustLightbox())):(this.isContinousPlayFinished=!0,this.hideIfPossible())};a.prototype.onPlayerFullScreen=function(a){var c=this.config.$("#"+this.config.popoverName+"-wrapper"),d=this.config.$("."+this.lightBoxPopoverClass);
c&&(a?(c.addClass("vse-player-fullscreen"),d.addClass("vse-lb-fullscreen")):(c.removeClass("vse-player-fullscreen"),d.removeClass("vse-lb-fullscreen")))};a.prototype.deRegisterFeedback=function(a){a.A.off("vse:feedback:"+a.feedbackId+"-show-options:show");a.A.off("vse:feedback:"+a.feedbackId+"-show-options:close");a.A.off("a:sheet:beforeShow:"+a.feedbackId+"-sheet");a.A.off("a:sheet:beforeHide:"+a.feedbackId+"-sheet");a.A.off("a:sheet:afterHide:"+a.feedbackId+"-sheet");a.A.off("vse:feedback:"+a.feedbackId+
":submit")};a.prototype.registerFeedback=function(a){var c=this;this.deRegisterFeedback(a);a.A.on("vse:feedback:"+a.feedbackId+"-show-options:show",function(){c.feedbackIsOpen=!0;c.config.showShareWidget&&c.socialShareIsOpen&&(c.socialShareIsOpen=!1,c.dom.hideShareIcons(a.socialShareId),c.config.A.$("#"+c.config.socialShareId+"-trigger").removeClass("active"));c.pauseVideoIfNeeded();c.feedback.show()});a.A.on("vse:feedback:"+a.feedbackId+"-show-options:close",function(){c.feedbackIsOpen=!1;c.feedback.hide();
c.hideIfPossible();c.resumeVideoIfNeeded()});a.A.on("a:sheet:beforeShow:"+a.feedbackId+"-sheet",function(){c.feedbackIsOpen=!0;c.pauseVideoIfNeeded()});a.A.on("a:sheet:beforeHide:"+a.feedbackId+"-sheet",function(){c.feedbackIsOpen=!1;c.feedback.reset();c.hideIfPossible();c.resumeVideoIfNeeded()});a.A.on("a:sheet:afterHide:"+a.feedbackId+"-sheet",function(){a.mShop&&a.mShopFactory&&!a.showHeaderBar&&a.A.delay(function(){a.mShopFactory.dispatchEvent({type:"appOverlays.Hide"})},500)});a.A.on("vse:feedback:"+
a.feedbackId+":submit",function(d){a.$(a.feedbackId+"-trigger").toggleClass("active");c.feedbackIsOpen=!1;c.hideIfPossible();c.resumeVideoIfNeeded();c.feedback.submit({additionalComments:d.additionalComments,airyVersion:c.player?c.player.getVersion():"[Airy is not loaded.]",asin:c.config.playerConfig.requestMetadata.pageAsin,videoId:c.activeASIN?c.activeASIN:"",category:d.feedbackArea,rating:d.rating,url:document.location.href,userAgent:n.navigator.userAgent,feedbackTime:Date.now(),customerId:c.config.playerConfig.customerId})})};
a.prototype.deRegisterSocialShare=function(a){a.A.off("vse:socialShare:"+a.socialShareId+"-show-icons:show");a.A.off("vse:socialShare:"+a.socialShareId+"-show-icons:close")};a.prototype.registerSocialShare=function(a){var c=this;this.deRegisterSocialShare(a);a.A.on("vse:socialShare:"+a.socialShareId+"-show-icons:show",function(){c.feedbackIsOpen&&(c.feedbackIsOpen=!1,c.feedback.hide(),c.config.A.$("#"+c.config.feedbackId+"-trigger").removeClass("active"),c.resumeVideoIfNeeded());c.socialShareIsOpen=
!0;c.dom.showShareIcons(a.socialShareId)});a.A.on("vse:socialShare:"+a.socialShareId+"-show-icons:close",function(){c.socialShareIsOpen=!1;c.dom.hideShareIcons(a.socialShareId)})};a.prototype._updateProductCarousel=function(a){var c=this,d=this.config.playerConfig.customerId,e=this.config.playerConfig.requestMetadata.requestId,f=this.config.playerConfig.requestMetadata.sessionId,g=this.config.playerConfig.requestMetadata.marketplaceId,k="#"+this.config.productCarouselId,h=this.config.contentCarousel.findIndex(a);
if(this.config.mShop||this.config.useSecondaryView)this.config.$(k).addClass("aok-hidden"),this.config.$("#vseProductSize").addClass("aok-hidden"),this.config.$("#vseSectionToggleIcon").addClass("aok-hidden"),this.initProductCarousel(a,d,f,e,g,!0).then(function(a){c.dom.updateProductCarouselDOM(a)?(-1<h&&(c.productCarouselShown[h]=!0),c.config.$(k).removeClass("aok-hidden"),c.config.$("#vseToggleProductSection").removeClass("aok-hidden"),c.config.$("#vseSectionToggleIcon").removeClass("aok-hidden"),
c._adjustLightbox(),a=c.dom.getProductCarouselSize(),1===a?(c.config.$("#vseProductLabelPlural").addClass("aok-hidden"),c.config.$("#vseProductSize").addClass("aok-hidden"),c.config.$("#vseProductLabelSingular").removeClass("aok-hidden")):(c.config.$("#vseProductLabelPlural").removeClass("aok-hidden"),c.config.$("#vseProductSize").removeClass("aok-hidden"),c.config.$("#vseProductSize").html(a.toString()),c.config.$("#vseProductLabelSingular").addClass("aok-hidden")),c.isToggledToCollapse||c.config.$(".vse-product-collapsible-section").slideDown(250,
function(){return c._adjustLightbox()})):(-1<h&&(c.productCarouselShown[h]=!1),c.config.$("#vseToggleProductSection").addClass("aok-hidden"),c.config.$(".vse-product-collapsible-section").slideUp(250,function(){return c._adjustLightbox()}))})};a.prototype.initProductCarousel=function(a,c,d,e,f,g){var k=this,h=this,n=g?"Mobile":"Desktop";return new Promise(function(g){var m=h.config.contentCarousel.findIndex(a);if(-1===m)if(h.isSingleVideoCarousel)m=0,0===k.productCarouselHtmlList.length&&(k.productCarouselHtmlList=
Array(1),k.productCarouselInitList=Array(1));else{g("");return}a.sponsored&&!h.isSingleVideoCarousel&&(h.productCarouselInitList[m]=!0,g(""));var q={page:"RVP",placement:"VideoLightbox",device:n,customerId:c,sessionId:d,requestId:e,marketplaceID:f,video:{contentID:a.contentId,contentIDType:"ASIN"}};if(h.productCarouselInitList[m])g(h.productCarouselHtmlList[m]);else{k.config.$(".vse-product-collapsible-section").slideUp(250,function(){return k._adjustLightbox()});k.doRecordProductMetrics&&v.count(t.REQUEST,
1);var p=h.config.A.now();h.config.$.ajax({url:k.productCarouselAJAXEndpoint+"componentbuilder",data:JSON.stringify(q),crossDomain:!0,type:"POST",contentType:"application/json; charset\x3dutf-8",timeout:5E3}).done(function(a){if(k.doRecordProductMetrics){var b=h.config.A.now()-p;v.count(t.TIME,b);v.count(t.SUCCESS_TIME,b);v.count(t.SUCCESS,1);a&&(b=k.dom.getProductCarouselSize(),0<b&&v.count(t.SIZE,b))}h.productCarouselInitList[m]=!0;h.productCarouselHtmlList[m]=a;g(h.productCarouselHtmlList[m])}).fail(function(a,
b){k.doRecordProductMetrics&&(a=h.config.A.now()-p,v.count(t.TIME,a),v.count(t.ERROR_TIME,a),v.count(t.ERROR,1),b===t.TIMEOUT_STATUS&&v.count(t.TIMEOUT,1));h.productCarouselInitList[m]=!0;g("")})}})};a.prototype._toggleProductCarouselSection=function(){var a=this.activeVideoAsset?this.config.contentCarousel.findIndex(this.activeVideoAsset):-1;-1<a&&this.productCarouselInitList[a]&&(this.isToggledToCollapse?(this._expandProductCarouselSection(),v.count(t.TOGGLE_DOWN,1)):(this._collapseProductCarouselSection(),
v.count(t.TOGGLE_UP,1)))};a.prototype._expandProductCarouselSection=function(){var a=this;this.config.$(".vse-product-collapsible-section").slideDown(250,function(){return a._adjustLightbox()});this.config.$("#vseSectionToggleIcon").removeClass("a-icon-section-expand");this.config.$("#vseSectionToggleIcon").addClass("a-icon-section-collapse");this.isToggledToCollapse=!1;this._buildAndEmitProductImpressionMetric();this._updateProductCarousel(this.config.contentCarousel.getActiveAsset())};a.prototype._collapseProductCarouselSection=
function(){var a=this;this.config.$(".vse-product-collapsible-section").slideUp(250,function(){return a._adjustLightbox()});this.config.$("#vseSectionToggleIcon").addClass("a-icon-section-expand");this.config.$("#vseSectionToggleIcon").removeClass("a-icon-section-collapse");this.isToggledToCollapse=!0};a.prototype._adjustLightbox=function(){this.dom.adjustLBPosition();this.dom.updateVerticalScrollHeight()};a.prototype._buildAndEmitProductImpressionMetric=function(){if(this.doRecordProductMetrics){v.count(t.IMPRESSION,
1);var a=this._buildProductImpressionMetrics(this.activeASIN||"",this.config.playerConfig);this.config.A.trigger("vse:productCarousel:"+this.config.productCarouselId+":productImpressionMetrics",a)}};a.prototype._buildProductClickMetrics=function(a,c,d){return{events:[{data:{timestamp:new Date,videoWatchedAsin:c,originalPageAsin:d.requestMetadata.pageAsin,productClickedIndex:a.index,productClickedAsin:a.contentId,productClickedPrice:a.price,productClickedRating:a.rating,productClickedReviews:a.reviews,
productClickedPrimeEligibility:a.primeEligibility,widgetPosition:t.PLACEMENT,widgetid:this.config.productCarouselId,marketplaceid:d.requestMetadata.marketplaceId,sessionid:d.requestMetadata.sessionId,requestid:d.requestMetadata.requestId}}]}};a.prototype._buildProductImpressionMetrics=function(a,c){return{events:[{data:{timestamp:new Date,videoWatchedAsin:a,originalPageAsin:c.requestMetadata.pageAsin,impression:1,widgetPosition:t.PLACEMENT,widgetid:this.config.productCarouselId,marketplaceid:c.requestMetadata.marketplaceId,
sessionid:c.requestMetadata.sessionId,requestid:c.requestMetadata.requestId}}]}};return a}(),hd=function(){function a(){}a.prototype.markPlaying=function(a){};a.prototype.rotateTo=function(a){};a.prototype.changeStartingCardTo=function(a){};a.prototype.getplaylist=function(){return[]};a.prototype.getActiveAsset=function(){return{}};a.prototype.findIndex=function(a){return-1};a.prototype.destroy=function(){};return a}(),tb=null;w.when("mash").execute(function(a){tb=a});var id={getMash:function(){return tb}},
jd=function(){return function(a){this.name="InvalidArugmentsException";this.message=a}}(),kd=function(){function a(a){this.constructorConfig=a}a.prototype.create=function(a){var c=this.constructorConfig.modalFactory.get(this.constructorConfig.$("#"+a.popoverTriggerId)),d=a.useSecondaryView?this.constructorConfig.bottomSheetFactory:null,e=a.mShop?id.getMash():null,f=this.constructorConfig.feedbackFactory.create(a.feedbackId||"");if(!c)throw new jd("Cannot create popover using name "+a.popoverName);
var g=a.displayCarousel?this.constructorConfig.contentCarouselFactory.create(a.carouselConfig):new hd;return new gd({popoverName:a.popoverName,popoverTriggerId:a.popoverTriggerId,playerConfig:a.playerConfig,displayCarousel:a.displayCarousel,carouselConfig:a.carouselConfig,contentTitle:a.contentTitle,useSecondaryView:a.useSecondaryView,displayActiveVideoDetails:a.displayActiveVideoDetails,popover:c,$:this.constructorConfig.$,contentCarousel:g,bottomSheetFactory:d,mShopFactory:e,feedback:f,feedbackId:a.feedbackId,
productCarouselId:a.productCarouselId,awaFactory:this.constructorConfig.awaFactory,mShop:a.mShop,A:this.constructorConfig.A,feedbackEndpoint:a.feedbackEndpoint,showHeaderBar:a.showHeaderBar,showProductCarousel:a.showProductCarousel,recordProductMetrics:a.recordProductMetrics,featProductsUrl:a.featProductsUrl,showShareWidget:a.showShareWidget,socialShareId:a.socialShareId,socialShareActionName:a.socialShareActionName,isMobile:a.isMobile,autoplay:a.autoplay})};return a}(),ld=Array.prototype.splice;
A.prototype.clear=function(){this.__data__=[];this.size=0};A.prototype["delete"]=function(a){var b=this.__data__;a=da(b,a);if(0>a)return!1;a==b.length-1?b.pop():ld.call(b,a,1);--this.size;return!0};A.prototype.get=function(a){var b=this.__data__;a=da(b,a);return 0>a?void 0:b[a][1]};A.prototype.has=function(a){return-1<da(this.__data__,a)};A.prototype.set=function(a,b){var c=this.__data__,d=da(c,a);0>d?(++this.size,c.push([a,b])):c[d][1]=b;return this};var ub="object"==typeof global&&global&&global.Object===
Object&&global,md="object"==typeof self&&self&&self.Object===Object&&self,z=ub||md||Function("return this")(),M=z.Symbol,vb=Object.prototype,Mb=vb.hasOwnProperty,Nb=vb.toString,X=M?M.toStringTag:void 0,Ob=Object.prototype.toString,Ka=M?M.toStringTag:void 0,Ba=z["__core-js_shared__"],Ma=function(){var a=/[^.]+$/.exec(Ba&&Ba.keys&&Ba.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Pb=Function.prototype.toString,Rb=/^\[object .+?Constructor\]$/,Qb=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,
"\\$\x26").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),aa=S(z,"Map"),ba=S(Object,"create"),nd=Object.prototype.hasOwnProperty,od=Object.prototype.hasOwnProperty;K.prototype.clear=function(){this.__data__=ba?ba(null):{};this.size=0};K.prototype["delete"]=function(a){a=this.has(a)&&delete this.__data__[a];this.size-=a?1:0;return a};K.prototype.get=function(a){var b=this.__data__;return ba?(a=b[a],"__lodash_hash_undefined__"===a?void 0:a):nd.call(b,a)?b[a]:void 0};
K.prototype.has=function(a){var b=this.__data__;return ba?void 0!==b[a]:od.call(b,a)};K.prototype.set=function(a,b){var c=this.__data__;this.size+=this.has(a)?0:1;c[a]=ba&&void 0===b?"__lodash_hash_undefined__":b;return this};D.prototype.clear=function(){this.size=0;this.__data__={hash:new K,map:new (aa||A),string:new K}};D.prototype["delete"]=function(a){a=ea(this,a)["delete"](a);this.size-=a?1:0;return a};D.prototype.get=function(a){return ea(this,a).get(a)};D.prototype.has=function(a){return ea(this,
a).has(a)};D.prototype.set=function(a,b){var c=ea(this,a),d=c.size;c.set(a,b);this.size+=c.size==d?0:1;return this};E.prototype.clear=function(){this.__data__=new A;this.size=0};E.prototype["delete"]=function(a){var b=this.__data__;a=b["delete"](a);this.size=b.size;return a};E.prototype.get=function(a){return this.__data__.get(a)};E.prototype.has=function(a){return this.__data__.has(a)};E.prototype.set=function(a,b){var c=this.__data__;if(c instanceof A){var d=c.__data__;if(!aa||199>d.length)return d.push([a,
b]),this.size=++c.size,this;c=this.__data__=new D(d)}c.set(a,b);this.size=c.size;return this};fa.prototype.add=fa.prototype.push=function(a){this.__data__.set(a,"__lodash_hash_undefined__");return this};fa.prototype.has=function(a){return this.__data__.has(a)};var Oa=z.Uint8Array,wb=M?M.prototype:void 0,oa=wb?wb.valueOf:void 0,B=Array.isArray,pd=Object.prototype.propertyIsEnumerable,xb=Object.getOwnPropertySymbols,Va=xb?function(a){if(null==a)return[];a=Object(a);return Wb(xb(a),function(b){return pd.call(a,
b)})}:Xb,yb=Object.prototype,qd=yb.hasOwnProperty,rd=yb.propertyIsEnumerable,Ra=Qa(function(){return arguments}())?Qa:function(a){return C(a)&&qd.call(a,"callee")&&!rd.call(a,"callee")},zb="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ab=zb&&"object"==typeof module&&module&&!module.nodeType&&module,Bb=Ab&&Ab.exports===zb?z.Buffer:void 0,sa=(Bb?Bb.isBuffer:void 0)||Yb,Zb=/^(?:0|[1-9]\d*)$/,p={};p["[object Float32Array]"]=p["[object Float64Array]"]=p["[object Int8Array]"]=p["[object Int16Array]"]=
p["[object Int32Array]"]=p["[object Uint8Array]"]=p["[object Uint8ClampedArray]"]=p["[object Uint16Array]"]=p["[object Uint32Array]"]=!0;p["[object Arguments]"]=p["[object Array]"]=p["[object ArrayBuffer]"]=p["[object Boolean]"]=p["[object DataView]"]=p["[object Date]"]=p["[object Error]"]=p["[object Function]"]=p["[object Map]"]=p["[object Number]"]=p["[object Object]"]=p["[object RegExp]"]=p["[object Set]"]=p["[object String]"]=p["[object WeakMap]"]=!1;var Cb="object"==typeof exports&&exports&&
!exports.nodeType&&exports,Db=Cb&&"object"==typeof module&&module&&!module.nodeType&&module,Ca=Db&&Db.exports===Cb&&ub.process,la;a:{try{la=Ca&&Ca.binding&&Ca.binding("util");break a}catch(a){}la=void 0}var Eb=la&&la.isTypedArray,Sa=Eb?ac(Eb):$b,bc=Object.prototype.hasOwnProperty,cc=Object.prototype,ec=function(a,b){return function(c){return a(b(c))}}(Object.keys,Object),dc=Object.prototype.hasOwnProperty,fc=Object.prototype.hasOwnProperty,Da=S(z,"DataView"),Ea=S(z,"Promise"),Fa=S(z,"Set"),ca=S(z,
"WeakMap"),sd=J(Da),td=J(aa),ud=J(Ea),vd=J(Fa),wd=J(ca),U=H;if(Da&&"[object DataView]"!=U(new Da(new ArrayBuffer(1)))||aa&&"[object Map]"!=U(new aa)||Ea&&"[object Promise]"!=U(Ea.resolve())||Fa&&"[object Set]"!=U(new Fa)||ca&&"[object WeakMap]"!=U(new ca))U=function(a){var b=H(a);if(a=(a="[object Object]"==b?a.constructor:void 0)?J(a):"")switch(a){case sd:return"[object DataView]";case td:return"[object Map]";case ud:return"[object Promise]";case vd:return"[object Set]";case wd:return"[object WeakMap]"}return b};
var Ta=U,Ua=Object.prototype.hasOwnProperty,kc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jc=/^\w*$/;ua.Cache=D;var xd=/^\./,yd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zd=/\\(\\)?/g,mc=function(a){a=ua(a,function(a){500===b.size&&b.clear();return a});var b=a.cache;return a}(function(a){var b=[];xd.test(a)&&b.push("");a.replace(yd,function(a,d,e,f){b.push(e?f.replace(zd,"$1"):d||a)});return b}),lc=1/0,Fb=M?M.prototype:void 0,Ya=Fb?
Fb.toString:void 0,nc=1/0,Ad=function(a){return function(b,c,d){var e=-1,f=Object(b);d=d(b);for(var g=d.length;g--;){var k=d[a?g:++e];if(!1===c(f[k],k,f))break}return b}}(),bb=function(a,b){return function(c,d){if(null==c)return c;if(!ra(c))return a(c,d);for(var e=c.length,f=b?e:-1,g=Object(c);(b?f--:++f<e)&&!1!==d(g[f],f,g););return c}}(function(a,b){return a&&Ad(a,b,ga)}),Bd=function(){function a(a,c){var d=this;this.sectionId=c;a.A.declarative(a.id+"-"+c+"-choose","click",function(e){e.$event.stopPropagation();
d.selected=e.$target;d.buttons.enable();d.selected.closest(".a-radio").hasClass(a.id+"-"+c+"-choose-other")?d.freeText.show():e.$target.parent().hasClass(a.id+"-"+c+"-text")||(d.freeText.val(""),d.freeText.hide())});this.buttons=a.buttonApi("#"+a.id+"-"+c+"-button-primary");this.choices=a.buttonApi(a.id+"-"+c);this.freeText=a.A.$("#"+a.id+"-"+c+"-content textarea")}a.prototype.reset=function(){this.selected.prop("checked",!1);this.buttons.disable();this.freeText.val("")};a.prototype.show=function(){return this};
a.prototype.hide=function(){this.reset();return this};return a}(),Cd=function(){function a(a){var c=this;this.config=a;this.payload={};this.registered=!1;this.ratingMap={"The video content is inappropriate":"inappropriate content","The video content is misleading":"misleading content","Other content-related feedback":"content other","The ad is too long":"ads are too long","The ad does not play":"ad did not play","The ad does not inform my purchase":"ad did not inform purchase","Other ad-related feedback":"ad other",
"The video does not play":"unplayable video","There is too much buffering":"too much buffering","The audio is poor or missing":"poor audio","Other technical issue":"technical other","Video is unrelated to the product":"inaccurate related items appear","Other product-related feedback":"product other"};this.A=a.A;this.id=a.id;this.endpoint=a.feedbackEndpoint;var d=this,e=""+this.id;sc(this.A.$("input[name\x3d"+e+"-options]:not(:checked)"),function(c){new Bd(a,d.A.$(c).attr("value"))});this.buttonApi=
a.buttonApi;this.registered||(this.A.declarative(e+"-options-choose","click",function(a){(a=a.$target.prop("value"))&&c.showSection(a)}),this.A.declarative(this.id+"-cancel","click",function(){return c.reset()}),this.A.declarative(this.id+"-submit","click",function(){return c.submitFeedback()}),this.registered=!0)}a.prototype.showSection=function(a){this.A.trigger("vse:feedback:"+this.id+":showSection");this.activeSection&&this.A.$(this.activeSection).attr("id")!==this.id+"-"+a+"-content"&&this.clearForm();
this.activeButtons=this.buttonApi("#"+this.id+"-"+a+"-button-primary");this.activeSection=this.A.$("#"+this.id+"-"+a+"-content").slideDown("fast");this.activeButtonSection=this.A.$("#"+this.id+"-"+a+"-buttons").removeClass("aok-hidden");this.activeText=this.A.$("#"+this.id+"-"+a+"-content textarea")};a.prototype.submitFeedback=function(){var a=this.activeSection?this.activeSection.find('input[type\x3d"radio"]:checked').siblings(".a-radio-label").text():"",a=this.ratingMap[a]||"";this.A.trigger("vse:feedback:"+
this.id+":submit",{additionalComments:this.activeText?this.activeText.val():"",feedbackArea:this.activeSection?this.activeSection.prev("[data-a-input-name\x3d"+this.id+"-options]").data("feedback-field-value"):"",rating:a});this.clearForm()};a.prototype.reset=function(){this.clearForm();this.A.trigger("vse:feedback:"+this.id+":reset");return this};a.prototype.clearForm=function(){this.activeButtonSection&&this.activeButtonSection.addClass("aok-hidden");this.activeButtons&&this.activeButtons.disable();
this.activeText&&(this.activeText.val(""),this.activeText.hide());this.activeSection&&(this.activeSection.slideUp(),this.activeSection.find('input[type\x3d"radio"]:checked').each(function(a,c){this.checked=!1}),this.activeSection.prev().find('input[type\x3d"radio"]:checked').each(function(a,c){this.checked=!1}));return this};a.prototype.hide=function(){return this};return a}(),Dd=function(){function a(a){this.config=a;this.feedbackWidgets={}}a.prototype.create=function(a){var c=this.feedbackWidgets[a]||
new Cd(this.createFeedbackConfig(a));return this.feedbackWidgets[a]=c};a.prototype.get=function(a){return this.feedbackWidgets[a]};a.prototype.createFeedbackConfig=function(a){return{A:this.config.A,dropdownApi:this.config.dropdownApi,buttonApi:this.config.buttonApi,feedbackEndpoint:this.config.feedbackEndpoint,id:a}};return a}(),cb=Math.max,ma=function(){try{var a=S(Object,"defineProperty");a({},"",{});return a}catch(b){}}(),vc=Date.now,ib=db(ma?function(a,b){return ma(a,"toString",{configurable:!0,
enumerable:!1,value:uc(b),writable:!0})}:ja),na=ca&&new ca,Gb=na?function(a,b){na.set(a,b);return a}:ja,Hb=Object.create,wa=function(){function a(){}return function(b){if(!I(b))return{};if(Hb)return Hb(b);a.prototype=b;b=new a;a.prototype=void 0;return b}}(),xc=Math.max,yc=Math.max;R.prototype=wa(xa.prototype);R.prototype.constructor=R;var lb=na?function(a){return na.get(a)}:zc,kb={},Hc=Object.prototype.hasOwnProperty;V.prototype=wa(xa.prototype);V.prototype.constructor=V;var Ac=Object.prototype.hasOwnProperty;
ka.prototype=xa.prototype;ka.prototype.constructor=ka;var mb=db(Gb),Ec=/\{\n\/\* \[wrapped with (.+)\] \*/,Fc=/,? & /,Gc=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Dc=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Ic=Math.min,Ed=Math.min,nb=0/0,Mc=/^\s+|\s+$/g,Qc=/^[-+]0x[0-9a-f]+$/i,Nc=/^0b[01]+$/i,Oc=/^0o[0-7]+$/i,Pc=parseInt,pb=1/0,Ib=Math.max,Ga=function(a,b){return ib(tc(a,b,ja),a+"")}(function(a,b){var c=Z(b,
Ga.placeholder),d=a,e=32,f=void 0,g=b,k=c,h=void 0,n=void 0;b=e&2;if(!b&&"function"!=typeof d)throw new TypeError("Expected a function");a=g?g.length:0;a||(e&=-97,g=k=void 0);h=void 0===h?h:Ib(ob(h),0);n=void 0===n?n:ob(n);a-=k?k.length:0;if(e&64)var l=g,m=k,g=k=void 0;c=b?void 0:lb(d);l=[d,e,f,g,k,l,m,void 0,h,n];if(c&&(f=l[1],d=c[1],e=f|d,m=128==d&&8==f||128==d&&256==f&&l[7].length<=c[8]||384==d&&c[7].length<=c[8]&&8==f,131>e||m)){d&1&&(l[2]=c[2],e|=f&1?0:4);if(f=c[3])m=l[3],l[3]=m?eb(m,f,c[4]):
f,l[4]=m?Z(l[3],"__lodash_placeholder__"):c[4];if(f=c[5])m=l[5],l[5]=m?fb(m,f,c[6]):f,l[6]=m?Z(l[5],"__lodash_placeholder__"):c[6];(f=c[7])&&(l[7]=f);d&128&&(l[8]=null==l[8]?c[8]:Ed(l[8],c[8]));null==l[9]&&(l[9]=c[9]);l[0]=c[0];l[1]=e}d=l[0];e=l[1];f=l[2];g=l[3];k=l[4];n=l[9]=void 0===l[9]?b?0:d.length:Ib(l[9]-a,0);!n&&e&24&&(e&=-25);b=e&&1!=e?8==e||16==e?Jc(d,e,n):32!=e&&33!=e||k.length?ya.apply(void 0,l):Kc(d,e,f,g):wc(d,e,f);return hb((c?Gb:mb)(b,l),d,e)});Ga.placeholder={};var Fd=function(a,b){return function(c,
d){var e=B(c)?Rc:Sc,f=b?b():{};return e(c,a,ab(d,2),f)}}(function(a,b,c){"__proto__"==c&&ma?ma(a,c,{configurable:!0,enumerable:!0,value:b,writable:!0}):a[c]=b}),Jb=1,Hd=function(a){function b(a,b){if(n.ue)try{n.ue.count(a,b)}catch(c){n.ueLogError&&n.ueLogError(c,{logLevel:"ERROR",attribution:"vse-related-video-shorts-metrics",message:"Failed to log CSM level metric."})}}function c(a){if(!(0>t)){var c=m[a].getPosition()-t;t=-1;2<=c&&(b("vse:rvs:ma:viewable",1),0<=a&&a<r.length?b("vse:rvs:ma:viewable:"+
r[a],1):b("vse:rvs:ma:viewable:x",1))}}function d(a){if(q[a])try{m[a].pause(),q[a]=!1,c(a)}catch(d){b("vse:rvs:ma:error",1)}}function e(a){if(!q[a]){var b=m[a];q[a]=!0;t=b.getPosition();p=Date.now();b.play()}}function f(){if(!(0>p)){var a=u?"vse:rvs:ma:scroll:ptff":"vse:rvs:ma:swipe:ptff",c=Date.now()-p;b(a,c);u=!1;p=-1}}function g(a,b){var c=a.$(n);a=c.scrollTop();var c=a+c.height(),d=b.offset().top+.4*b.height();return b.offset().top+.6*b.height()<=c&&d>=a}function k(a){return function(b){b.sessionId=
a.requestMetadata.sessionId;b.requestId=a.requestMetadata.requestId;b.customerId=a.customerId;b.marketplaceId=a.requestMetadata.marketplaceId;b.pageAsin=a.requestMetadata.pageAsin;b.timestamp=new Date;return{events:[{data:b}]}}}var h=!0,r=["one","two","three","four"],l="",m=[],q=[],p=-1,t=-1,u=!0,z=!1,x=-1,y=!1;return new a(function(a,p){w.when("A").register("VSE-RVS-client",function(p){var r=!0,t=null,w=null,B=function(a,c,e,f){t&&p.off(t);w&&p.off(w);w=p.on("a:popover:beforeHide:"+c.popoverName,
function(a){f.destroy()});t=p.on("vse:contentCarousel:"+a.carouselName+":click",function(f){for(var g=e.getCarousel().getplaylist(),k=0,h=0;h<g.length;h++){if(g[0].contentId==f.contentId){a.autoplay&&"undefined"!==typeof m[h]&&(d(h),z=!1,k=m[h].getCurrentTime());break}g.push(g.shift())}c.showShareWidget&&p.state.replace("vse-social-share",{pageLevelData:{clientRef:"lb",deviceTypeRef:c.isMobile?"mb":"dt"},url:"https://www.amazon.com/gp/product/"+f.contentId,image:f.imageUrl,title:f.title,description:f.title});
b("vse:rvs:widget:click",1);a.autoplayTriggered&&b("vse:rvs:ma:widget:click",1);e.createPlaylist(g);e.startPlaying(f,k)});p.on("vse:productCarousel:"+c.productCarouselId+":productClickMetrics",function(a){v.emitSushiMetric(a,c.featProductsUrl)});p.on("vse:productCarousel:"+c.productCarouselId+":productImpressionMetrics",function(a){v.emitSushiMetric(a,c.featProductsUrl)})},G=function(a,b,c,d){var e=p.$.extend({},c);c=p.$.extend({},c.videoAds);var g=a[b];a="vse-rvs-ingress-player-"+(b+1);var n=k(e);
e.requestMetadata.method=e.requestMetadata.method.replace("vse_lb","vse_rva");e.initialVideo=g;e.containerId=a;e.shouldStartMuted=h;e.shouldDisableControls=!0;e.airyVersion="VideoJS";e.videoAds=c;e.videoAds.isEngineEnabled=!1;p.$("#"+a).find("img").hide();p.$("#"+a).find("p").hide();m[b]=d.create(e);m[b].on("playbackStart",f);m[b].on("playbackComplete",function(a){q[b]=!1});p.$("#"+a+"-container").wrap('\x3cdiv class\x3d"vse-rvs-autoplay-container"\x3e\x3c/div\x3e');d=h?"https://m.media-amazon.com/images/G/01/vse/Discovery/mute._CB474746454_.png":
"https://m.media-amazon.com/images/G/01/vse/Discovery/unmute._CB474746442_.png";p.$("#"+a+"-container").after("\x3cdiv class \x3d 'vse-rvp-overlap-player'\x3e\x3c/div\x3e\x3cimg class\x3d'vse-rvp-mutebutton' src\x3d"+d+" /\x3e");p.$("#"+a).find(".vse-rvp-overlap-player").bind("click",function(a){a=n({videoAsin:g.contentId,name:"vse.related_video_advertising.videoClick"});v.emitSushiMetric(a,l)});p.$("#"+a).find(".vse-rvp-mutebutton").bind("click",function(a){a.stopPropagation();a.preventDefault();
if(m[b].isMuted())for(h=!1,p.$(".vse-rvp-mutebutton").attr("src","https://m.media-amazon.com/images/G/01/vse/Discovery/unmute._CB474746442_.png"),a=0;a<m.length&&"undefined"!==typeof m[a];a++){m[a].unmute();var c=n({name:"vse.related_video_advertising.unmuteClick",videoAsin:g.contentId});v.emitSushiMetric(c,l)}else for(h=!0,p.$(".vse-rvp-mutebutton").attr("src","https://m.media-amazon.com/images/G/01/vse/Discovery/mute._CB474746454_.png"),a=0;a<m.length&&"undefined"!==typeof m[a];a++)m[a].mute()})};
return{preLoadAiry:function(a){if(r)try{var b=a.state("vse-dp-vl-config");if(b){var c=b.playerConfig,d=c.container||document.getElementById(c.containerId),e=document.createElement("iframe");e.className="vse-airy-preload-assets";if(d){d.appendChild(e);if("3"==c.airyVersion){var f=c.airy3ScriptUrl||"https://d2tz3plrpnfrv0.cloudfront.net/airy/prod/latest/airy.min.js";e.contentWindow.document.open();e.contentWindow.document.write('\x3cbody\x3e\n                        \x3cscript crossorigin\x3d"anonymous" src\x3d"'+
f+'"\x3e\x3c/script\x3e\n                        \x3cscript crossorigin\x3d"anonymous" src\x3d"https://avodassets-a.akamaihd.net/playback/web_player/webplayer.js"\x3e\x3c/script\x3e\n                     \x3c/body\x3e')}else{var g=c.airy2Version;a="https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2/prod/"+g+"/js/airy.ads._TTW_.js";var h=b.useSecondaryView?"https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2/prod/"+g+"/css/aries._TTW_.css":"https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2/prod/"+
g+"/css/beacon._TTW_.css",k=b.useSecondaryView?"https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2//prod/"+g+"/skins/aries._TTW_.js":"";e.contentWindow.document.open();e.contentWindow.document.write('\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+h+'" /\x3e\n                         \x3cbody\x3e\n                             \x3cscript crossorigin\x3d"anonymous" src\x3d"'+a+'"\x3e\x3c/script\x3e\n                             \x3cscript crossorigin\x3d"anonymous" src\x3d"'+
k+'"\x3e\x3c/script\x3e\n                         \x3c/body\x3e')}e.contentWindow.document.close();e&&e.classList&&e.classList.add("aok-hidden");r=!1}else r=!0}else r=!0}catch(l){n.ueLogError&&n.ueLogError(l,{logLevel:"ERROR",attribution:"vse-related-video-shorts-videoplayer-preload",message:"Failed to create the preload element."})}},initializeClient:function(a,f,h,p,q,r,t,w){try{var F=a.now();a.$("#va-related-videos-widget_feature_div").removeClass("aok-hidden");a.$("#vse-spinner").removeClass("aok-hidden");
a.state.replace("vse-dp-rv-config",JSON.parse(a.$("script[type\x3d'a-state'][data-a-state*\x3dvse-dp-rv-config]").html()));a.state.replace("vse-dp-vl-config",JSON.parse(a.$("script[type\x3d'a-state'][data-a-state*\x3dvse-dp-vl-config]").html()));var N=a.state("vse-dp-rv-config"),A=a.state("vse-dp-vl-config"),D=a.state("vse-dp-rvs-config"),E=a.state("vse-dp-rvs-ad-metrics-url");E&&E.url&&(l=E.url);if(N&&0!=N.length&&(N.showAdPlacement||A&&0!=A.length)){var I=k(D);r={gatedP:sb,_partial:Ga,_keyBy:Fd,
EventEmitter:$c,Promise:r};var M=new dd(f,a,r),J=new Zc(r),S=new Dd({A:a,dropdownApi:p,buttonApi:q,feedbackEndpoint:""}),K=new kd({modalFactory:h,contentCarouselFactory:M,$:a.$,A:a,feedbackFactory:S,awaFactory:J,bottomSheetFactory:t}),P=M.create(N),C=P.getplaylist(),L=function(){var a=m[0].getPosition();2<=a?(a=I({videoAsin:C[0].contentId,name:"vse.related_video_advertising.videoView"}),v.emitSushiMetric(a,l),x=-1,y=!0):x=setTimeout(L,1E3*(2-a))};if(1<=C.length&&N.autoplay){var U=a.now();for(f=0;f<
Math.min(2,C.length);f++)G(C,f,D,J);m[0].on("playbackComplete",function(a){e(0);y=!1;setTimeout(L,2)});var H=0,O=0;a.on("a:carousel:"+N.carouselName+":updatePageIndex",function(a,b){H=O;O=(a-1)*b});a.$(n).unload(function(){c(O)});var Q=a.$("#vse-rvs-ingress-player-1");a.on("a:carousel:"+N.carouselName+":scrollCarousel",function(c,f){H=O;O=(c-1)*f;if(g(a,Q)){d(H);if(O>H)for(c=0;2>=c;c++)f=O+c,f<C.length&&"undefined"===typeof m[f]&&G(C,f,D,J);b("vse:rvs:ma:widget:swipe",1);e(O)}});a.on("vse:rva:carousel:"+
N.carouselName+":productClick",function(a){a=I(a);v.emitSushiMetric(a,l)});var R=function(){"undefined"!==typeof Q&&(g(a,Q)?(z||b("vse:rvs:ma:widget:view",1),u=z=!0,e(O),-1!==x||y||(x=setTimeout(L,1E3*(2-m[0].getPosition())))):(z=!1,d(O),-1!==x&&(clearTimeout(x),x=-1)))};m[O].on("playerLoaded",function(a){R()});R();a.on.scroll(function(){R()});b("vse:rvs:init-client:players",a.now()-U)}if(!N.showAdPlacement){var V=K.create(A);B(N,A,V,P)}var A=Jb-w,T=a.now(),K=T-w;b("vse:csm:vse-rel-videos-carousel:loadedNotRegistered:time",
A);b("vse:csm:vse-rel-videos-carousel:loadedAndRegistered:time",K);b("vse:rvs:init-client",T-F);b("vse:rvs:init-client:waiting",F-w);a.$("#vse-spinner").addClass("aok-hidden");b("vse:rvs:page:view",1);N.autoplayTriggered&&b("vse:rvs:ma:page:view",1)}}catch(Gd){a.$("#va-related-videos-widget_feature_div").addClass("aok-hidden"),n.ueLogError&&n.ueLogError(Gd,{logLevel:"FATAL",attribution:"vse-related-video-shorts",message:"Failed to create the video lightbox experience."})}},_noneFeature:a()}})})};
w.when("A","3p-promise").execute("VSE-gatedP-register-client",function(a,b){Jb=a.now();sb.register("VSE-RVS-client","VSE-RVS-client-registered",Hd,b)})})()});